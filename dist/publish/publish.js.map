{"version":3,"sources":["node_modules/_browser-pack@6.1.0@browser-pack/_prelude.js","src/game/babylonloader.ts","src/game/config.ts","src/game/game.ts","src/game/index.ts","src/game/loader.ts","src/game/scenes.ts","src/index.ts","src/lib/ajax.ts","src/lib/editor.ts","src/lib/events.ts","src/lib/guid.ts","src/lib/index.ts","src/lib/observer.ts","src/lib/tools.ts","src/main.ts"],"names":[],"mappings":"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","file":"publish.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// import { Tools, AjaxRequest, Ajax, GUID } from \"../../../editor/utility\";\r\nimport { Ajax, AjaxRequest, GUID, Observer, Tools } from \"../lib\";\r\n// import { VeryEngine } from \"../../../engine\";\r\n// import { Config } from \"../../../editor/global\";\r\n\r\nexport class BabylonLoader {\r\n\r\n\r\n    public static prefix: string = '/assets/';\r\n\r\n    public static assetsData: any = {};\r\n    public static projectData: any = {};\r\n    public static scenesData: any = {};\r\n    public static sceneIndex: number = 0;\r\n\r\n\r\n    public static babylonCacheData: { [key: string]: any } = {};\r\n    public static babylonParsedData: { [key: string]: any } = {};\r\n\r\n\r\n    constructor() {\r\n\r\n    }\r\n\r\n    public static loadFromBabylonAsset() {\r\n\r\n    }\r\n\r\n\r\n    public static loadBabylon(asset: Observer) {\r\n        let assetID: string = asset.get('id');\r\n        let dataBabylon: any = null;\r\n        if (BabylonLoader.babylonCacheData[assetID]) {\r\n            dataBabylon = BabylonLoader.babylonCacheData[assetID];\r\n            BabylonLoader.parseBabylon(assetID, dataBabylon);\r\n            BabylonLoader.assembleBabylon(assetID, dataBabylon);\r\n        } else {\r\n            var data1 = {\r\n                url: BabylonLoader.prefix + asset.get('id') + '/' + asset.get('name'),\r\n                method: 'GET',\r\n                // auth: true,\r\n                data: null,\r\n                ignoreContentType: true,\r\n                // headers: {\r\n                //     Accept: 'application/json'\r\n                // }\r\n            };\r\n\r\n            // 直接返回babylon json格式内容数据\r\n            (<AjaxRequest>new Ajax(data1))\r\n                .on('load', (status: any, data: any) => {\r\n\r\n                    dataBabylon = data;\r\n                    BabylonLoader.babylonCacheData[assetID] = dataBabylon;\r\n                    BabylonLoader.parseBabylon(assetID, dataBabylon);\r\n                    BabylonLoader.assembleBabylon(assetID, dataBabylon);\r\n                }).on('error', (evt: any) => {\r\n                    console.error(evt);\r\n                });;\r\n        }\r\n    }\r\n\r\n\r\n    public static assembleBabylon(assetID: string, dataBabylon: any) {\r\n        if (dataBabylon !== null) {\r\n            console.warn(dataBabylon);\r\n            console.log(dataBabylon.meshes);\r\n            console.log(dataBabylon.materials);\r\n            console.log(dataBabylon.lights);\r\n\r\n            // if (dataBabylon.lights) {\r\n            //     dataBabylon.lights.forEach((element: any) => {\r\n            //         BabylonLoader.loadLight(element, VeryEngine.viewScene);\r\n            //     });\r\n            // }\r\n\r\n            // material assemble\r\n            if (BabylonLoader.assetsData.babylon[assetID]) {\r\n                let mats = BabylonLoader.assetsData.babylon[assetID]['materials'];\r\n                let newMats = [];\r\n                for (let key in mats) {\r\n                    if (mats[key].asset_id && BabylonLoader.assetsData.assets[mats[key].asset_id]) {\r\n                        let newMat = BabylonLoader.assetsData.assets[mats[key].asset_id].data;\r\n                        // 检测texture\r\n                        if (newMat.diffuseTexture && newMat.diffuseTexture.texture_id) {\r\n                            newMat.diffuseTexture.name = BabylonLoader.prefix + newMat.diffuseTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.diffuseTexture.texture_id].name;\r\n                            // console.warn(newMat.diffuseTexture.name);\r\n                        }\r\n                        if (newMat.specularTexture && newMat.specularTexture.texture_id) {\r\n                            newMat.specularTexture.name = BabylonLoader.prefix + newMat.specularTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.specularTexture.texture_id].name;\r\n                        }\r\n                        if (newMat.reflectionTexture && newMat.reflectionTexture.texture_id) {\r\n                            newMat.reflectionTexture.name = BabylonLoader.prefix + newMat.reflectionTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.reflectionTexture.texture_id].name;\r\n                        }\r\n                        if (newMat.refractionTexture && newMat.refractionTexture.texture_id) {\r\n                            newMat.refractionTexture.name = BabylonLoader.prefix + newMat.refractionTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.refractionTexture.texture_id].name;\r\n                        }\r\n                        if (newMat.emissiveTexture && newMat.emissiveTexture.texture_id) {\r\n                            newMat.emissiveTexture.name = BabylonLoader.prefix + newMat.emissiveTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.emissiveTexture.texture_id].name;\r\n                        }\r\n                        if (newMat.bumpTexture && newMat.bumpTexture.texture_id) {\r\n                            newMat.bumpTexture.name = BabylonLoader.prefix + newMat.bumpTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.bumpTexture.texture_id].name;\r\n                        }\r\n                        if (newMat.opacityTexture && newMat.opacityTexture.texture_id) {\r\n                            newMat.opacityTexture.name = BabylonLoader.prefix + newMat.opacityTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.opacityTexture.texture_id].name;\r\n                        }\r\n                        if (newMat.ambientTexture && newMat.ambientTexture.texture_id) {\r\n                            newMat.ambientTexture.name = BabylonLoader.prefix + newMat.ambientTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.ambientTexture.texture_id].name;\r\n                        }\r\n                        if (newMat.lightmapTexture && newMat.lightmapTexture.texture_id) {\r\n                            newMat.lightmapTexture.name = BabylonLoader.prefix + newMat.lightmapTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.lightmapTexture.texture_id].name;\r\n                        }\r\n\r\n                        newMats.push(newMat);\r\n                    }\r\n                }\r\n\r\n                newMats.forEach((element: any) => {\r\n                    // console.error(element);\r\n                    BabylonLoader.loadMaterial(element, VR.BabylonEngine.Scene, '');\r\n                });\r\n            }\r\n\r\n            // geometries assemble\r\n            if (dataBabylon.geometries && dataBabylon.geometries.vertexData) {\r\n                dataBabylon.geometries.vertexData.array.forEach((parsedVertexData: any) => {\r\n                    BabylonLoader.loadGeometry(parsedVertexData, VR.BabylonEngine.Scene, '');\r\n                });\r\n            }\r\n\r\n            // transformNode assemble\r\n            let newTransformNodes: Nullable<BABYLON.TransformNode>[] = [];\r\n            if (dataBabylon.transformNodes) {\r\n                dataBabylon.transformNodes.forEach((parsedTransformNode: any) => {\r\n                    let node = BabylonLoader.loadTransformNode(parsedTransformNode, VR.BabylonEngine.Scene, '');\r\n                    newTransformNodes.push(node);\r\n                });\r\n            }\r\n\r\n            // mesh assemble\r\n            let newMeshes: Nullable<BABYLON.AbstractMesh>[] = [];\r\n            let parentMeshes: Nullable<BABYLON.AbstractMesh>[] = [];\r\n\r\n            let tempMeshDic: { [key: string]: Nullable<BABYLON.AbstractMesh> } = {};\r\n\r\n            let tempMeshID: { [key: string]: string } = {};\r\n\r\n            if (dataBabylon.meshes) {\r\n                dataBabylon.meshes.forEach((element: any) => {\r\n                    // 若当前scene数据中已包含mesh id，则重新创建resource_id\r\n                    if (BabylonLoader.scenesData.entities[element.id]) {\r\n                        let newID = GUID.create();\r\n                        let oldID = element.id;\r\n                        // element['babylon_id'] = oldID;\r\n                        tempMeshID[newID] = oldID;\r\n                        element.id = newID;\r\n                        // 遍历，更改parentID\r\n                        dataBabylon.meshes.forEach((element2: any) => {\r\n                            if (element2.parentId === oldID) {\r\n                                element2.parentId = newID;\r\n                                console.log('change parent id');\r\n                            }\r\n                        });\r\n                    } else {\r\n                        tempMeshID[element.id] = element.id;\r\n                        // element['babylon_id'] = element.id;\r\n                    }\r\n                    // console.error(element);\r\n                });\r\n\r\n                dataBabylon.meshes.forEach((element: any) => {\r\n                    let tempMesh = BabylonLoader.loadMesh(element, VR.BabylonEngine.Scene, '');\r\n                    newMeshes.push(tempMesh);\r\n                    tempMeshDic[element.id] = tempMesh;\r\n                });\r\n            }\r\n\r\n            // parent \r\n            // TODO: 若不为root，则mesh这里也要设定父子关系，parent为null则为当前选中物体\r\n            let parent = null;\r\n            let parentNode: Nullable<BABYLON.Node> = null;\r\n            if (editor.call('selector:type') === 'entity')\r\n                parent = editor.call('selector:items')[0];\r\n\r\n            if (!parent) {\r\n                parent = editor.call('entities:root');\r\n            } else {\r\n                // console.warn(parent);\r\n                // console.warn(parent.node);\r\n                if (parent.node) {\r\n                    parentNode = parent.node;\r\n                }\r\n            }\r\n\r\n\r\n            var entities: any[] = [];\r\n            var data: any[] = [];\r\n\r\n            // TODO: 还没有考虑有transformNode数据的情况\r\n            for (let index = 0, cache = newTransformNodes.length; index < cache; index++) {\r\n                var transformNode = newTransformNodes[index];\r\n                if (transformNode && transformNode._waitingParentId) {\r\n                    transformNode.parent = VR.BabylonEngine.Scene.getLastEntryByID(transformNode._waitingParentId);\r\n                    transformNode._waitingParentId = null;\r\n                }\r\n            }\r\n\r\n            for (let i = 0, len = newMeshes.length; i < len; i++) {\r\n                if (newMeshes[i] !== null) {\r\n                    if (newMeshes[i]!._waitingParentId) {\r\n                        if (tempMeshDic[newMeshes[i]!._waitingParentId!]) {\r\n                            newMeshes[i]!.parent = tempMeshDic[newMeshes[i]!._waitingParentId!];\r\n                        } else {\r\n                            newMeshes[i]!.parent = parentNode;\r\n                            parentMeshes.push(newMeshes[i]);\r\n                        }\r\n                    } else {\r\n                        newMeshes[i]!.parent = parentNode;\r\n                        parentMeshes.push(newMeshes[i]);\r\n                    }\r\n                    newMeshes[i]!._waitingParentId = null;\r\n                    // console.warn(newMeshes[i]);\r\n                }\r\n            }\r\n\r\n\r\n\r\n            for (let i = 0; i < parentMeshes.length; i++) {\r\n                BabylonLoader.meshParseRecursion(parentMeshes[i], assetID, tempMeshID, entities, data);\r\n            }\r\n\r\n            editor.call('selector:history', false);\r\n            editor.call('selector:set', 'entity', [editor.call('entities:get', parentMeshes[0]?.id)]);\r\n            editor.once('selector:change', function () {\r\n                editor.call('selector:history', true);\r\n            });\r\n\r\n            editor.call('make:scene:dirty');\r\n\r\n\r\n            // editor.emit('entities:load', true);\r\n\r\n\r\n            // TODO\r\n            // VeryEngine.viewScene.onPointerObservable.add(pointerInfo => {\r\n            //     switch (pointerInfo.type) {\r\n            //         case BABYLON.PointerEventTypes.POINTERDOWN:\r\n            //             // console.log('down');\r\n            //             if (pointerInfo!.pickInfo!.pickedMesh != null) {\r\n            //                 editor.call('pick', pointerInfo!.pickInfo!.pickedMesh);\r\n            //             } else {\r\n            //                 editor.call('pick', null);\r\n            //             }\r\n            //             // console.log(pointerInfo!.pickInfo!.pickedMesh);\r\n            //             break;\r\n            //     }\r\n            // });\r\n            // });\r\n        }\r\n    }\r\n\r\n    public static parseBabylon(assetID: string, babylonData: any): void {\r\n        if (babylonData) {\r\n            let parsedData: any = {};\r\n            // 材质\r\n            if (babylonData.materials) {\r\n                parsedData.materials = {};\r\n                babylonData.materials.forEach((material: any) => {\r\n                    parsedData.materials[material.id] = material;\r\n                });\r\n            }\r\n            // geometries\r\n            if (babylonData.geometries && babylonData.geometries.vertexData) {\r\n                parsedData.geometries = {};\r\n                babylonData.geometries.vertexData.forEach((geometry: any) => {\r\n                    parsedData.geometries[geometry.id] = geometry;\r\n                });\r\n            }\r\n            // mesh\r\n            if (babylonData.meshes) {\r\n                parsedData.meshes = {};\r\n                babylonData.meshes.forEach((mesh: any) => {\r\n                    parsedData.meshes[mesh.id] = mesh;\r\n                });\r\n            }\r\n            // transformNodes\r\n            if (babylonData.transformNodes) {\r\n                parsedData.transformNodes = {};\r\n                babylonData.transformNodes.forEach((transformNode: any) => {\r\n                    parsedData.transformNodes[transformNode.id] = transformNode;\r\n                });\r\n            }\r\n            BabylonLoader.babylonParsedData[assetID] = parsedData;\r\n        }\r\n    }\r\n\r\n    public static hasBabylobData(assetID: string): boolean {\r\n        return assetID in BabylonLoader.babylonCacheData;\r\n    }\r\n\r\n    public static getBabylonData(assetID: string): any {\r\n        if (assetID in BabylonLoader.babylonCacheData) {\r\n            return BabylonLoader.babylonCacheData[assetID];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public static hasParsedBabylonData(assetID: string): boolean {\r\n        return assetID in BabylonLoader.babylonParsedData;\r\n    }\r\n\r\n    public static getParsedBabylonData(assetID: string): any {\r\n        if (assetID in BabylonLoader.babylonParsedData) {\r\n            return BabylonLoader.babylonParsedData[assetID];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\n    private static meshParseRecursion(mesh: Nullable<BABYLON.AbstractMesh>, assetID: string, tempMeshID: any, entities: any[], data: any[]): void {\r\n        if (mesh) {\r\n\r\n            let parentID: string = '';\r\n            if (mesh.parent !== null) {\r\n                parentID = mesh.parent!.id;\r\n            } else {\r\n                let root = editor.call('entities:root');\r\n                parentID = root.get('resource_id');\r\n                // root.insert('children', mesh.id);\r\n                // BabylonLoader.updateSceneData(parentID, root._data2);\r\n                // editor.call('make:scene:dirty');\r\n            }\r\n\r\n            var childs = mesh.getChildren();\r\n            var myChildren = [];\r\n            for (let k = 0; k < childs.length; k++) {\r\n                myChildren.push(childs[k].id);\r\n            }\r\n\r\n            let eulerAngle = Tools.radianToEulerAngle(mesh.rotation);\r\n\r\n            let entityData = {\r\n                name: mesh.name,\r\n                resource_id: mesh.id,\r\n                babylon_id: tempMeshID[mesh.id],  // 原始的mesh id\r\n                asset_id: assetID,  // 对应babylon资源id\r\n                parent: parentID,\r\n                position: [mesh.position.x, mesh.position.y, mesh.position.z],\r\n                rotation: [eulerAngle.x, eulerAngle.y, eulerAngle.z],\r\n                scale: [mesh.scaling.x, mesh.scaling.y, mesh.scaling.z],\r\n                children: myChildren,\r\n                enabled: mesh.isEnabled(),\r\n                checkCollisions: mesh.checkCollisions,\r\n                pickable: mesh.isPickable,\r\n                isVisible: mesh.isVisible,\r\n                tags: [],\r\n                type: 'mesh'\r\n            }\r\n\r\n            let entity = editor.call('entities:new', entityData);\r\n            entities.push(entity);\r\n            data.push(entity.origin);\r\n\r\n            for (let k = 0; k < childs.length; k++) {\r\n                BabylonLoader.meshParseRecursion(<BABYLON.AbstractMesh>childs[k], assetID, tempMeshID, entities, data);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    public static addSceneData(resource_id: string, data: any): void {\r\n        BabylonLoader.scenesData.entities[resource_id] = data;\r\n        BabylonLoader.scenesData['modified'] = BabylonLoader.createdAtTime();\r\n    }\r\n\r\n    public static updateSceneData(resource_id: string, data: any): void {\r\n        BabylonLoader.scenesData.entities[resource_id] = data;\r\n        BabylonLoader.scenesData['modified'] = BabylonLoader.createdAtTime();\r\n    }\r\n\r\n    public static createdAtTime(): string {\r\n        var now = new Date();\r\n        var Y = now.getFullYear();\r\n        var m = BabylonLoader.getRealTime(now.getMonth() + 1);\r\n        var d = BabylonLoader.getRealTime(now.getDate());\r\n        var H = BabylonLoader.getRealTime(now.getHours());\r\n        var i = BabylonLoader.getRealTime(now.getMinutes());\r\n        // var s = getRealTime(now.getSeconds());\r\n        return Y + \"-\" + m + \"-\" + d + \" \" + H + \":\" + i;\r\n    }\r\n\r\n    private static getRealTime(str: number): string {\r\n        if (str < 10) {\r\n            return \"0\" + str;\r\n        }\r\n        return str.toString();\r\n    }\r\n\r\n\r\n    public static loadLight(parsedLight: any, scene: BABYLON.Scene): Nullable<BABYLON.Light> {\r\n        // Light\r\n        if (parsedLight !== undefined && parsedLight !== null) {\r\n            var light = BABYLON.Light.Parse(parsedLight, scene);\r\n            return light;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static loadReflectionProbe(parsedReflectionProbe: any, scene: BABYLON.Scene, rootUrl: string): Nullable<BABYLON.ReflectionProbe> {\r\n        // ReflectionProbe\r\n        if (parsedReflectionProbe !== undefined && parsedReflectionProbe !== null) {\r\n            var reflectionProbe = BABYLON.ReflectionProbe.Parse(parsedReflectionProbe, scene, rootUrl);\r\n            return reflectionProbe;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static loadAnimation(parsedAnimation: any): Nullable<BABYLON.Animation[]> {\r\n        // Animation\r\n        if (parsedAnimation !== undefined && parsedAnimation !== null) {\r\n            const internalClass = BABYLON._TypeStore.GetClass(\"BABYLON.Animation\");\r\n            if (internalClass) {\r\n                let animation = internalClass.Parse(parsedAnimation);\r\n                return animation;\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static loadMaterial(parsedMaterial: any, scene: BABYLON.Scene, rootUrl: string): Nullable<BABYLON.Material> {\r\n        // Material\r\n        if (parsedMaterial !== undefined && parsedMaterial !== null) {\r\n            var mat = BABYLON.Material.Parse(parsedMaterial, scene, rootUrl);\r\n            return mat;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static loadMultiMaterial(parsedMultiMaterial: any, scene: BABYLON.Scene): Nullable<BABYLON.MultiMaterial> {\r\n        // MultiMaterial\r\n        if (parsedMultiMaterial !== undefined && parsedMultiMaterial !== null) {\r\n            var mmat = BABYLON.MultiMaterial.ParseMultiMaterial(parsedMultiMaterial, scene);\r\n            return mmat;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static loadMorphTargetManager(managerData: any, scene: BABYLON.Scene): Nullable<BABYLON.MorphTargetManager> {\r\n        // MorphTargetManager\r\n        if (managerData !== undefined && managerData !== null) {\r\n            var morphTarget = BABYLON.MorphTargetManager.Parse(managerData, scene);\r\n            return morphTarget;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static loadSkeleton(parsedSkeleton: any, scene: BABYLON.Scene): Nullable<BABYLON.Skeleton> {\r\n        // Skeleton\r\n        if (parsedSkeleton !== undefined && parsedSkeleton !== null) {\r\n            var skeleton = BABYLON.Skeleton.Parse(parsedSkeleton, scene);\r\n            return skeleton;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static loadGeometry(vertexData: any, scene: BABYLON.Scene, rootUrl: string): Nullable<BABYLON.Geometry> {\r\n        // Geometry\r\n        if (vertexData !== undefined && vertexData !== null) {\r\n            var geometry = BABYLON.Geometry.Parse(vertexData, scene, rootUrl);\r\n            return geometry;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static loadTransformNode(parsedTransformNode: any, scene: BABYLON.Scene, rootUrl: string): Nullable<BABYLON.TransformNode> {\r\n        // TransformNode\r\n        if (parsedTransformNode !== undefined && parsedTransformNode !== null) {\r\n            var node = BABYLON.TransformNode.Parse(parsedTransformNode, scene, rootUrl);\r\n            return node;\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    public static loadMesh(parsedMesh: any, scene: BABYLON.Scene, rootUrl: string): Nullable<BABYLON.AbstractMesh> {\r\n        // Mesh\r\n        if (parsedMesh !== undefined && parsedMesh !== null) {\r\n            var mesh = <BABYLON.AbstractMesh>BABYLON.Mesh.Parse(parsedMesh, scene, rootUrl);\r\n            return mesh;\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    public static loadCamera(parsedCamera: any, scene: BABYLON.Scene): Nullable<BABYLON.Camera> {\r\n        // Camera\r\n        if (parsedCamera !== undefined && parsedCamera !== null) {\r\n            var camera = BABYLON.Camera.Parse(parsedCamera, scene);\r\n            return camera;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static loadAnimationGroup(parsedAnimationGroup: any, scene: BABYLON.Scene): Nullable<BABYLON.AnimationGroup> {\r\n        // AnimationGroup\r\n        if (parsedAnimationGroup !== undefined && parsedAnimationGroup !== null) {\r\n            var animationGroup = BABYLON.AnimationGroup.Parse(parsedAnimationGroup, scene);\r\n            return animationGroup;\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    public static setBabylonParent(scene: BABYLON.Scene): void {\r\n        let index, cache = 0;\r\n        // Browsing all the graph to connect the dots\r\n        for (let index = 0, cache = scene.cameras.length; index < cache; index++) {\r\n            var camera = scene.cameras[index];\r\n            if (camera._waitingParentId) {\r\n                camera.parent = scene.getLastEntryByID(camera._waitingParentId);\r\n                camera._waitingParentId = null;\r\n            }\r\n        }\r\n\r\n        for (index = 0, cache = scene.lights.length; index < cache; index++) {\r\n            let light = scene.lights[index];\r\n            if (light && light._waitingParentId) {\r\n                light.parent = scene.getLastEntryByID(light._waitingParentId);\r\n                light._waitingParentId = null;\r\n            }\r\n        }\r\n\r\n        //加载完所有资源以后，设立父子关系，加入在自己的引擎中，这些关系有scene数据确立，可以取消此处的操作\r\n        // Connect parents & children and parse actions\r\n        for (index = 0, cache = scene.transformNodes.length; index < cache; index++) {\r\n            var transformNode = scene.transformNodes[index];\r\n            if (transformNode._waitingParentId) {\r\n                transformNode.parent = scene.getLastEntryByID(transformNode._waitingParentId);\r\n                transformNode._waitingParentId = null;\r\n            }\r\n        }\r\n        for (index = 0, cache = scene.meshes.length; index < cache; index++) {\r\n            var mesh = scene.meshes[index];\r\n            if (mesh._waitingParentId) {\r\n                mesh.parent = scene.getLastEntryByID(mesh._waitingParentId);\r\n                mesh._waitingParentId = null;\r\n            }\r\n        }\r\n\r\n        // freeze world matrix application\r\n        // 此部分为babylon隐藏方法\r\n        // for (index = 0, cache = scene.meshes.length; index < cache; index++) {\r\n        //     var currentMesh = scene.meshes[index];\r\n        //     if (currentMesh._waitingFreezeWorldMatrix) {\r\n        //         currentMesh.freezeWorldMatrix();\r\n        //         currentMesh._waitingFreezeWorldMatrix = null;\r\n        //     } else {\r\n        //         currentMesh.computeWorldMatrix(true);\r\n        //     }\r\n        // }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\n","export class Config {\r\n\r\n    public static prefix: string = '/assets/';\r\n\r\n\r\n    public static projectID: string = '';\r\n    public static projectName: string = '';\r\n    public static projectData: any = {};\r\n\r\n    public static userID: string = '';\r\n    public static username: string = '';\r\n\r\n    public static assetsData: any = {};\r\n    \r\n    public static scenesData: any = {};\r\n    public static sceneIndex: number = 0;\r\n\r\n\r\n    public static tableAssetsID: string = '';\r\n    public static tableName: string = '';\r\n    public static tableData: any = null;\r\n\r\n\r\n    public constructor() {\r\n\r\n    }\r\n\r\n}","///// <reference path=\"./dts/babylon.d.ts\"/>\r\n\r\nimport { Config } from \"./config\";\r\nimport { Loader } from \"./loader\";\r\n\r\n// import { VE_Objects, VE_Manager } from \"../veryengine/veryEngine\";\r\n\r\n// import { BabylonEngine, Time } from \"../veryengine/babylon\";\r\n\r\nexport class Game {\r\n    private _canvas: HTMLCanvasElement;\r\n    private _fps: HTMLElement;\r\n    private _table!: HTMLElement;\r\n    private _showFps: boolean = true;\r\n    private _engine!: BABYLON.Engine;\r\n    private _scene!: BABYLON.Scene;\r\n    // private _camera!: BABYLON.FreeCamera;\r\n\r\n    constructor(canvasElement: HTMLCanvasElement, fps: HTMLElement) {\r\n        new Loader();\r\n        this._canvas = canvasElement;\r\n        VR.BabylonEngine.Canvas = this._canvas;\r\n        this._fps = fps;\r\n        // this._engine = new BABYLON.Engine(this._canvas, true);\r\n        this._table = document.getElementById(\"VeryTable\")!;\r\n    }\r\n\r\n    /**\r\n     * 创建场景，并且启动\r\n     */\r\n    createScene(datas: any): Game {\r\n\r\n        // 假设有运行中的engine，先停止，重新初始化\r\n        if (this._engine) {\r\n            // TODO: 对象中相关数据dispose\r\n            VR.VE_Manager.dispose();\r\n            // console.log(VE_Manager.projects.projects);\r\n            this._engine.dispose();\r\n        }\r\n        this._engine = new BABYLON.Engine(this._canvas, true);\r\n        VR.BabylonEngine.Engine = this._engine;\r\n        // Resize\r\n        let engine = this._engine;\r\n        window.addEventListener(\"resize\", function () {\r\n            engine.resize();\r\n        });\r\n\r\n        this._scene = new BABYLON.Scene(this._engine);\r\n        VR.BabylonEngine.Scene = this._scene;\r\n        VR.Time.start();\r\n\r\n        this._scene.clearColor = new BABYLON.Color4(116 / 255, 116 / 255, 116 / 255, 1);\r\n\r\n        // TODO: 设定相机\r\n        var camera = new BABYLON.ArcRotateCamera('Default', 100, 50, 50, new BABYLON.Vector3(0, 0, 0), this._scene);\r\n        camera.setPosition(new BABYLON.Vector3(0, 1, -20));\r\n        camera.attachControl(this._canvas, true);\r\n\r\n        // let inputMap: { [key: string]: boolean } = {};\r\n\r\n        // TODO: 加载过度动画开\r\n        // engine.hideLoadingUI();\r\n\r\n        engine.displayLoadingUI();\r\n\r\n        // 加载资源\r\n        // console.warn(Config.scenesData);\r\n        editor.call('scene:raw', Config.scenesData);\r\n\r\n        // 运行编译器\r\n        this.startVeryEngine(this._scene, datas);\r\n\r\n\r\n        engine.hideLoadingUI();\r\n\r\n        // 发布版编辑器\r\n        this._scene.onKeyboardObservable.add(kbInfo => {\r\n            if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n                if (kbInfo.event.keyCode === 81 && kbInfo.event.ctrlKey && kbInfo.event.altKey) { //Ctrl + Q\r\n                    console.log('Ctrl + Alt + Q');\r\n                    this.toggleDebug();\r\n                }\r\n            }\r\n        });\r\n\r\n        this._engine.runRenderLoop(() => {\r\n            // if (this._canvas.width !== this._canvas.clientWidth) {\r\n            //     this._engine.resize();\r\n            // }\r\n\r\n            if (this._scene) {\r\n                if (this._scene.activeCamera) {\r\n                    this._scene.render();\r\n                }\r\n            }\r\n\r\n            // if (this._showFps) {\r\n            // \tthis.updateFpsPos();\r\n            // }\r\n\r\n\r\n        });\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n    startVeryEngine(scene: BABYLON.Scene, datas: any): void {\r\n        let entrance: VR.VeryEngine = new VR.VeryEngine();\r\n        let projectName = \"测试项目\";\r\n        console.log(datas);\r\n        // console.log(`空行数：${hot1.countEmptyRows()}`);\r\n        try {\r\n            entrance.init(datas, projectName);\r\n        } catch (e) { // TODO: 可能会影响效率\r\n            console.error(e);\r\n        }\r\n\r\n        let objects: VR.VE_Objects = VR.VE_Manager.objects(projectName);\r\n        // 全局渲染帧循环\r\n        scene.onBeforeRenderObservable.add(() => {\r\n            // 添加帧函数\r\n            // VR.Time._sum();\r\n\r\n            // 触发响应循环\r\n            for (let i: number = 0; i < objects.count; i++) {\r\n                let objectID: string = objects.getObjectID(i);\r\n                objects.getVeryObject(objectID).update();\r\n            }\r\n\r\n        });\r\n\r\n        scene.onKeyboardObservable.add(kbInfo => {\r\n            if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n                console.log(kbInfo.event.key);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 启动渲染循环；\r\n     */\r\n    animate(): Game {\r\n        this._engine.runRenderLoop(() => {\r\n            // if (this._canvas.width !== this._canvas.clientWidth) {\r\n            //     this._engine.resize();\r\n            // }\r\n\r\n            if (this._scene) {\r\n                this._scene.render();\r\n            }\r\n\r\n            if (this._showFps) {\r\n                this.updateFpsPos();\r\n            }\r\n\r\n\r\n        });\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 属性编辑器UI界面控制；\r\n     */\r\n    toggleDebug(): Game {\r\n        if (this._engine) {\r\n            // Always showing the debug layer, because you can close it by itself\r\n            var scene = this._engine.scenes[0];\r\n            if (scene.debugLayer.isVisible()) {\r\n                scene.debugLayer.hide();\r\n            }\r\n            else {\r\n                // 此处修改了babylon.d.ts文件\r\n                scene.debugLayer.show({ embedMode: true });\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 更新fps显示及显示位置\r\n     */\r\n    updateFpsPos(): void {\r\n        if (this._fps) {\r\n            // this._fps.style.right = document.body.clientWidth - (this._table.clientWidth + this._canvas.clientWidth) + \"px\";\r\n\r\n            this._fps.innerHTML = this._engine.getFps().toFixed() + \" fps\";\r\n        }\r\n    }\r\n}\r\n","export * from './game';\r\nexport * from './scenes';\r\nexport * from './config';\r\nexport * from './loader';\r\nexport * from './babylonloader';","import { Ajax, AjaxRequest, Observer, Tools } from \"../lib\";\r\nimport { BabylonLoader } from \"./babylonloader\";\r\n\r\nexport class Loader {\r\n\r\n\r\n    public constructor() {\r\n\r\n        editor.method('initAssets', (assets_data: any) => {\r\n            if (assets_data.assets)\r\n                onLoad(assets_data.assets);\r\n        });\r\n\r\n        // 加载assets数据，data为assets数据\r\n        var onLoad = function (data: any) {\r\n            editor.call('assets:progress', 0.5);\r\n\r\n            var count = 0;\r\n            let assetsLength: number = Object.getOwnPropertyNames(data).length;\r\n            // 加载Asset资源\r\n            var load = function (asset_data: any) {\r\n                editor.call('loadAsset', asset_data, function () {\r\n                    count++;\r\n                    editor.call('assets:progress', (count / assetsLength) * 0.5 + 0.5);\r\n                    if (count >= assetsLength) {\r\n                        editor.call('assets:progress', 1);\r\n                        editor.emit('assets:load');\r\n                    }\r\n                });\r\n            };\r\n\r\n            for (let key in data) {\r\n                load(data[key]);\r\n            }\r\n\r\n        };\r\n\r\n\r\n        editor.method('scene:raw', function (data: any) {\r\n            // editor.call('selector:clear');\r\n            // editor.call('entities:clear');\r\n            // editor.call('attributes:clear');\r\n\r\n            // console.log(data);\r\n            // console.log(data.entities);\r\n\r\n            // var total = Object.keys(data.entities).length;\r\n            // var i = 0;\r\n\r\n            // list\r\n            for (var key in data.entities) {\r\n                let entity = new Observer(data.entities[key]);\r\n                // editor.call('entities:add', entity);\r\n                // p.progress = (++i / total) * 0.8 + 0.1;\r\n                // console.warn(entity);\r\n                if (!data.entities[key].root) {\r\n\r\n                    editor.call('create:scene:element', entity);\r\n                }\r\n            }\r\n\r\n            // p.progress = 1;\r\n\r\n            // loadedEntities = true;\r\n            editor.emit('entities:load');\r\n        });\r\n\r\n\r\n        var childIndex: { [key: string]: any } = {};\r\n        var entitiesIndex: { [key: string]: any } = {};\r\n        editor.method('create:scene:element', (entity: Observer) => {\r\n            // console.log('create scene element');\r\n            // console.error(entity);\r\n            if (entity.get('type') === 'light') {\r\n                // Lights\r\n                var light = BABYLON.Light.Parse(entity.get('data'), VR.BabylonEngine.Scene);\r\n                if (light) {\r\n                    entitiesIndex[entity.get('resource_id')] = light;\r\n                    entity.node = light;\r\n                    light.id = entity.get('resource_id');\r\n                    childAndParent(entity, light);\r\n                    // (<BABYLON.ShadowLight>light)\r\n                    // console.warn(light);\r\n                } else {\r\n                    console.error('light创建失败，light原始信息：');\r\n                    console.error(entity.get('data'));\r\n                }\r\n            } else if (entity.get('type') === 'camera') {\r\n                // TODO: camera要特别处理\r\n                // Cameras\r\n                // var camera = BABYLON.Camera.Parse(entity.get('data'), VeryEngine.viewScene);\r\n                // camera.attachControl(VeryEngine.viewCanvasElement);\r\n                // entity.node = camera;\r\n                // entitiesIndex[entity.get('resource_id')] = camera;\r\n                // camera!.id = entity.get('resource_id');\r\n                // childAndParent(entity, camera);\r\n                // console.warn(camera);\r\n            } else if (entity.get('type') === 'box') {\r\n                // box\r\n                var box = BABYLON.Mesh.CreateBox(entity.get('name'), 1, VR.BabylonEngine.Scene);\r\n                entity.node = box;\r\n                entitiesIndex[entity.get('resource_id')] = box;\r\n                box.id = entity.get('resource_id');\r\n                box.position = BABYLON.Vector3.FromArray(entity.get('position'));\r\n                box.rotation = Tools.eulerAngleToRadian(BABYLON.Vector3.FromArray(entity.get('rotation')));\r\n                box.scaling = BABYLON.Vector3.FromArray(entity.get('scale'));\r\n                box.isEnabled(entity.get('enabled'));\r\n                box.isPickable = entity.get('pickable');\r\n                box.checkCollisions = entity.get('checkCollisions');\r\n                box.isVisible = entity.get('isVisible');\r\n                // 加载自定义关联材质\r\n                if (entity.get('material_id')) {\r\n\r\n                }\r\n                childAndParent(entity, box);\r\n                // console.warn(box);\r\n            } else if (entity.get('type') === 'mesh') {\r\n                // 模型异步加载，因为mesh需要先加载.babylon文件；\r\n                // console.warn('scene创建mesh：' + entity.get('name'));\r\n                editor.call('scene:mesh:create', entity);\r\n            }\r\n        });\r\n\r\n        let childAndParent = (entity: Observer, node: Nullable<BABYLON.Node>) => {\r\n            // children\r\n            let children = entity.get('children');\r\n            for (var i = 0; i < children.length; i++) {\r\n                childIndex[children[i]] = {\r\n                    index: i,\r\n                    parent: node\r\n                };\r\n\r\n                if (entitiesIndex[children[i]]) {\r\n                    insertChild(node, entitiesIndex[children[i]], i);\r\n                }\r\n            }\r\n\r\n            // parenting\r\n            if (!entity.get('parent')) {\r\n                // babylon root\r\n            } else {\r\n                // child\r\n                var details = childIndex[entity.get('resource_id')];\r\n                if (details && details.parent) {\r\n                    insertChild(details.parent, node, details.index);\r\n                }\r\n            }\r\n        }\r\n\r\n        let insertChild = (parent: Nullable<BABYLON.Node>, node: Nullable<BABYLON.Node>, index: number) => {\r\n            if (node !== null) {\r\n                node.parent = parent;\r\n            }\r\n        }\r\n\r\n        editor.method('scene:mesh:create', (entity: Observer) => {\r\n            loadBabylon(entity);\r\n        });\r\n\r\n        let loadingBabylonFlag: { [key: string]: boolean } = {};\r\n        let toLoadEntity: { [key: string]: Observer[] } = {};\r\n        let loadBabylon = (entity: Observer) => {\r\n            let assetID: string = entity.get('asset_id');\r\n            let dataBabylon: any = null;\r\n\r\n            if (BabylonLoader.hasBabylobData(assetID)) {\r\n                dataBabylon = BabylonLoader.getParsedBabylonData(assetID);\r\n                // BabylonLoader.assembleBabylon(assetID, dataBabylon);\r\n                // 关联mesh\r\n                assembleSceneMesh(entity, dataBabylon);\r\n            } else {\r\n                if (assetID in loadingBabylonFlag) {\r\n                    toLoadEntity[assetID].push(entity);\r\n                } else {\r\n                    loadingBabylonFlag[assetID] = true;\r\n                    toLoadEntity[assetID] = [entity];\r\n                    // console.warn(BabylonLoader.assetsData);\r\n                    var data1 = {\r\n                        url: BabylonLoader.prefix + assetID + '/' + BabylonLoader.assetsData.assets[assetID].name,\r\n                        method: 'GET',\r\n                        // auth: true,\r\n                        data: null,\r\n                        ignoreContentType: true,\r\n                        // headers: {\r\n                        //     Accept: 'application/json'\r\n                        // }\r\n                    };\r\n                    // 直接返回babylon json格式内容数据\r\n                    (<AjaxRequest>new Ajax(data1))\r\n                        .on('load', (status: any, data: any) => {\r\n\r\n                            dataBabylon = data;\r\n                            BabylonLoader.babylonCacheData[assetID] = dataBabylon;\r\n                            BabylonLoader.parseBabylon(assetID, data);\r\n                            BabylonLoader.parseBabylon(assetID, data);\r\n                            dataBabylon = BabylonLoader.getParsedBabylonData(assetID);\r\n                            toLoadEntity[assetID].forEach((item: Observer) => {\r\n                                assembleSceneMesh(item, dataBabylon);\r\n                            });\r\n                            // 关联mesh\r\n                        }).on('error', (evt: any) => {\r\n                            console.error('scene数据匹配babylon mesh数据错误！');\r\n                            console.error(evt);\r\n                        });;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        let assembleSceneMesh = (entity: Observer, parsedBabylon: any) => {\r\n            // TODO: 暂时未考虑TransformNode数据的情况\r\n            if (parsedBabylon) {\r\n                let assetID: string = entity.get('asset_id');\r\n                // 先从.babylon提取原始mesh数据\r\n                let meshID: string = entity.get('babylon_id');\r\n                if (parsedBabylon.meshes[meshID]) {\r\n                    let meshData = parsedBabylon.meshes[meshID];\r\n                    // 结合scene和babylon数据，更新mesh信息\r\n                    meshData.position = entity.has('position') && entity.get('position') ? entity.get('position') : meshData.position;\r\n                    let recordRotation = entity.get('rotation');\r\n                    if (recordRotation && recordRotation.length > 0) {\r\n                        recordRotation = Tools.vector3ToArray(Tools.eulerAngleToRadian(BABYLON.Vector3.FromArray(recordRotation)));\r\n                    } else {\r\n                        recordRotation = meshData.rotation;\r\n                    }\r\n                    meshData.rotation = recordRotation;\r\n                    meshData.scale = entity.has('scale') && entity.get('scale') ? entity.get('scale') : meshData.scal;\r\n                    meshData.name = entity.has('name') && entity.get('name') ? entity.get('name') : meshData.name;\r\n                    meshData.id = entity.has('resource_id') && entity.get('resource_id') ? entity.get('resource_id') : meshData.id;\r\n                    meshData.isEnabled = entity.has('enabled') ? entity.get('enabled') : meshData.isEnabled;\r\n                    meshData.isVisible = entity.has('isVisible') ? entity.get('isVisible') : meshData.isVisible;\r\n                    // TODO：发布状态下，听数据的\r\n                    meshData.pickable = entity.has('pickable') ? entity.get('pickable') : meshData.pickable;\r\n                    // TODO：scene编辑条件下默认就是加载状态；\r\n                    // meshData.pickable = true;\r\n                    meshData.checkCollisions = entity.has('checkCollisions') ? entity.get('checkCollisions') : meshData.checkCollisions;\r\n                    meshData.materialId = entity.has('material_id') ? entity.get('material_id') : meshData.materialId;\r\n                    // 要注意是否为root id\r\n                    meshData.parentId = entity.has('parent') ? entity.get('parent') : meshData.parentId;\r\n\r\n\r\n                    // 判断是否关联了geometry\r\n                    if (meshData.geometryId) {\r\n                        if (VR.BabylonEngine.Scene.getGeometryByID(meshData.geometryId) === null) {\r\n                            if (parsedBabylon.geometries && parsedBabylon.geometries[meshData.geometryId]) {\r\n                                let vertexData = parsedBabylon.geometries[meshData.geometryId];\r\n                                BabylonLoader.loadGeometry(vertexData, VR.BabylonEngine.Scene, '');\r\n                            }\r\n                        }\r\n                    }\r\n                    // 组装material\r\n                    // console.error(meshData.materialId);\r\n                    if (meshData.materialId) {\r\n                        if (VR.BabylonEngine.Scene.getMaterialByID(meshData.materialId) === null) {\r\n                            // console.error(BabylonLoader.assetsData.babylon[assetID]);\r\n                            if (BabylonLoader.assetsData.babylon[assetID]) {\r\n                                let mats = BabylonLoader.assetsData.babylon[assetID]['materials'];\r\n                                if (mats && mats[meshData.materialId]) {\r\n                                    let matAssetID = mats[meshData.materialId].asset_id;\r\n                                    if (BabylonLoader.assetsData.assets[matAssetID]) {\r\n                                        let newMat = BabylonLoader.assetsData.assets[matAssetID].data;\r\n\r\n                                        // 检测texture\r\n                                        if (newMat.diffuseTexture && newMat.diffuseTexture.texture_id) {\r\n                                            newMat.diffuseTexture.name = BabylonLoader.prefix + newMat.diffuseTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.diffuseTexture.texture_id].name;\r\n                                            // console.warn(newMat.diffuseTexture.name);\r\n                                        }\r\n                                        if (newMat.specularTexture && newMat.specularTexture.texture_id) {\r\n                                            newMat.specularTexture.name = BabylonLoader.prefix + newMat.specularTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.specularTexture.texture_id].name;\r\n                                        }\r\n                                        if (newMat.reflectionTexture && newMat.reflectionTexture.texture_id) {\r\n                                            newMat.reflectionTexture.name = BabylonLoader.prefix + newMat.reflectionTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.reflectionTexture.texture_id].name;\r\n                                        }\r\n                                        if (newMat.refractionTexture && newMat.refractionTexture.texture_id) {\r\n                                            newMat.refractionTexture.name = BabylonLoader.prefix + newMat.refractionTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.refractionTexture.texture_id].name;\r\n                                        }\r\n                                        if (newMat.emissiveTexture && newMat.emissiveTexture.texture_id) {\r\n                                            newMat.emissiveTexture.name = BabylonLoader.prefix + newMat.emissiveTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.emissiveTexture.texture_id].name;\r\n                                        }\r\n                                        if (newMat.bumpTexture && newMat.bumpTexture.texture_id) {\r\n                                            newMat.bumpTexture.name = BabylonLoader.prefix + newMat.bumpTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.bumpTexture.texture_id].name;\r\n                                        }\r\n                                        if (newMat.opacityTexture && newMat.opacityTexture.texture_id) {\r\n                                            newMat.opacityTexture.name = BabylonLoader.prefix + newMat.opacityTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.opacityTexture.texture_id].name;\r\n                                        }\r\n                                        if (newMat.ambientTexture && newMat.ambientTexture.texture_id) {\r\n                                            newMat.ambientTexture.name = BabylonLoader.prefix + newMat.ambientTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.ambientTexture.texture_id].name;\r\n                                        }\r\n                                        if (newMat.lightmapTexture && newMat.lightmapTexture.texture_id) {\r\n                                            newMat.lightmapTexture.name = BabylonLoader.prefix + newMat.lightmapTexture.texture_id + '/' + BabylonLoader.assetsData.assets[newMat.lightmapTexture.texture_id].name;\r\n                                        }\r\n                                        // console.error(newMat);\r\n                                        BabylonLoader.loadMaterial(newMat, VR.BabylonEngine.Scene, '');\r\n                                    } else {\r\n                                        console.warn('scene mesh warn');\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                console.warn('scene mesh warn');\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // 加载mesh\r\n                    let mesh = BabylonLoader.loadMesh(meshData, VR.BabylonEngine.Scene, '');\r\n                    entity.node = mesh;\r\n                    entitiesIndex[entity.get('resource_id')] = mesh;\r\n                    childAndParent(entity, mesh);\r\n                } else {\r\n                    console.warn('scene mesh warn');\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n}","export class Scenes {\r\n\r\n\r\n\r\n  public constructor() {\r\n    // connect to server\r\n    // load project data\r\n    // analysis data\r\n    // load original model\r\n    // load scene object from original model\r\n    \r\n  }\r\n\r\n\r\n\r\n\r\n}","export * from './lib';\r\nexport * from './game';","import { Events } from \"../lib\";\r\n\r\nexport class Ajax {\r\n\r\n    public constructor(args: object | string) {\r\n        if (typeof (args) === 'string')\r\n            args = { url: args };\r\n\r\n        return new AjaxRequest(args);\r\n    }\r\n\r\n    public static get(url: string): AjaxRequest {\r\n        return new AjaxRequest({ url: url });\r\n    }\r\n\r\n    public static post(url: string, data: any): AjaxRequest {\r\n        return new AjaxRequest({\r\n            method: 'POST',\r\n            url: url,\r\n            data: data\r\n        });\r\n    }\r\n\r\n    public static put(url: string, data: any): AjaxRequest {\r\n        return new AjaxRequest({\r\n            method: 'PUT',\r\n            url: url,\r\n            data: data\r\n        });\r\n    }\r\n\r\n    public static delete(url: string): AjaxRequest {\r\n        return new AjaxRequest({\r\n            method: 'DELETE',\r\n            url: url\r\n        });\r\n    }\r\n\r\n    public static params: { [key: string]: any } = {};\r\n\r\n    public static param(name: string, value: any): void {\r\n        Ajax.params[name] = value;\r\n    }\r\n\r\n}\r\n\r\n\r\nexport class AjaxRequest extends Events {\r\n\r\n    private _progress: number = 0;\r\n\r\n    private _xhr: XMLHttpRequest;\r\n\r\n    public notJson: boolean;\r\n\r\n    public constructor(args: any) {\r\n        super();\r\n\r\n        if (!args) {\r\n            throw new Error('ajax请求无参数，请检查！')\r\n        }\r\n\r\n        this._progress = 0.0;\r\n        this.emit('progress', this._progress);\r\n\r\n        this._xhr = new XMLHttpRequest();\r\n\r\n        // send cookies\r\n        if (args.cookies)\r\n            this._xhr.withCredentials = true;\r\n\r\n        // events\r\n        this._xhr.addEventListener('load', this._onLoad.bind(this), false);\r\n        // this._xhr.addEventListener('progress', this._onProgress.bind(this), false);\r\n        this._xhr.upload.addEventListener('progress', this._onProgress.bind(this), false);\r\n        this._xhr.addEventListener('error', this._onError.bind(this), false);\r\n        this._xhr.addEventListener('abort', this._onAbort.bind(this), false);\r\n\r\n        // url\r\n        let url: string = args.url;\r\n\r\n        // query\r\n        if (args.query && Object.keys(args.query).length) {\r\n            if (url.indexOf('?') === -1) {\r\n                url += '?';\r\n            }\r\n\r\n            var query = [];\r\n            for (var key in args.query) {\r\n                query.push(key + '=' + args.query[key]);\r\n            }\r\n\r\n            url += query.join('&');\r\n        }\r\n\r\n        // templating\r\n        var parts = url.split('{{');\r\n        if (parts.length > 1) {\r\n            for (var i = 1; i < parts.length; i++) {\r\n                var ends = parts[i].indexOf('}}');\r\n                var key = parts[i].slice(0, ends);\r\n\r\n                if (Ajax.params[key] === undefined)\r\n                    continue;\r\n\r\n                // replace\r\n                parts[i] = Ajax.params[key] + parts[i].slice(ends + 2);\r\n            }\r\n\r\n            url = parts.join('');\r\n        }\r\n\r\n        // open request\r\n        this._xhr.open(args.method || 'GET', url, true);\r\n\r\n        // 返回数据是否为json格式\r\n        this.notJson = args.notJson || false;\r\n\r\n        // header for PUT/POST\r\n        if (!args.ignoreContentType && (args.method === 'PUT' || args.method === 'POST' || args.method === 'DELETE'))\r\n            this._xhr.setRequestHeader('Content-Type', 'application/json');\r\n\r\n        // TODO: 权限header参数\r\n        // if (args.auth && config.accessToken) {\r\n        //     this._xhr.setRequestHeader('Authorization', 'Bearer ' + config.accessToken);\r\n        // }\r\n\r\n        if (args.headers) {\r\n            for (var key in args.headers)\r\n                this._xhr.setRequestHeader(key, args.headers[key]);\r\n        }\r\n\r\n        // stringify data if needed\r\n        if (args.data && typeof (args.data) !== 'string' && !(args.data instanceof FormData)) {\r\n            args.data = JSON.stringify(args.data);\r\n        }\r\n\r\n        // make request\r\n        this._xhr.send(args.data || null);\r\n    }\r\n\r\n    private _onLoad(): void {\r\n        this._progress = 1.0;\r\n        this.emit('progress', 1.0);\r\n\r\n        if (this._xhr.status === 200 || this._xhr.status === 201) {\r\n            if (this.notJson) {\r\n                this.emit('load', this._xhr.status, this._xhr.responseText);\r\n            } else {\r\n                try {\r\n                    var json = JSON.parse(this._xhr.responseText);\r\n                } catch (ex) {\r\n                    this.emit('error', this._xhr.status || 0, new Error('invalid json'));\r\n                    return;\r\n                }\r\n                this.emit('load', this._xhr.status, json);\r\n            }\r\n        } else {\r\n            try {\r\n                var json = JSON.parse(this._xhr.responseText);\r\n                var msg = json.message;\r\n                if (!msg) {\r\n                    msg = json.error || (json.response && json.response.error);\r\n                }\r\n\r\n                if (!msg) {\r\n                    msg = this._xhr.responseText;\r\n                }\r\n\r\n                this.emit('error', this._xhr.status, msg);\r\n            } catch (ex) {\r\n                this.emit('error', this._xhr.status);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _onError(evt: any): void {\r\n        this.emit('error', 0, evt);\r\n    }\r\n\r\n    private _onAbort(evt: any): void {\r\n        this.emit('error', 0, evt);\r\n    }\r\n\r\n    private _onProgress(evt: any): void {\r\n        if (!evt.lengthComputable)\r\n            return;\r\n\r\n        var progress = evt.loaded / evt.total;\r\n\r\n        if (progress !== this._progress) {\r\n            this._progress = progress;\r\n            this.emit('progress', this._progress);\r\n        }\r\n    }\r\n\r\n    public abort(): void {\r\n        this._xhr.abort();\r\n    }\r\n\r\n\r\n}","import { Events } from \"./events\";\r\n\r\nexport class Editor extends Events {\r\n\r\n  // 相较于Events，同一个函数名只可代表一个函数；\r\n\r\n  // 某个name对应的某个事件，name与Function是1对1的关系；\r\n  private _hooks: { [key: string]: Function } = {};\r\n\r\n  public constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * 添加全局函数，函数名与函数本体一一对应，不能重名；\r\n   * @param name 函数名；\r\n   * @param fn 函数本体；\r\n   */\r\n  public method(name: string, fn: Function): void {\r\n    if (this._hooks[name] !== undefined) {\r\n      throw new Error(\"can't override hook: \" + name);\r\n    }\r\n    this._hooks[name] = fn;\r\n  };\r\n\r\n  /**\r\n   * 移除某个函数；\r\n   * @param name 函数名；\r\n   */\r\n  public methodRemove(name: string): void {\r\n    delete this._hooks[name];\r\n  };\r\n\r\n  /**\r\n   * 执行某个函数；\r\n   * @param name 函数名；\r\n   */\r\n  public call(name: string, ...args: any[]): any {\r\n    if (this._hooks[name]) {\r\n      var args = Array.prototype.slice.call(arguments, 1);\r\n\r\n      try {\r\n        return this._hooks[name].apply(null, args);\r\n      } catch (ex) {\r\n        console.error(\r\n          \"%c%s %c(editor.method error)\",\r\n          \"color: #06f\",\r\n          name,\r\n          \"color: #f00\"\r\n        );\r\n        console.error(ex.stack);\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n}","export class Events {\r\n\r\n    // 相较于Editor，同一个函数名可包含一系列函数，不仅仅是一个，且有once功能；\r\n  \r\n    public get suspendEvents(): boolean {\r\n      return this._suspendEvents;\r\n    }\r\n    public set suspendEvents(val: boolean) {\r\n      this._suspendEvents = val;\r\n    }\r\n    private _suspendEvents: boolean = false;\r\n  \r\n    // 某个name对应的事件数组，name与Function是1对多的关系；\r\n    private _events: { [key: string]: Function[] } = {};\r\n  \r\n    public constructor() {\r\n  \r\n    }\r\n  \r\n    /**\r\n     * 添加事件数组，若name相同，则在数组末尾继续添加；\r\n     * @param name 函数名；\r\n     * @param fn 函数本体；\r\n     */\r\n    public on(name: string, fn: Function): EventHandle {\r\n      let events: Function[] = this._events[name];\r\n      if (events === undefined) {\r\n        this._events[name] = [fn];\r\n      } else {\r\n        if (events.indexOf(fn) == -1) {\r\n          events.push(fn);\r\n        }\r\n      }\r\n      return new EventHandle(this, name, fn);\r\n    }\r\n  \r\n    /**\r\n     * emit后只执行一次；\r\n     * @param name 函数名；\r\n     * @param fn 函数本体；\r\n     */\r\n    public once(name: string, fn: Function): EventHandle {\r\n      let self = this;\r\n      let evt: EventHandle = this.on(name, function (\r\n        arg0: any,\r\n        arg1: any,\r\n        arg2: any,\r\n        arg3: any,\r\n        arg4: any,\r\n        arg5: any,\r\n        arg6: any,\r\n        arg7: any\r\n      ) {\r\n        fn.call(self, arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7);\r\n        evt.unbind();\r\n      });\r\n      return evt;\r\n    }\r\n  \r\n    /**\r\n     * 执行事件；\r\n     * @param name 函数名；\r\n     * @param arg0 函数参数1，可选；\r\n     * @param arg1 函数参数2，可选；\r\n     * @param arg2 函数参数3，可选；\r\n     * @param arg3 函数参数4，可选；\r\n     * @param arg4 函数参数5，可选；\r\n     * @param arg5 函数参数6，可选；\r\n     * @param arg6 函数参数7，可选；\r\n     * @param arg7 函数参数8，可选；\r\n     */\r\n    public emit(name: string,\r\n      arg0?: any,\r\n      arg1?: any,\r\n      arg2?: any,\r\n      arg3?: any,\r\n      arg4?: any,\r\n      arg5?: any,\r\n      arg6?: any,\r\n      arg7?: any\r\n    ): Events {\r\n      if (this._suspendEvents) return this;\r\n  \r\n      let events: Function[] = this._events[name];\r\n      if (!events) return this;\r\n  \r\n      // 返回新数组\r\n      events = events.slice(0);\r\n  \r\n      for (let i: number = 0; i < events.length; i++) {\r\n        if (!events[i]) continue;\r\n        try {\r\n          events[i].call(this, arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7);\r\n        } catch (ex) {\r\n          console.info(\"%c%s %c(event error)\", \"color: #06f\", name, \"color: #f00\");\r\n          console.log(ex.stack);\r\n        }\r\n      }\r\n  \r\n      return this;\r\n    };\r\n  \r\n    /**\r\n     * 取消Events事件绑定，若name为空，则清空events；\r\n     * @param name 函数名；\r\n     * @param fn 函数本体；\r\n     */\r\n    public unbind(name?: string, fn?: Function): Events {\r\n      if (name) {\r\n        let events: Function[] = this._events[name];\r\n        if (!events) return this;\r\n  \r\n        if (fn) {\r\n          let i: number = events.indexOf(fn);\r\n          if (i !== -1) {\r\n            if (events.length === 1) {\r\n              delete this._events[name];\r\n            } else {\r\n              events.splice(i, 1);\r\n            }\r\n          }\r\n        } else {\r\n          delete this._events[name];\r\n        }\r\n      } else {\r\n        this._events = {};\r\n      }\r\n  \r\n      return this;\r\n    };\r\n  \r\n  }\r\n  \r\n  \r\n  export class EventHandle {\r\n  \r\n    public name: Nullable<string>;\r\n  \r\n    public owner: Nullable<Events>;\r\n  \r\n    public fn: Nullable<Function>;\r\n  \r\n    public constructor(owner: Events, name: string, fn: Function) {\r\n      this.owner = owner;\r\n      this.name = name;\r\n      this.fn = fn;\r\n    }\r\n  \r\n    public unbind(): void {\r\n      if (!this.owner) return;\r\n  \r\n      this.owner.unbind(this.name!, this.fn!);\r\n  \r\n      this.owner = null;\r\n      this.name = null;\r\n      this.fn = null;\r\n    }\r\n  \r\n    public call(): void {\r\n      if (!this.fn) return;\r\n  \r\n      this.fn.call(\r\n        this.owner!,\r\n        arguments[0],\r\n        arguments[1],\r\n        arguments[2],\r\n        arguments[3],\r\n        arguments[4],\r\n        arguments[5],\r\n        arguments[6],\r\n        arguments[7]\r\n      );\r\n    }\r\n  \r\n    public on(name: string, fn: Function): EventHandle {\r\n      return this.owner!.on(name, fn);\r\n    }\r\n  \r\n  }","export class GUID {\r\n\r\n    /**\r\n     * 创建GUID唯一标志，注意：采用大数法，有很小的可能性会重复，一般够用；\r\n     */\r\n    public static create(): string {\r\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c: string) {\r\n        let r = Math.random() * 16 | 0,\r\n          v = (c === 'x') ? r : (r & 0x3 | 0x8);\r\n        return v.toString(16);\r\n      });\r\n    }\r\n  \r\n  }","export * from './events';\r\nexport * from './editor';\r\nexport * from './observer';\r\nexport * from './tools';\r\nexport * from './guid';\r\nexport * from './ajax';","import { Events } from './events';\r\n\r\n//  TODO： 当前暂不考虑赋值会超出现有类型的情况，比如原来是个number，赋值为了array；\r\nexport class Observer extends Events {\r\n\r\n    public get className(): string {\r\n        return 'Observer';\r\n    }\r\n\r\n    public origin: any;\r\n\r\n    private SEPARATOR: string = '.';\r\n\r\n\r\n    private _destroyed: boolean;\r\n    public _path: string;\r\n    // TODO\r\n    public _keys: string[]; // 记录对象的key、value值；\r\n\r\n\r\n    public _data: { [key: string]: any }; // 采用此对象，完整记录所有值；\r\n    public _data2: { [key: string]: any }; // 采用此对象，完整记录所有值；\r\n    public _dataType: { [key: string]: boolean } = {}; // 暂时只判断是否为array分拆而成的类型；\r\n    public _dataType2: { [key: string]: boolean } = {}; // 暂时只判断是否为array分拆而成的类型；\r\n\r\n\r\n\r\n\r\n    public _parent: any; // 当前父物体\r\n    // public _parentPath: string;\r\n    private _parentField: any;\r\n    private _parentKey: any;\r\n\r\n    private _silent: boolean;\r\n\r\n    public history!: History;\r\n    // private sync!: History;\r\n\r\n    public node: any = null;\r\n\r\n    public reparenting: boolean = false;\r\n    private _pathsWithDuplicates: { [key: string]: boolean } = {};\r\n\r\n    // entity, assets, components: script, 一般components, selector, history\r\n    public constructor(data: any, options?: any) {\r\n        super();\r\n\r\n        this.origin = data;\r\n        options = options || {};\r\n\r\n\r\n\r\n\r\n\r\n        this._destroyed = false;\r\n        this._path = '';\r\n        this._keys = [];\r\n        this._data = {};\r\n\r\n        this._data2 = {};\r\n\r\n        // array paths where duplicate entries are allowed - normally\r\n        // we check if an array already has a value before inserting it\r\n        // but if the array path is in here we'll allow it\r\n        if (options.pathsWithDuplicates) {\r\n            this._pathsWithDuplicates = {};\r\n            for (let i = 0; i < options.pathsWithDuplicates.length; i++) {\r\n                this._pathsWithDuplicates[options.pathsWithDuplicates[i]] = true;\r\n            }\r\n        }\r\n\r\n        this.patchData(data);\r\n\r\n        // for (let ke in this._data) {\r\n        //   debug.log('key: ' + ke);\r\n        //   debug.log(this._data[ke]);\r\n        // }\r\n\r\n        // this._parent = options.parent || null;\r\n        // this._parentPath = options.parentPath || '';\r\n        // this._parentField = options.parentField || null;\r\n        // this._parentKey = options.parentKey || null;\r\n\r\n        this._silent = false;\r\n    }\r\n\r\n    public patchData(data: any): void {\r\n        if (typeof data !== 'object') {\r\n            debug.warn(this.className + ': 不是正确的json对象，打印：\\n' + data);\r\n            return;\r\n        }\r\n\r\n        for (let key in data) {\r\n            if (typeof data[key] === 'object') {\r\n                // 对象属性\r\n                // debug.log('对象属性：' + key);\r\n                // debug.log(data[key]);\r\n                // this._prepare(this, key, data[key]);\r\n                this.parserObject(key, key, data[key]);\r\n            } else {\r\n                // 一般属性\r\n                // debug.log('一般属性：' + key);\r\n                // debug.log(data[key]);\r\n                this.set(key, data[key]);\r\n                this._dataType[key] = false;\r\n                this._dataType2[key] = false;\r\n                // this.set(key, data[key]);\r\n            }\r\n        }\r\n    }\r\n\r\n    // TODO: 若设置值为object，需要再parse\r\n    public set(path: string, value: any): void {\r\n        // console.warn(path + ' : ' + value);\r\n        let oldValue = this._data[path];\r\n        // console.warn(path);\r\n        // console.warn(value);\r\n        let keys = path.split('.');\r\n        let parentID = '';\r\n        for (let i = 0; i < keys.length - 1; i++) {\r\n            if (i === 0) {\r\n                parentID = keys[i];\r\n            } else {\r\n                parentID += this.SEPARATOR + keys[i];\r\n            }\r\n        }\r\n        // 数组处理，其他形式暂不考虑\r\n        if (keys.length > 1 && this._dataType[path]) {\r\n            let index = parseInt(keys[keys.length - 1]);\r\n            this._data[path] = value;\r\n            // 上一级数组修改\r\n            this._data[parentID][index] = value;\r\n        } else {\r\n            // if (value instanceof Array) {\r\n            //     value = value.slice(0);\r\n            // }\r\n            this._data[path] = value;\r\n            this.updateChildData(path, value);\r\n            this._data2[path] = value;\r\n        }\r\n        // console.warn(this._data);\r\n\r\n        // if (parentID && this._dataType2[parentID] && this.isNumber(keys[keys.length - 1])) {\r\n        //     this._data2[parentID][parseInt(keys[keys.length - 1])] = value;\r\n        // }\r\n\r\n        this.emit(path + ':set', value, oldValue);\r\n        this.emit('*:set', path, value, oldValue);\r\n    }\r\n\r\n    private isNumber(str: string): boolean {\r\n        var n = Number(str);\r\n        return !isNaN(n) ? true : false;\r\n    }\r\n\r\n    private updateChildData(path: string, value: any): void {\r\n        if (value instanceof Array) {\r\n            for (let key in this._data) {\r\n                if (key.startsWith(path + this.SEPARATOR)) {\r\n                    delete this._data[key];\r\n                    delete this._dataType[key];\r\n                }\r\n            }\r\n            let newPath = '';\r\n            for (let i = 0; i < value.length; i++) {\r\n                newPath = path + this.SEPARATOR + i.toString();\r\n                this._data[newPath] = value[i];\r\n                this._dataType[newPath] = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    // TODO\r\n    public unset(path: string, value: any): boolean {\r\n        // console.log(path + ' : ' + value);\r\n        if (!this.has(path)) {\r\n            return false;\r\n        }\r\n        let oldValue = this._data[path];\r\n        delete this._data[path];\r\n        delete this._dataType[path];\r\n\r\n        delete this._data2[path];\r\n        delete this._dataType2[path];\r\n\r\n        this.emit(path + ':set', value, oldValue);\r\n        this.emit('*:set', path, value, oldValue);\r\n\r\n        return true;\r\n    }\r\n\r\n    // 在数组的某个指定位置增加值\r\n    public insert(path: string, value: any, ind: number | undefined): boolean {\r\n        // console.error(path + ':insert-value: ' + value);\r\n        // console.warn(this._data);\r\n        if (!this.has(path) || !(this._data[path] instanceof Array)) {\r\n            return false;\r\n        }\r\n        let arr = this._data[path];\r\n        if (value instanceof Array) {\r\n            value = value.slice(0);\r\n        }\r\n        // if (!this._pathsWithDuplicates || !this._pathsWithDuplicates[path]) {\r\n        //     if (arr.indexOf(value) !== -1) {\r\n        //         return false;\r\n        //     }\r\n        // }\r\n        if (ind === undefined) {\r\n            arr.push(value);\r\n            ind = arr.length - 1;\r\n        } else {\r\n            arr.splice(ind, 0, value);\r\n        }\r\n        this.updateChildData(path, arr);\r\n        // TODO\r\n        // let arr2 = this._data2[path];\r\n        // console.error(arr2);\r\n        // if (arr2) {\r\n        //     // if (!this._pathsWithDuplicates || !this._pathsWithDuplicates[path]) {\r\n        //     //     if (arr2.indexOf(value) !== -1) {\r\n        //     //         return false;\r\n        //     //     }\r\n        //     // }\r\n        //     if (ind === undefined) {\r\n        //         arr2.push(value);\r\n        //     } else {\r\n        //         arr2.splice(ind, 0, value);\r\n        //     }\r\n        // }\r\n        // console.error(arr2);\r\n        \r\n        // console.warn(this._data);\r\n        this.emit(path + ':insert', value, ind);\r\n        this.emit('*:insert', path, value, ind);\r\n\r\n        return true;\r\n    }\r\n\r\n    // 删除数组指定某个序号的值\r\n    public remove(path: string, ind: number): boolean {\r\n        if (!this.has(path) || !(this._data[path] instanceof Array)) {\r\n            return false;\r\n        }\r\n        let arr = this._data[path];\r\n        if (arr.length < ind) return false;\r\n        let value = arr[ind];\r\n        arr.splice(ind, 1);\r\n        this.updateChildData(path, arr);\r\n\r\n        // TODO\r\n        // let arr2 = this._data2[path];\r\n        // if (arr2 && arr2.length >= ind) {\r\n        //     arr2.splice(ind, 1);\r\n        // }\r\n\r\n        this.emit(path + ':remove', value, ind);\r\n        this.emit('*:remove', path, value, ind);\r\n        return true;\r\n    }\r\n\r\n    // 删除数组中的某个value值\r\n    public removeValue(path: string, value: any): boolean {\r\n        if (!this.has(path) || !(this._data[path] instanceof Array)) {\r\n            return false;\r\n        }\r\n        let arr = this._data[path];\r\n        let ind = arr.indexOf(value);\r\n        if (ind === -1) {\r\n            return false;\r\n        }\r\n        let oldValue = arr[ind];\r\n        arr.splice(ind, 1);\r\n        this.updateChildData(path, arr);\r\n\r\n        // TODO\r\n        // let arr2 = this._data2[path];\r\n        // if (arr2 && ind >= 0) {\r\n        //     arr2.splice(ind, 1);\r\n        // }\r\n\r\n        // console.warn('删除');\r\n        // console.warn(this._data);\r\n        // console.warn(this._data2);\r\n\r\n        this.emit(path + ':remove', oldValue, ind);\r\n        this.emit('*:remove', path, oldValue, ind);\r\n\r\n        return true;\r\n    }\r\n\r\n\r\n    public move(path: string, indOld: number, indNew: number): boolean {\r\n        if (!this.has(path) || !(this._data[path] instanceof Array)) {\r\n            return false;\r\n        }\r\n\r\n        let indNew2 = indNew;\r\n\r\n        let arr = this._data[path];\r\n        if (arr.length < indOld || arr.length < indNew || indOld === indNew) return false;\r\n        let oldValue = arr[indOld]\r\n        arr.splice(indOld, 1);\r\n        if (indNew === -1) indNew = arr.length;\r\n        arr.splice(indNew, 0, oldValue);\r\n        this.updateChildData(path, arr);\r\n\r\n        // TODO\r\n        // let arr2 = this._data2[path];\r\n        // if (arr2) {\r\n        //     if (arr2.length < indOld || arr2.length < indNew2 || indOld === indNew2) {\r\n\r\n        //     } else {\r\n        //         let oldValue2 = arr2[indOld]\r\n        //         arr2.splice(indOld, 1);\r\n        //         if (indNew2 === -1) indNew2 = arr2.length;\r\n        //         arr2.splice(indNew2, 0, oldValue2);\r\n        //     }\r\n        // }\r\n\r\n        this.emit(path + ':move', oldValue, indNew, indOld);\r\n        this.emit('*:move', path, oldValue, indNew, indOld);\r\n        return true;\r\n    }\r\n\r\n    public parserObject(prefix: string, key: string, value: any): void {\r\n        // 先保存一份\r\n        this.set(prefix, value);\r\n        this._dataType[prefix] = false;\r\n\r\n        let path: string;\r\n        let type: string = typeof value;\r\n\r\n        if (type === 'object' && value instanceof Array) {\r\n            this._dataType2[prefix] = true;\r\n            for (let i = 0; i < value.length; i++) {\r\n                path = prefix + this.SEPARATOR + i.toString();\r\n                this.set(path, value[i]);\r\n                this._dataType[path] = true;\r\n                // 数组元素还是对象的情况暂时不处理\r\n            }\r\n        } else if (type === 'object' && value instanceof Object) {\r\n\r\n            for (let key2 in value) {\r\n                if (typeof value[key2] === 'object') {\r\n                    // 递归解析\r\n                    this.parserObject(prefix + this.SEPARATOR + key2, key2, value[key2]);\r\n                } else {\r\n                    path = prefix + this.SEPARATOR + key2;\r\n                    this.set(path, value[key2]);\r\n                    this._dataType[path] = false;\r\n                    this._dataType2[prefix] = false;\r\n\r\n                }\r\n            }\r\n        } else {\r\n            // 目前看，null和undefined会经过这里\r\n            // debug.warn(this.className + '.parserObject, 为止数据类型:' + value);\r\n        }\r\n    }\r\n\r\n\r\n    public has(path: string): boolean {\r\n        return path in this._data;\r\n    }\r\n\r\n    public get(path: string): any {\r\n        if (path in this._data) {\r\n            return this._data[path];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public propagate(evt: any) {\r\n        let that = this;\r\n        return function (path: string, arg1: any, arg2: any, arg3: any) {\r\n            if (!that._parent) return;\r\n\r\n            let key = that._parentKey;\r\n            if (!key && that._parentField instanceof Array) {\r\n                key = that._parentField.indexOf(that);\r\n\r\n                if (key === -1) return;\r\n            }\r\n\r\n            // path = that._parentPath + '.' + key + '.' + path;\r\n\r\n            let state;\r\n            if (that._silent) state = that._parent.silence();\r\n\r\n            that._parent.emit(path + ':' + evt, arg1, arg2, arg3);\r\n            that._parent.emit('*:' + evt, path, arg1, arg2, arg3);\r\n\r\n            if (that._silent) that._parent.silenceRestore(state);\r\n        };\r\n    }\r\n\r\n\r\n    public destroy(): void {\r\n        if (this._destroyed) return;\r\n        this._destroyed = true;\r\n        this.emit('destroy');\r\n        this.unbind();\r\n    }\r\n}\r\n\r\nexport interface History {\r\n    enabled?: boolean;\r\n}\r\n","export class Tools {\r\n\r\n\r\n    public constructor() {\r\n\r\n    }\r\n\r\n\r\n    public static eulerAngleToRadian(val: BABYLON.Vector3): BABYLON.Vector3 {\r\n        let para: number = Math.PI / 180;\r\n        return val.multiplyByFloats(para, para, para);\r\n    }\r\n\r\n    public static radianToEulerAngle(val: BABYLON.Vector3): BABYLON.Vector3 {\r\n        let para: number = 180 / Math.PI;\r\n        return val.multiplyByFloats(para, para, para);\r\n    }\r\n\r\n    public static vector3ToArray(val: BABYLON.Vector3): number[] {\r\n        return [val.x, val.y, val.z];\r\n    }\r\n\r\n\r\n\r\n}","import { BabylonLoader, Config, Game } from './game';\r\nimport { Editor } from './lib';\r\n\r\nexport * from './index';\r\n\r\nlet game!: Game;\r\nlet initFlag: boolean = false;\r\nlet dataLoaded: boolean = false;\r\nlet dataLoaded2: boolean = false;\r\n\r\n// let path1: string = '';\r\n// let path2: string = '';\r\nlet datas: any;\r\n\r\n// 添加到全局变量\r\nwindow.editor = new Editor();\r\n// if (typeof String.prototype.startsWith != 'function') {\r\n//     String.prototype.startsWith = function (prefix) {\r\n//         return this.slice(0, prefix.length) === prefix;\r\n//     };\r\n// }\r\n\r\nvar projectID = window.location.pathname.substring(9);\r\n\r\n/**\r\n * 初始化入口；\r\n */\r\nfunction initGame(): void {\r\n    let canvas = <HTMLCanvasElement>document.getElementById('renderCanvas');\r\n    let fpsLabel = document.getElementById('fpsLabel');\r\n    if (canvas !== null && fpsLabel !== null) {\r\n        game = new Game(canvas, fpsLabel);\r\n        game.createScene(datas).animate();  // 链式调用\r\n    }\r\n}\r\n\r\nfunction runBtn(): void {\r\n    if (game) {\r\n        game.createScene(datas).animate();\r\n    }\r\n}\r\n\r\nfunction toggleDebug(): void {\r\n    if (game) {\r\n        game.toggleDebug();\r\n    }\r\n}\r\n\r\n\r\nfunction init(): void {\r\n    // 等待表格数据加载完成\r\n    if (dataLoaded && dataLoaded2) {\r\n        initGame();\r\n    } else {\r\n        setTimeout(init, 500);\r\n    }\r\n}\r\n\r\n\r\nfunction loadResources(): void {\r\n\r\n    var projectID = window.location.pathname.substring(9);\r\n    Config.projectID = projectID;\r\n    // project data\r\n    axios.post('/api/getProject', { projectID: Config.projectID })\r\n        .then(response => {\r\n            var data = response.data;\r\n            if (data.code === '0000') {\r\n                // console.log(data.data);\r\n                Config.projectData = data.data;\r\n                Config.projectName = data.data.project.name;\r\n                Config.userID = data.data.owner.id;\r\n                Config.username = data.data.owner.username;\r\n                // 加载完assets数据再加载scene数据，便于解析scene过程中使用assets数据\r\n                editor.call('getAssets');\r\n                // document.title = Config.projectName + ' - 万维引擎';\r\n                // editor.call('toolbar.project.set', Config.projectName);\r\n            } else {\r\n                console.error('load project data error: ' + data.message);\r\n            }\r\n        })\r\n        .catch(\r\n            error => {\r\n                console.error('load project data error: ');\r\n                console.error(error);\r\n            }\r\n        );\r\n\r\n\r\n    editor.method('getAssets', () => {\r\n        // assets data\r\n        axios.post('/api/getAssets', { projectID: Config.projectID })\r\n            .then(response => {\r\n                var data = response.data;\r\n                if (data.code === '0000') {\r\n                    // console.log(data.data);\r\n                    Config.assetsData = data.data;\r\n                    BabylonLoader.assetsData = data.data;\r\n                    // editor.call('initAssets', Config.assetsData);\r\n                    // 加载完assets数据再加载scene数据，便于解析scene过程中使用assets数据\r\n                    editor.call('getScenes');\r\n                    // 加载表格判断\r\n                    if(data.data.assets) {\r\n                        for(let key in data.data.assets) {\r\n                            if(data.data.assets[key].type === 'table') {\r\n                                Config.tableAssetsID = key;\r\n                                Config.tableName = data.data.assets[key].name;\r\n                            }\r\n                        }\r\n                    }\r\n                    if(Config.tableAssetsID !== '') {\r\n                        editor.call('loadTable');\r\n                    }\r\n                } else {\r\n                    console.error(data.message);\r\n                }\r\n                // ep.emit('settings', response.data);\r\n            })\r\n            .catch(\r\n                error => {\r\n                    console.error(error);\r\n                }\r\n            );\r\n    });\r\n\r\n    editor.method('getScenes', () => {\r\n        // scenes data\r\n        axios.post('/api/getScenes', { projectID: Config.projectID})\r\n            .then(response => {\r\n                var data = response.data;\r\n                if (data.code === '0000') {\r\n                    let lastScene: number = data.data.last;\r\n                    Config.scenesData = data.data.scenes[lastScene];\r\n                    Config.sceneIndex = lastScene;\r\n                    // console.log(Config.scenesData);\r\n                    dataLoaded2 = true;\r\n                    // editor.emit('scene:raw', Config.scenesData);\r\n                    // editor.call('toolbar.scene.set', Config.scenesData.name);\r\n                } else {\r\n                    console.error(data.message);\r\n                }\r\n                // ep.emit('settings', response.data);\r\n            })\r\n            .catch(\r\n                error => {\r\n                    console.error(error);\r\n                }\r\n            );\r\n    });\r\n\r\n\r\n    editor.method('loadTable', () => {\r\n        // 获取表格数据\r\n        var path = window.location.href;\r\n        var paramsData: any = {};\r\n        paramsData['name'] = Config.tableName;\r\n        paramsData['projectID'] = projectID;\r\n        paramsData['id'] = Config.tableAssetsID;\r\n        axios\r\n            .get('/api/table/acquire', {\r\n                params: paramsData,\r\n            })\r\n            .then(function (response) {\r\n                let data = response.data;\r\n                // console.log(data);\r\n                if (data.code === '0000') {\r\n                    // 先将json转化为字符串\r\n                    let tempData = JSON.stringify(data.data);\r\n                    // 对字符串再进行反转义\r\n                    tempData = escape2Html(tempData);\r\n                    // 转化为json后，赋值给表格\r\n                    // hot1.loadData(JSON.parse(tempData).table);\r\n                    // console.log(JSON.parse(tempData).table);\r\n                    datas = JSON.parse(tempData).table;\r\n                    Config.tableData = datas;\r\n                    dataLoaded = true;\r\n                } else {\r\n                    // Do nothing\r\n                    console.log('load not right: ' + data.message);\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log('load error: ' + error);\r\n            });\r\n    });\r\n\r\n\r\n\r\n}\r\n\r\nloadResources();\r\n\r\n\r\nfunction loadScene(): void {\r\n\r\n\r\n    var sceneData: any;\r\n    axios.post('/api/getScenes', { projectID: projectID })\r\n        .then(response => {\r\n            var data = response.data;\r\n            if (data.code === '0000') {\r\n                let lastScene: number = data.data.last;\r\n                sceneData = data.data.scenes[lastScene];\r\n                console.log(sceneData);\r\n                document.title = sceneData.name + ' | 发布项目';\r\n                // path1 = sceneData.path1;\r\n                // path2 = sceneData.path2;\r\n                // console.log('path1: ' + sceneData.path1);\r\n                // console.log('path2: ' + sceneData.path2);\r\n                // dataLoaded2 = true;\r\n            } else {\r\n                console.error(data.message);\r\n            }\r\n            // ep.emit('settings', response.data);\r\n        })\r\n        .catch(\r\n            error => {\r\n                console.error(error);\r\n            }\r\n\r\n        );\r\n}\r\n\r\n// loadScene();\r\n\r\n\r\n// function loadData(): void {\r\n\r\n// }\r\n\r\n// loadData();\r\n\r\n//HTML标签转义（< -> &lt;）\r\nfunction html2Escape(sHtml: any) {\r\n    var temp: any = document.createElement('div');\r\n    temp.textContent != null\r\n        ? (temp.textContent = sHtml)\r\n        : (temp.innerText = sHtml);\r\n    var output = temp.innerHTML;\r\n    temp = null;\r\n    return output;\r\n}\r\n\r\n//HTML标签反转义（&lt; -> <）\r\nfunction escape2Html(str: any) {\r\n    var temp: any = document.createElement('div');\r\n    temp.innerHTML = str;\r\n    var output = temp.innerText || temp.textContent;\r\n    temp = null;\r\n    return output;\r\n}\r\n\r\n// 关联按钮\r\n// document.getElementById('runButton')!.addEventListener('click', runBtn);\r\n\r\n// // 关联按钮\r\n// document.getElementById('debugButton')!.addEventListener('click', toggleDebug);\r\n\r\n// 启动引擎\r\n// 第一次启动时，先异步加载数据后再初始化，后期可以直接点击按钮进行加载；\r\ninit();\r\n// loadData2()\r\n//   .then(function (hot: HandTable) {\r\n//     console.log(hot.getData());\r\n//   }\r\n//   );\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9fYnJvd3Nlci1wYWNrQDYuMS4wQGJyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInNyYy9nYW1lL2JhYnlsb25sb2FkZXIudHMiLCJzcmMvZ2FtZS9jb25maWcudHMiLCJzcmMvZ2FtZS9nYW1lLnRzIiwic3JjL2dhbWUvaW5kZXgudHMiLCJzcmMvZ2FtZS9sb2FkZXIudHMiLCJzcmMvZ2FtZS9zY2VuZXMudHMiLCJzcmMvaW5kZXgudHMiLCJzcmMvbGliL2FqYXgudHMiLCJzcmMvbGliL2VkaXRvci50cyIsInNyYy9saWIvZXZlbnRzLnRzIiwic3JjL2xpYi9ndWlkLnRzIiwic3JjL2xpYi9pbmRleC50cyIsInNyYy9saWIvb2JzZXJ2ZXIudHMiLCJzcmMvbGliL3Rvb2xzLnRzIiwic3JjL21haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUNBQSw0RUFBNEU7QUFDNUUsOEJBQWtFO0FBQ2xFLGdEQUFnRDtBQUNoRCxtREFBbUQ7QUFFbkQ7SUFlSTtJQUVBLENBQUM7SUFFYSxrQ0FBb0IsR0FBbEM7SUFFQSxDQUFDO0lBR2EseUJBQVcsR0FBekIsVUFBMEIsS0FBZTtRQUNyQyxJQUFJLE9BQU8sR0FBVyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RDLElBQUksV0FBVyxHQUFRLElBQUksQ0FBQztRQUM1QixJQUFJLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUN6QyxXQUFXLEdBQUcsYUFBYSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3RELGFBQWEsQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1lBQ2pELGFBQWEsQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1NBQ3ZEO2FBQU07WUFDSCxJQUFJLEtBQUssR0FBRztnQkFDUixHQUFHLEVBQUUsYUFBYSxDQUFDLE1BQU0sR0FBRyxLQUFL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QUFNLENBQUMsV0FBVyxDQUFDLFVBQVUsR0FBRyxHQUFHLEdBQUcsYUFBYSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUM7eUJBQzlKO3dCQUNELElBQUksTUFBTSxDQUFDLGNBQWMsSUFBSSxNQUFNLENBQUMsY0FBYyxDQUFDLFVBQVUsRUFBRTs0QkFDM0QsTUFBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEdBQUcsYUFBYSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLFVBQVUsR0FBRyxHQUFHLEdBQUcsYUFBYSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUM7eUJBQ3ZLO3dCQUNELElBQUksTUFBTSxDQUFDLGNBQWMsSUFBSSxNQUFNLENBQUMsY0FBYyxDQUFDLFVBQVUsRUFBRTs0QkFDM0QsTUFBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEdBQUcsYUFBYSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLFVBQVUsR0FBRyxHQUFHLEdBQUcsYUFBYSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUM7eUJBQ3ZLO3dCQUNELElBQUksTUFBTSxDQUFDLGVBQWUsSUFBSSxNQUFNLENBQUMsZUFBZSxDQUFDLFVBQVUsRUFBRTs0QkFDN0QsTUFBTSxDQUFDLGVBQWUsQ0FBQyxJQUFJLEdBQUcsYUFBYSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsZUFBZSxDQUFDLFVBQVUsR0FBRyxHQUFHLEdBQUcsYUFBYSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUM7eUJBQzFLO3dCQUVELE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7cUJBQ3hCO2lCQUNKO2dCQUVE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LFNBQVMsQ0FBQztJQUM1QixJQUFJLEdBQUcsSUFBSSxDQUFDO0lBQ1osT0FBTyxNQUFNLENBQUM7QUFDbEIsQ0FBQztBQUVELHNCQUFzQjtBQUN0QixTQUFTLFdBQVcsQ0FBQyxHQUFRO0lBQ3pCLElBQUksSUFBSSxHQUFRLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDOUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUM7SUFDckIsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQ2hELElBQUksR0FBRyxJQUFJLENBQUM7SUFDWixPQUFPLE1BQU0sQ0FBQztBQUNsQixDQUFDO0FBRUQsT0FBTztBQUNQLDJFQUEyRTtBQUUzRSxVQUFVO0FBQ1Ysa0ZBQWtGO0FBRWxGLE9BQU87QUFDUCxzQ0FBc0M7QUFDdEMsSUFBSSxFQUFFLENBQUM7QUFDUCxjQUFjO0FBQ2Qsc0NBQXNDO0FBQ3RDLGtDQUFrQztBQUNsQyxNQUFNO0FBQ04sT0FBTyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8vIGltcG9ydCB7IFRvb2xzLCBBamF4UmVxdWVzdCwgQWpheCwgR1VJRCB9IGZyb20gXCIuLi8uLi8uLi9lZGl0b3IvdXRpbGl0eVwiO1xyXG5pbXBvcnQgeyBBamF4LCBBamF4UmVxdWVzdCwgR1VJRCwgT2JzZXJ2ZXIsIFRvb2xzIH0gZnJvbSBcIi4uL2xpYlwiO1xyXG4vLyBpbXBvcnQgeyBWZXJ5RW5naW5lIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZVwiO1xyXG4vLyBpbXBvcnQgeyBDb25maWcgfSBmcm9tIFwiLi4vLi4vLi4vZWRpdG9yL2dsb2JhbFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJhYnlsb25Mb2FkZXIge1xyXG5cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHByZWZpeDogc3RyaW5nID0gJy9hc3NldHMvJztcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzc2V0c0RhdGE6IGFueSA9IHt9O1xyXG4gICAgcHVibGljIHN0YXRpYyBwcm9qZWN0RGF0YTogYW55ID0ge307XHJcbiAgICBwdWJsaWMgc3RhdGljIHNjZW5lc0RhdGE6IGFueSA9IHt9O1xyXG4gICAgcHVibGljIHN0YXRpYyBzY2VuZUluZGV4OiBudW1iZXIgPSAwO1xyXG5cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJhYnlsb25DYWNoZURhdGE6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7fTtcclxuICAgIHB1YmxpYyBzdGF0aWMgYmFieWxvblBhcnNlZERhdGE6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7fTtcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgbG9hZEZyb21CYWJ5bG9uQXNzZXQoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGxvYWRCYWJ5bG9uKGFzc2V0OiBPYnNlcnZlcikge1xyXG4gICAgICAgIGxldCBhc3NldElEOiBzdHJpbmcgPSBhc3NldC5nZXQoJ2lkJyk7XHJcbiAgICAgICAgbGV0IGRhdGFCYWJ5bG9uOiBhbnkgPSBudWxsO1xyXG4gICAgICAgIGlmIChCYWJ5bG9uTG9hZGVyLmJhYnlsb25DYWNoZURhdGFbYXNzZXRJRF0pIHtcclxuICAgICAgICAgICAgZGF0YUJhYnlsb24gPSBCYWJ5bG9uTG9hZGVyLmJhYnlsb25DYWNoZURhdGFbYXNzZXRJRF07XHJcbiAgICAgICAgICAgIEJhYnlsb25Mb2FkZXIucGFyc2VCYWJ5bG9uKGFzc2V0SUQsIGRhdGFCYWJ5bG9uKTtcclxuICAgICAgICAgICAgQmFieWxvbkxvYWRlci5hc3NlbWJsZUJhYnlsb24oYXNzZXRJRCwgZGF0YUJhYnlsb24pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhMSA9IHtcclxuICAgICAgICAgICAgICAgIHVybDogQmFieWxvbkxvYWRlci5wcmVmaXggKyBhc3NldC5nZXQoJ2lkJykgKyAnLycgKyBhc3NldC5nZXQoJ25hbWUnKSxcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICAvLyBhdXRoOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGlnbm9yZUNvbnRlbnRUeXBlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgLy8gaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyDnm7TmjqXov5Tlm55iYWJ5bG9uIGpzb27moLzlvI/lhoXlrrnmlbDmja5cclxuICAgICAgICAgICAgKDxBamF4UmVxdWVzdD5uZXcgQWpheChkYXRhMSkpXHJcbiAgICAgICAgICAgICAgICAub24oJ2xvYWQnLCAoc3RhdHVzOiBhbnksIGRhdGE6IGFueSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkYXRhQmFieWxvbiA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgQmFieWxvbkxvYWRlci5iYWJ5bG9uQ2FjaGVEYXRhW2Fzc2V0SURdID0gZGF0YUJhYnlsb247XHJcbiAgICAgICAgICAgICAgICAgICAgQmFieWxvbkxvYWRlci5wYXJzZUJhYnlsb24oYXNzZXRJRCwgZGF0YUJhYnlsb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIEJhYnlsb25Mb2FkZXIuYXNzZW1ibGVCYWJ5bG9uKGFzc2V0SUQsIGRhdGFCYWJ5bG9uKTtcclxuICAgICAgICAgICAgICAgIH0pLm9uKCdlcnJvcicsIChldnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXZ0KTtcclxuICAgICAgICAgICAgICAgIH0pOztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYXNzZW1ibGVCYWJ5bG9uKGFzc2V0SUQ6IHN0cmluZywgZGF0YUJhYnlsb246IGFueSkge1xyXG4gICAgICAgIGlmIChkYXRhQmFieWxvbiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oZGF0YUJhYnlsb24pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhQmFieWxvbi5tZXNoZXMpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhQmFieWxvbi5tYXRlcmlhbHMpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhQmFieWxvbi5saWdodHMpO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgKGRhdGFCYWJ5bG9uLmxpZ2h0cykge1xyXG4gICAgICAgICAgICAvLyAgICAgZGF0YUJhYnlsb24ubGlnaHRzLmZvckVhY2goKGVsZW1lbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIEJhYnlsb25Mb2FkZXIubG9hZExpZ2h0KGVsZW1lbnQsIFZlcnlFbmdpbmUudmlld1NjZW5lKTtcclxuICAgICAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICAvLyBtYXRlcmlhbCBhc3NlbWJsZVxyXG4gICAgICAgICAgICBpZiAoQmFieWxvbkxvYWRlci5hc3NldHNEYXRhLmJhYnlsb25bYXNzZXRJRF0pIHtcclxuICAgICAgICAgICAgICAgIGxldCBtYXRzID0gQmFieWxvbkxvYWRlci5hc3NldHNEYXRhLmJhYnlsb25bYXNzZXRJRF1bJ21hdGVyaWFscyddO1xyXG4gICAgICAgICAgICAgICAgbGV0IG5ld01hdHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBtYXRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdHNba2V5XS5hc3NldF9pZCAmJiBCYWJ5bG9uTG9hZGVyLmFzc2V0c0RhdGEuYXNzZXRzW21hdHNba2V5XS5hc3NldF9pZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld01hdCA9IEJhYnlsb25Mb2FkZXIuYXNzZXRzRGF0YS5hc3NldHNbbWF0c1trZXldLmFzc2V0X2lkXS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmo4DmtYt0ZXh0dXJlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdNYXQuZGlmZnVzZVRleHR1cmUgJiYgbmV3TWF0LmRpZmZ1c2VUZXh0dXJlLnRleHR1cmVfaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01hdC5kaWZmdXNlVGV4dHVyZS5uYW1lID0gQmFieWxvbkxvYWRlci5wcmVmaXggKyBuZXdNYXQuZGlmZnVzZVRleHR1cmUudGV4dHVyZV9pZCArICcvJyArIEJhYnlsb25Mb2FkZXIuYXNzZXRzRGF0YS5hc3NldHNbbmV3TWF0LmRpZmZ1c2VUZXh0dXJlLnRleHR1cmVfaWRdLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLndhcm4obmV3TWF0LmRpZmZ1c2VUZXh0dXJlLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdNYXQuc3BlY3VsYXJUZXh0dXJlICYmIG5ld01hdC5zcGVjdWxhclRleHR1cmUudGV4dHVyZV9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TWF0LnNwZWN1bGFyVGV4dHVyZS5uYW1lID0gQmFieWxvbkxvYWRlci5wcmVmaXggKyBuZXdNYXQuc3BlY3VsYXJUZXh0dXJlLnRleHR1cmVfaWQgKyAnLycgKyBCYWJ5bG9uTG9hZGVyLmFzc2V0c0RhdGEuYXNzZXRzW25ld01hdC5zcGVjdWxhclRleHR1cmUudGV4dHVyZV9pZF0ubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3TWF0LnJlZmxlY3Rpb25UZXh0dXJlICYmIG5ld01hdC5yZWZsZWN0aW9uVGV4dHVyZS50ZXh0dXJlX2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNYXQucmVmbGVjdGlvblRleHR1cmUubmFtZSA9IEJhYnlsb25Mb2FkZXIucHJlZml4ICsgbmV3TWF0LnJlZmxlY3Rpb25UZXh0dXJlLnRleHR1cmVfaWQgKyAnLycgKyBCYWJ5bG9uTG9hZGVyLmFzc2V0c0RhdGEuYXNzZXRzW25ld01hdC5yZWZsZWN0aW9uVGV4dHVyZS50ZXh0dXJlX2lkXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdNYXQucmVmcmFjdGlvblRleHR1cmUgJiYgbmV3TWF0LnJlZnJhY3Rpb25UZXh0dXJlLnRleHR1cmVfaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01hdC5yZWZyYWN0aW9uVGV4dHVyZS5uYW1lID0gQmFieWxvbkxvYWRlci5wcmVmaXggKyBuZXdNYXQucmVmcmFjdGlvblRleHR1cmUudGV4dHVyZV9pZCArICcvJyArIEJhYnlsb25Mb2FkZXIuYXNzZXRzRGF0YS5hc3NldHNbbmV3TWF0LnJlZnJhY3Rpb25UZXh0dXJlLnRleHR1cmVfaWRdLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld01hdC5lbWlzc2l2ZVRleHR1cmUgJiYgbmV3TWF0LmVtaXNzaXZlVGV4dHVyZS50ZXh0dXJlX2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNYXQuZW1pc3NpdmVUZXh0dXJlLm5hbWUgPSBCYWJ5bG9uTG9hZGVyLnByZWZpeCArIG5ld01hdC5lbWlzc2l2ZVRleHR1cmUudGV4dHVyZV9pZCArICcvJyArIEJhYnlsb25Mb2FkZXIuYXNzZXRzRGF0YS5hc3NldHNbbmV3TWF0LmVtaXNzaXZlVGV4dHVyZS50ZXh0dXJlX2lkXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdNYXQuYnVtcFRleHR1cmUgJiYgbmV3TWF0LmJ1bXBUZXh0dXJlLnRleHR1cmVfaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01hdC5idW1wVGV4dHVyZS5uYW1lID0gQmFieWxvbkxvYWRlci5wcmVmaXggKyBuZXdNYXQuYnVtcFRleHR1cmUudGV4dHVyZV9pZCArICcvJyArIEJhYnlsb25Mb2FkZXIuYXNzZXRzRGF0YS5hc3NldHNbbmV3TWF0LmJ1bXBUZXh0dXJlLnRleHR1cmVfaWRdLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld01hdC5vcGFjaXR5VGV4dHVyZSAmJiBuZXdNYXQub3BhY2l0eVRleHR1cmUudGV4dHVyZV9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TWF0Lm9wYWNpdHlUZXh0dXJlLm5hbWUgPSBCYWJ5bG9uTG9hZGVyLnByZWZpeCArIG5ld01hdC5vcGFjaXR5VGV4dHVyZS50ZXh0dXJlX2lkICsgJy8nICsgQmFieWxvbkxvYWRlci5hc3NldHNEYXRhLmFzc2V0c1tuZXdNYXQub3BhY2l0eVRleHR1cmUudGV4dHVyZV9pZF0ubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3TWF0LmFtYmllbnRUZXh0dXJlICYmIG5ld01hdC5hbWJpZW50VGV4dHVyZS50ZXh0dXJlX2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNYXQuYW1iaWVudFRleHR1cmUubmFtZSA9IEJhYnlsb25Mb2FkZXIucHJlZml4ICsgbmV3TWF0LmFtYmllbnRUZXh0dXJlLnRleHR1cmVfaWQgKyAnLycgKyBCYWJ5bG9uTG9hZGVyLmFzc2V0c0RhdGEuYXNzZXRzW25ld01hdC5hbWJpZW50VGV4dHVyZS50ZXh0dXJlX2lkXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdNYXQubGlnaHRtYXBUZXh0dXJlICYmIG5ld01hdC5saWdodG1hcFRleHR1cmUudGV4dHVyZV9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TWF0LmxpZ2h0bWFwVGV4dHVyZS5uYW1lID0gQmFieWxvbkxvYWRlci5wcmVmaXggKyBuZXdNYXQubGlnaHRtYXBUZXh0dXJlLnRleHR1cmVfaWQgKyAnLycgKyBCYWJ5bG9uTG9hZGVyLmFzc2V0c0RhdGEuYXNzZXRzW25ld01hdC5saWdodG1hcFRleHR1cmUudGV4dHVyZV9pZF0ubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3TWF0cy5wdXNoKG5ld01hdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG5ld01hdHMuZm9yRWFjaCgoZWxlbWVudDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5lcnJvcihlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBCYWJ5bG9uTG9hZGVyLmxvYWRNYXRlcmlhbChlbGVtZW50LCBWUi5CYWJ5bG9uRW5naW5lLlNjZW5lLCAnJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gZ2VvbWV0cmllcyBhc3NlbWJsZVxyXG4gICAgICAgICAgICBpZiAoZGF0YUJhYnlsb24uZ2VvbWV0cmllcyAmJiBkYXRhQmFieWxvbi5nZW9tZXRyaWVzLnZlcnRleERhdGEpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFCYWJ5bG9uLmdlb21ldHJpZXMudmVydGV4RGF0YS5hcnJheS5mb3JFYWNoKChwYXJzZWRWZXJ0ZXhEYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBCYWJ5bG9uTG9hZGVyLmxvYWRHZW9tZXRyeShwYXJzZWRWZXJ0ZXhEYXRhLCBWUi5CYWJ5bG9uRW5naW5lLlNjZW5lLCAnJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gdHJhbnNmb3JtTm9kZSBhc3NlbWJsZVxyXG4gICAgICAgICAgICBsZXQgbmV3VHJhbnNmb3JtTm9kZXM6IE51bGxhYmxlPEJBQllMT04uVHJhbnNmb3JtTm9kZT5bXSA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoZGF0YUJhYnlsb24udHJhbnNmb3JtTm9kZXMpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFCYWJ5bG9uLnRyYW5zZm9ybU5vZGVzLmZvckVhY2goKHBhcnNlZFRyYW5zZm9ybU5vZGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBub2RlID0gQmFieWxvbkxvYWRlci5sb2FkVHJhbnNmb3JtTm9kZShwYXJzZWRUcmFuc2Zvcm1Ob2RlLCBWUi5CYWJ5bG9uRW5naW5lLlNjZW5lLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VHJhbnNmb3JtTm9kZXMucHVzaChub2RlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBtZXNoIGFzc2VtYmxlXHJcbiAgICAgICAgICAgIGxldCBuZXdNZXNoZXM6IE51bGxhYmxlPEJBQllMT04uQWJzdHJhY3RNZXNoPltdID0gW107XHJcbiAgICAgICAgICAgIGxldCBwYXJlbnRNZXNoZXM6IE51bGxhYmxlPEJBQllMT04uQWJzdHJhY3RNZXNoPltdID0gW107XHJcblxyXG4gICAgICAgICAgICBsZXQgdGVtcE1lc2hEaWM6IHsgW2tleTogc3RyaW5nXTogTnVsbGFibGU8QkFCWUxPTi5BYnN0cmFjdE1lc2g+IH0gPSB7fTtcclxuXHJcbiAgICAgICAgICAgIGxldCB0ZW1wTWVzaElEOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge307XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0YUJhYnlsb24ubWVzaGVzKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhQmFieWxvbi5tZXNoZXMuZm9yRWFjaCgoZWxlbWVudDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6Iul5b2T5YmNc2NlbmXmlbDmja7kuK3lt7LljIXlkKttZXNoIGlk77yM5YiZ6YeN5paw5Yib5bu6cmVzb3VyY2VfaWRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQmFieWxvbkxvYWRlci5zY2VuZXNEYXRhLmVudGl0aWVzW2VsZW1lbnQuaWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdJRCA9IEdVSUQuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvbGRJRCA9IGVsZW1lbnQuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsZW1lbnRbJ2JhYnlsb25faWQnXSA9IG9sZElEO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wTWVzaElEW25ld0lEXSA9IG9sZElEO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlkID0gbmV3SUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmBjeWOhu+8jOabtOaUuXBhcmVudElEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFCYWJ5bG9uLm1lc2hlcy5mb3JFYWNoKChlbGVtZW50MjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudDIucGFyZW50SWQgPT09IG9sZElEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDIucGFyZW50SWQgPSBuZXdJRDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2hhbmdlIHBhcmVudCBpZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wTWVzaElEW2VsZW1lbnQuaWRdID0gZWxlbWVudC5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxlbWVudFsnYmFieWxvbl9pZCddID0gZWxlbWVudC5pZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5lcnJvcihlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGRhdGFCYWJ5bG9uLm1lc2hlcy5mb3JFYWNoKChlbGVtZW50OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcE1lc2ggPSBCYWJ5bG9uTG9hZGVyLmxvYWRNZXNoKGVsZW1lbnQsIFZSLkJhYnlsb25FbmdpbmUuU2NlbmUsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdNZXNoZXMucHVzaCh0ZW1wTWVzaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcE1lc2hEaWNbZWxlbWVudC5pZF0gPSB0ZW1wTWVzaDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBwYXJlbnQgXHJcbiAgICAgICAgICAgIC8vIFRPRE86IOiLpeS4jeS4unJvb3TvvIzliJltZXNo6L+Z6YeM5Lmf6KaB6K6+5a6a54i25a2Q5YWz57O777yMcGFyZW505Li6bnVsbOWImeS4uuW9k+WJjemAieS4reeJqeS9k1xyXG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgbGV0IHBhcmVudE5vZGU6IE51bGxhYmxlPEJBQllMT04uTm9kZT4gPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoZWRpdG9yLmNhbGwoJ3NlbGVjdG9yOnR5cGUnKSA9PT0gJ2VudGl0eScpXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBlZGl0b3IuY2FsbCgnc2VsZWN0b3I6aXRlbXMnKVswXTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBlZGl0b3IuY2FsbCgnZW50aXRpZXM6cm9vdCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKHBhcmVudCk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLndhcm4ocGFyZW50Lm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudC5ub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZSA9IHBhcmVudC5ub2RlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIGVudGl0aWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgZGF0YTogYW55W10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IOi/mOayoeacieiAg+iZkeaciXRyYW5zZm9ybU5vZGXmlbDmja7nmoTmg4XlhrVcclxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBjYWNoZSA9IG5ld1RyYW5zZm9ybU5vZGVzLmxlbmd0aDsgaW5kZXggPCBjYWNoZTsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybU5vZGUgPSBuZXdUcmFuc2Zvcm1Ob2Rlc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAodHJhbnNmb3JtTm9kZSAmJiB0cmFuc2Zvcm1Ob2RlLl93YWl0aW5nUGFyZW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Ob2RlLnBhcmVudCA9IFZSLkJhYnlsb25FbmdpbmUuU2NlbmUuZ2V0TGFzdEVudHJ5QnlJRCh0cmFuc2Zvcm1Ob2RlLl93YWl0aW5nUGFyZW50SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybU5vZGUuX3dhaXRpbmdQYXJlbnRJZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBuZXdNZXNoZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdNZXNoZXNbaV0gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3TWVzaGVzW2ldIS5fd2FpdGluZ1BhcmVudElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wTWVzaERpY1tuZXdNZXNoZXNbaV0hLl93YWl0aW5nUGFyZW50SWQhXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TWVzaGVzW2ldIS5wYXJlbnQgPSB0ZW1wTWVzaERpY1tuZXdNZXNoZXNbaV0hLl93YWl0aW5nUGFyZW50SWQhXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01lc2hlc1tpXSEucGFyZW50ID0gcGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudE1lc2hlcy5wdXNoKG5ld01lc2hlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdNZXNoZXNbaV0hLnBhcmVudCA9IHBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudE1lc2hlcy5wdXNoKG5ld01lc2hlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld01lc2hlc1tpXSEuX3dhaXRpbmdQYXJlbnRJZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKG5ld01lc2hlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJlbnRNZXNoZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIEJhYnlsb25Mb2FkZXIubWVzaFBhcnNlUmVjdXJzaW9uKHBhcmVudE1lc2hlc1tpXSwgYXNzZXRJRCwgdGVtcE1lc2hJRCwgZW50aXRpZXMsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlZGl0b3IuY2FsbCgnc2VsZWN0b3I6aGlzdG9yeScsIGZhbHNlKTtcclxuICAgICAgICAgICAgZWRpdG9yLmNhbGwoJ3NlbGVjdG9yOnNldCcsICdlbnRpdHknLCBbZWRpdG9yLmNhbGwoJ2VudGl0aWVzOmdldCcsIHBhcmVudE1lc2hlc1swXT8uaWQpXSk7XHJcbiAgICAgICAgICAgIGVkaXRvci5vbmNlKCdzZWxlY3RvcjpjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBlZGl0b3IuY2FsbCgnc2VsZWN0b3I6aGlzdG9yeScsIHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGVkaXRvci5jYWxsKCdtYWtlOnNjZW5lOmRpcnR5Jyk7XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gZWRpdG9yLmVtaXQoJ2VudGl0aWVzOmxvYWQnLCB0cnVlKTtcclxuXHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPXHJcbiAgICAgICAgICAgIC8vIFZlcnlFbmdpbmUudmlld1NjZW5lLm9uUG9pbnRlck9ic2VydmFibGUuYWRkKHBvaW50ZXJJbmZvID0+IHtcclxuICAgICAgICAgICAgLy8gICAgIHN3aXRjaCAocG9pbnRlckluZm8udHlwZSkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNhc2UgQkFCWUxPTi5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSRE9XTjpcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2Rvd24nKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgaWYgKHBvaW50ZXJJbmZvIS5waWNrSW5mbyEucGlja2VkTWVzaCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBlZGl0b3IuY2FsbCgncGljaycsIHBvaW50ZXJJbmZvIS5waWNrSW5mbyEucGlja2VkTWVzaCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBlZGl0b3IuY2FsbCgncGljaycsIG51bGwpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHBvaW50ZXJJbmZvIS5waWNrSW5mbyEucGlja2VkTWVzaCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgcGFyc2VCYWJ5bG9uKGFzc2V0SUQ6IHN0cmluZywgYmFieWxvbkRhdGE6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGlmIChiYWJ5bG9uRGF0YSkge1xyXG4gICAgICAgICAgICBsZXQgcGFyc2VkRGF0YTogYW55ID0ge307XHJcbiAgICAgICAgICAgIC8vIOadkOi0qFxyXG4gICAgICAgICAgICBpZiAoYmFieWxvbkRhdGEubWF0ZXJpYWxzKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJzZWREYXRhLm1hdGVyaWFscyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgYmFieWxvbkRhdGEubWF0ZXJpYWxzLmZvckVhY2goKG1hdGVyaWFsOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJzZWREYXRhLm1hdGVyaWFsc1ttYXRlcmlhbC5pZF0gPSBtYXRlcmlhbDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGdlb21ldHJpZXNcclxuICAgICAgICAgICAgaWYgKGJhYnlsb25EYXRhLmdlb21ldHJpZXMgJiYgYmFieWxvbkRhdGEuZ2VvbWV0cmllcy52ZXJ0ZXhEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJzZWREYXRhLmdlb21ldHJpZXMgPSB7fTtcclxuICAgICAgICAgICAgICAgIGJhYnlsb25EYXRhLmdlb21ldHJpZXMudmVydGV4RGF0YS5mb3JFYWNoKChnZW9tZXRyeTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YS5nZW9tZXRyaWVzW2dlb21ldHJ5LmlkXSA9IGdlb21ldHJ5O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbWVzaFxyXG4gICAgICAgICAgICBpZiAoYmFieWxvbkRhdGEubWVzaGVzKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJzZWREYXRhLm1lc2hlcyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgYmFieWxvbkRhdGEubWVzaGVzLmZvckVhY2goKG1lc2g6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZERhdGEubWVzaGVzW21lc2guaWRdID0gbWVzaDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHRyYW5zZm9ybU5vZGVzXHJcbiAgICAgICAgICAgIGlmIChiYWJ5bG9uRGF0YS50cmFuc2Zvcm1Ob2Rlcykge1xyXG4gICAgICAgICAgICAgICAgcGFyc2VkRGF0YS50cmFuc2Zvcm1Ob2RlcyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgYmFieWxvbkRhdGEudHJhbnNmb3JtTm9kZXMuZm9yRWFjaCgodHJhbnNmb3JtTm9kZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YS50cmFuc2Zvcm1Ob2Rlc1t0cmFuc2Zvcm1Ob2RlLmlkXSA9IHRyYW5zZm9ybU5vZGU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBCYWJ5bG9uTG9hZGVyLmJhYnlsb25QYXJzZWREYXRhW2Fzc2V0SURdID0gcGFyc2VkRGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBoYXNCYWJ5bG9iRGF0YShhc3NldElEOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gYXNzZXRJRCBpbiBCYWJ5bG9uTG9hZGVyLmJhYnlsb25DYWNoZURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRCYWJ5bG9uRGF0YShhc3NldElEOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgIGlmIChhc3NldElEIGluIEJhYnlsb25Mb2FkZXIuYmFieWxvbkNhY2hlRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gQmFieWxvbkxvYWRlci5iYWJ5bG9uQ2FjaGVEYXRhW2Fzc2V0SURdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGhhc1BhcnNlZEJhYnlsb25EYXRhKGFzc2V0SUQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBhc3NldElEIGluIEJhYnlsb25Mb2FkZXIuYmFieWxvblBhcnNlZERhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRQYXJzZWRCYWJ5bG9uRGF0YShhc3NldElEOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgIGlmIChhc3NldElEIGluIEJhYnlsb25Mb2FkZXIuYmFieWxvblBhcnNlZERhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJhYnlsb25Mb2FkZXIuYmFieWxvblBhcnNlZERhdGFbYXNzZXRJRF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBtZXNoUGFyc2VSZWN1cnNpb24obWVzaDogTnVsbGFibGU8QkFCWUxPTi5BYnN0cmFjdE1lc2g+LCBhc3NldElEOiBzdHJpbmcsIHRlbXBNZXNoSUQ6IGFueSwgZW50aXRpZXM6IGFueVtdLCBkYXRhOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGlmIChtZXNoKSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgcGFyZW50SUQ6IHN0cmluZyA9ICcnO1xyXG4gICAgICAgICAgICBpZiAobWVzaC5wYXJlbnQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudElEID0gbWVzaC5wYXJlbnQhLmlkO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJvb3QgPSBlZGl0b3IuY2FsbCgnZW50aXRpZXM6cm9vdCcpO1xyXG4gICAgICAgICAgICAgICAgcGFyZW50SUQgPSByb290LmdldCgncmVzb3VyY2VfaWQnKTtcclxuICAgICAgICAgICAgICAgIC8vIHJvb3QuaW5zZXJ0KCdjaGlsZHJlbicsIG1lc2guaWQpO1xyXG4gICAgICAgICAgICAgICAgLy8gQmFieWxvbkxvYWRlci51cGRhdGVTY2VuZURhdGEocGFyZW50SUQsIHJvb3QuX2RhdGEyKTtcclxuICAgICAgICAgICAgICAgIC8vIGVkaXRvci5jYWxsKCdtYWtlOnNjZW5lOmRpcnR5Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBjaGlsZHMgPSBtZXNoLmdldENoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgIHZhciBteUNoaWxkcmVuID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY2hpbGRzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICBteUNoaWxkcmVuLnB1c2goY2hpbGRzW2tdLmlkKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGV1bGVyQW5nbGUgPSBUb29scy5yYWRpYW5Ub0V1bGVyQW5nbGUobWVzaC5yb3RhdGlvbik7XHJcblxyXG4gICAgICAgICAgICBsZXQgZW50aXR5RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IG1lc2gubmFtZSxcclxuICAgICAgICAgICAgICAgIHJlc291cmNlX2lkOiBtZXNoLmlkLFxyXG4gICAgICAgICAgICAgICAgYmFieWxvbl9pZDogdGVtcE1lc2hJRFttZXNoLmlkXSwgIC8vIOWOn+Wni+eahG1lc2ggaWRcclxuICAgICAgICAgICAgICAgIGFzc2V0X2lkOiBhc3NldElELCAgLy8g5a+55bqUYmFieWxvbui1hOa6kGlkXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IHBhcmVudElELFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFttZXNoLnBvc2l0aW9uLngsIG1lc2gucG9zaXRpb24ueSwgbWVzaC5wb3NpdGlvbi56XSxcclxuICAgICAgICAgICAgICAgIHJvdGF0aW9uOiBbZXVsZXJBbmdsZS54LCBldWxlckFuZ2xlLnksIGV1bGVyQW5nbGUuel0sXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogW21lc2guc2NhbGluZy54LCBtZXNoLnNjYWxpbmcueSwgbWVzaC5zY2FsaW5nLnpdLFxyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IG15Q2hpbGRyZW4sXHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOiBtZXNoLmlzRW5hYmxlZCgpLFxyXG4gICAgICAgICAgICAgICAgY2hlY2tDb2xsaXNpb25zOiBtZXNoLmNoZWNrQ29sbGlzaW9ucyxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBtZXNoLmlzUGlja2FibGUsXHJcbiAgICAgICAgICAgICAgICBpc1Zpc2libGU6IG1lc2guaXNWaXNpYmxlLFxyXG4gICAgICAgICAgICAgICAgdGFnczogW10sXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWVzaCdcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGVudGl0eSA9IGVkaXRvci5jYWxsKCdlbnRpdGllczpuZXcnLCBlbnRpdHlEYXRhKTtcclxuICAgICAgICAgICAgZW50aXRpZXMucHVzaChlbnRpdHkpO1xyXG4gICAgICAgICAgICBkYXRhLnB1c2goZW50aXR5Lm9yaWdpbik7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNoaWxkcy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgQmFieWxvbkxvYWRlci5tZXNoUGFyc2VSZWN1cnNpb24oPEJBQllMT04uQWJzdHJhY3RNZXNoPmNoaWxkc1trXSwgYXNzZXRJRCwgdGVtcE1lc2hJRCwgZW50aXRpZXMsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFkZFNjZW5lRGF0YShyZXNvdXJjZV9pZDogc3RyaW5nLCBkYXRhOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBCYWJ5bG9uTG9hZGVyLnNjZW5lc0RhdGEuZW50aXRpZXNbcmVzb3VyY2VfaWRdID0gZGF0YTtcclxuICAgICAgICBCYWJ5bG9uTG9hZGVyLnNjZW5lc0RhdGFbJ21vZGlmaWVkJ10gPSBCYWJ5bG9uTG9hZGVyLmNyZWF0ZWRBdFRpbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHVwZGF0ZVNjZW5lRGF0YShyZXNvdXJjZV9pZDogc3RyaW5nLCBkYXRhOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBCYWJ5bG9uTG9hZGVyLnNjZW5lc0RhdGEuZW50aXRpZXNbcmVzb3VyY2VfaWRdID0gZGF0YTtcclxuICAgICAgICBCYWJ5bG9uTG9hZGVyLnNjZW5lc0RhdGFbJ21vZGlmaWVkJ10gPSBCYWJ5bG9uTG9hZGVyLmNyZWF0ZWRBdFRpbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZWRBdFRpbWUoKTogc3RyaW5nIHtcclxuICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICB2YXIgWSA9IG5vdy5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIHZhciBtID0gQmFieWxvbkxvYWRlci5nZXRSZWFsVGltZShub3cuZ2V0TW9udGgoKSArIDEpO1xyXG4gICAgICAgIHZhciBkID0gQmFieWxvbkxvYWRlci5nZXRSZWFsVGltZShub3cuZ2V0RGF0ZSgpKTtcclxuICAgICAgICB2YXIgSCA9IEJhYnlsb25Mb2FkZXIuZ2V0UmVhbFRpbWUobm93LmdldEhvdXJzKCkpO1xyXG4gICAgICAgIHZhciBpID0gQmFieWxvbkxvYWRlci5nZXRSZWFsVGltZShub3cuZ2V0TWludXRlcygpKTtcclxuICAgICAgICAvLyB2YXIgcyA9IGdldFJlYWxUaW1lKG5vdy5nZXRTZWNvbmRzKCkpO1xyXG4gICAgICAgIHJldHVybiBZICsgXCItXCIgKyBtICsgXCItXCIgKyBkICsgXCIgXCIgKyBIICsgXCI6XCIgKyBpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdldFJlYWxUaW1lKHN0cjogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoc3RyIDwgMTApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiMFwiICsgc3RyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3RyLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgbG9hZExpZ2h0KHBhcnNlZExpZ2h0OiBhbnksIHNjZW5lOiBCQUJZTE9OLlNjZW5lKTogTnVsbGFibGU8QkFCWUxPTi5MaWdodD4ge1xyXG4gICAgICAgIC8vIExpZ2h0XHJcbiAgICAgICAgaWYgKHBhcnNlZExpZ2h0ICE9PSB1bmRlZmluZWQgJiYgcGFyc2VkTGlnaHQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIGxpZ2h0ID0gQkFCWUxPTi5MaWdodC5QYXJzZShwYXJzZWRMaWdodCwgc2NlbmUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbGlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgbG9hZFJlZmxlY3Rpb25Qcm9iZShwYXJzZWRSZWZsZWN0aW9uUHJvYmU6IGFueSwgc2NlbmU6IEJBQllMT04uU2NlbmUsIHJvb3RVcmw6IHN0cmluZyk6IE51bGxhYmxlPEJBQllMT04uUmVmbGVjdGlvblByb2JlPiB7XHJcbiAgICAgICAgLy8gUmVmbGVjdGlvblByb2JlXHJcbiAgICAgICAgaWYgKHBhcnNlZFJlZmxlY3Rpb25Qcm9iZSAhPT0gdW5kZWZpbmVkICYmIHBhcnNlZFJlZmxlY3Rpb25Qcm9iZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB2YXIgcmVmbGVjdGlvblByb2JlID0gQkFCWUxPTi5SZWZsZWN0aW9uUHJvYmUuUGFyc2UocGFyc2VkUmVmbGVjdGlvblByb2JlLCBzY2VuZSwgcm9vdFVybCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZWZsZWN0aW9uUHJvYmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgbG9hZEFuaW1hdGlvbihwYXJzZWRBbmltYXRpb246IGFueSk6IE51bGxhYmxlPEJBQllMT04uQW5pbWF0aW9uW10+IHtcclxuICAgICAgICAvLyBBbmltYXRpb25cclxuICAgICAgICBpZiAocGFyc2VkQW5pbWF0aW9uICE9PSB1bmRlZmluZWQgJiYgcGFyc2VkQW5pbWF0aW9uICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVybmFsQ2xhc3MgPSBCQUJZTE9OLl9UeXBlU3RvcmUuR2V0Q2xhc3MoXCJCQUJZTE9OLkFuaW1hdGlvblwiKTtcclxuICAgICAgICAgICAgaWYgKGludGVybmFsQ2xhc3MpIHtcclxuICAgICAgICAgICAgICAgIGxldCBhbmltYXRpb24gPSBpbnRlcm5hbENsYXNzLlBhcnNlKHBhcnNlZEFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5pbWF0aW9uO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBsb2FkTWF0ZXJpYWwocGFyc2VkTWF0ZXJpYWw6IGFueSwgc2NlbmU6IEJBQllMT04uU2NlbmUsIHJvb3RVcmw6IHN0cmluZyk6IE51bGxhYmxlPEJBQllMT04uTWF0ZXJpYWw+IHtcclxuICAgICAgICAvLyBNYXRlcmlhbFxyXG4gICAgICAgIGlmIChwYXJzZWRNYXRlcmlhbCAhPT0gdW5kZWZpbmVkICYmIHBhcnNlZE1hdGVyaWFsICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXQgPSBCQUJZTE9OLk1hdGVyaWFsLlBhcnNlKHBhcnNlZE1hdGVyaWFsLCBzY2VuZSwgcm9vdFVybCk7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgbG9hZE11bHRpTWF0ZXJpYWwocGFyc2VkTXVsdGlNYXRlcmlhbDogYW55LCBzY2VuZTogQkFCWUxPTi5TY2VuZSk6IE51bGxhYmxlPEJBQllMT04uTXVsdGlNYXRlcmlhbD4ge1xyXG4gICAgICAgIC8vIE11bHRpTWF0ZXJpYWxcclxuICAgICAgICBpZiAocGFyc2VkTXVsdGlNYXRlcmlhbCAhPT0gdW5kZWZpbmVkICYmIHBhcnNlZE11bHRpTWF0ZXJpYWwgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIG1tYXQgPSBCQUJZTE9OLk11bHRpTWF0ZXJpYWwuUGFyc2VNdWx0aU1hdGVyaWFsKHBhcnNlZE11bHRpTWF0ZXJpYWwsIHNjZW5lKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1tYXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgbG9hZE1vcnBoVGFyZ2V0TWFuYWdlcihtYW5hZ2VyRGF0YTogYW55LCBzY2VuZTogQkFCWUxPTi5TY2VuZSk6IE51bGxhYmxlPEJBQllMT04uTW9ycGhUYXJnZXRNYW5hZ2VyPiB7XHJcbiAgICAgICAgLy8gTW9ycGhUYXJnZXRNYW5hZ2VyXHJcbiAgICAgICAgaWYgKG1hbmFnZXJEYXRhICE9PSB1bmRlZmluZWQgJiYgbWFuYWdlckRhdGEgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIG1vcnBoVGFyZ2V0ID0gQkFCWUxPTi5Nb3JwaFRhcmdldE1hbmFnZXIuUGFyc2UobWFuYWdlckRhdGEsIHNjZW5lKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1vcnBoVGFyZ2V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGxvYWRTa2VsZXRvbihwYXJzZWRTa2VsZXRvbjogYW55LCBzY2VuZTogQkFCWUxPTi5TY2VuZSk6IE51bGxhYmxlPEJBQllMT04uU2tlbGV0b24+IHtcclxuICAgICAgICAvLyBTa2VsZXRvblxyXG4gICAgICAgIGlmIChwYXJzZWRTa2VsZXRvbiAhPT0gdW5kZWZpbmVkICYmIHBhcnNlZFNrZWxldG9uICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHZhciBza2VsZXRvbiA9IEJBQllMT04uU2tlbGV0b24uUGFyc2UocGFyc2VkU2tlbGV0b24sIHNjZW5lKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNrZWxldG9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGxvYWRHZW9tZXRyeSh2ZXJ0ZXhEYXRhOiBhbnksIHNjZW5lOiBCQUJZTE9OLlNjZW5lLCByb290VXJsOiBzdHJpbmcpOiBOdWxsYWJsZTxCQUJZTE9OLkdlb21ldHJ5PiB7XHJcbiAgICAgICAgLy8gR2VvbWV0cnlcclxuICAgICAgICBpZiAodmVydGV4RGF0YSAhPT0gdW5kZWZpbmVkICYmIHZlcnRleERhdGEgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gQkFCWUxPTi5HZW9tZXRyeS5QYXJzZSh2ZXJ0ZXhEYXRhLCBzY2VuZSwgcm9vdFVybCk7XHJcbiAgICAgICAgICAgIHJldHVybiBnZW9tZXRyeTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBsb2FkVHJhbnNmb3JtTm9kZShwYXJzZWRUcmFuc2Zvcm1Ob2RlOiBhbnksIHNjZW5lOiBCQUJZTE9OLlNjZW5lLCByb290VXJsOiBzdHJpbmcpOiBOdWxsYWJsZTxCQUJZTE9OLlRyYW5zZm9ybU5vZGU+IHtcclxuICAgICAgICAvLyBUcmFuc2Zvcm1Ob2RlXHJcbiAgICAgICAgaWYgKHBhcnNlZFRyYW5zZm9ybU5vZGUgIT09IHVuZGVmaW5lZCAmJiBwYXJzZWRUcmFuc2Zvcm1Ob2RlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gQkFCWUxPTi5UcmFuc2Zvcm1Ob2RlLlBhcnNlKHBhcnNlZFRyYW5zZm9ybU5vZGUsIHNjZW5lLCByb290VXJsKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGxvYWRNZXNoKHBhcnNlZE1lc2g6IGFueSwgc2NlbmU6IEJBQllMT04uU2NlbmUsIHJvb3RVcmw6IHN0cmluZyk6IE51bGxhYmxlPEJBQllMT04uQWJzdHJhY3RNZXNoPiB7XHJcbiAgICAgICAgLy8gTWVzaFxyXG4gICAgICAgIGlmIChwYXJzZWRNZXNoICE9PSB1bmRlZmluZWQgJiYgcGFyc2VkTWVzaCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB2YXIgbWVzaCA9IDxCQUJZTE9OLkFic3RyYWN0TWVzaD5CQUJZTE9OLk1lc2guUGFyc2UocGFyc2VkTWVzaCwgc2NlbmUsIHJvb3RVcmwpO1xyXG4gICAgICAgICAgICByZXR1cm4gbWVzaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgbG9hZENhbWVyYShwYXJzZWRDYW1lcmE6IGFueSwgc2NlbmU6IEJBQllMT04uU2NlbmUpOiBOdWxsYWJsZTxCQUJZTE9OLkNhbWVyYT4ge1xyXG4gICAgICAgIC8vIENhbWVyYVxyXG4gICAgICAgIGlmIChwYXJzZWRDYW1lcmEgIT09IHVuZGVmaW5lZCAmJiBwYXJzZWRDYW1lcmEgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIGNhbWVyYSA9IEJBQllMT04uQ2FtZXJhLlBhcnNlKHBhcnNlZENhbWVyYSwgc2NlbmUpO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FtZXJhO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGxvYWRBbmltYXRpb25Hcm91cChwYXJzZWRBbmltYXRpb25Hcm91cDogYW55LCBzY2VuZTogQkFCWUxPTi5TY2VuZSk6IE51bGxhYmxlPEJBQllMT04uQW5pbWF0aW9uR3JvdXA+IHtcclxuICAgICAgICAvLyBBbmltYXRpb25Hcm91cFxyXG4gICAgICAgIGlmIChwYXJzZWRBbmltYXRpb25Hcm91cCAhPT0gdW5kZWZpbmVkICYmIHBhcnNlZEFuaW1hdGlvbkdyb3VwICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHZhciBhbmltYXRpb25Hcm91cCA9IEJBQllMT04uQW5pbWF0aW9uR3JvdXAuUGFyc2UocGFyc2VkQW5pbWF0aW9uR3JvdXAsIHNjZW5lKTtcclxuICAgICAgICAgICAgcmV0dXJuIGFuaW1hdGlvbkdyb3VwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBzZXRCYWJ5bG9uUGFyZW50KHNjZW5lOiBCQUJZTE9OLlNjZW5lKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGluZGV4LCBjYWNoZSA9IDA7XHJcbiAgICAgICAgLy8gQnJvd3NpbmcgYWxsIHRoZSBncmFwaCB0byBjb25uZWN0IHRoZSBkb3RzXHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBjYWNoZSA9IHNjZW5lLmNhbWVyYXMubGVuZ3RoOyBpbmRleCA8IGNhY2hlOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjYW1lcmEgPSBzY2VuZS5jYW1lcmFzW2luZGV4XTtcclxuICAgICAgICAgICAgaWYgKGNhbWVyYS5fd2FpdGluZ1BhcmVudElkKSB7XHJcbiAgICAgICAgICAgICAgICBjYW1lcmEucGFyZW50ID0gc2NlbmUuZ2V0TGFzdEVudHJ5QnlJRChjYW1lcmEuX3dhaXRpbmdQYXJlbnRJZCk7XHJcbiAgICAgICAgICAgICAgICBjYW1lcmEuX3dhaXRpbmdQYXJlbnRJZCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoaW5kZXggPSAwLCBjYWNoZSA9IHNjZW5lLmxpZ2h0cy5sZW5ndGg7IGluZGV4IDwgY2FjaGU7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgbGV0IGxpZ2h0ID0gc2NlbmUubGlnaHRzW2luZGV4XTtcclxuICAgICAgICAgICAgaWYgKGxpZ2h0ICYmIGxpZ2h0Ll93YWl0aW5nUGFyZW50SWQpIHtcclxuICAgICAgICAgICAgICAgIGxpZ2h0LnBhcmVudCA9IHNjZW5lLmdldExhc3RFbnRyeUJ5SUQobGlnaHQuX3dhaXRpbmdQYXJlbnRJZCk7XHJcbiAgICAgICAgICAgICAgICBsaWdodC5fd2FpdGluZ1BhcmVudElkID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/liqDovb3lrozmiYDmnInotYTmupDku6XlkI7vvIzorr7nq4vniLblrZDlhbPns7vvvIzliqDlhaXlnKjoh6rlt7HnmoTlvJXmk47kuK3vvIzov5nkupvlhbPns7vmnIlzY2VuZeaVsOaNruehrueri++8jOWPr+S7peWPlua2iOatpOWkhOeahOaTjeS9nFxyXG4gICAgICAgIC8vIENvbm5lY3QgcGFyZW50cyAmIGNoaWxkcmVuIGFuZCBwYXJzZSBhY3Rpb25zXHJcbiAgICAgICAgZm9yIChpbmRleCA9IDAsIGNhY2hlID0gc2NlbmUudHJhbnNmb3JtTm9kZXMubGVuZ3RoOyBpbmRleCA8IGNhY2hlOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1Ob2RlID0gc2NlbmUudHJhbnNmb3JtTm9kZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAodHJhbnNmb3JtTm9kZS5fd2FpdGluZ1BhcmVudElkKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Ob2RlLnBhcmVudCA9IHNjZW5lLmdldExhc3RFbnRyeUJ5SUQodHJhbnNmb3JtTm9kZS5fd2FpdGluZ1BhcmVudElkKTtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybU5vZGUuX3dhaXRpbmdQYXJlbnRJZCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChpbmRleCA9IDAsIGNhY2hlID0gc2NlbmUubWVzaGVzLmxlbmd0aDsgaW5kZXggPCBjYWNoZTsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICB2YXIgbWVzaCA9IHNjZW5lLm1lc2hlc1tpbmRleF07XHJcbiAgICAgICAgICAgIGlmIChtZXNoLl93YWl0aW5nUGFyZW50SWQpIHtcclxuICAgICAgICAgICAgICAgIG1lc2gucGFyZW50ID0gc2NlbmUuZ2V0TGFzdEVudHJ5QnlJRChtZXNoLl93YWl0aW5nUGFyZW50SWQpO1xyXG4gICAgICAgICAgICAgICAgbWVzaC5fd2FpdGluZ1BhcmVudElkID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZnJlZXplIHdvcmxkIG1hdHJpeCBhcHBsaWNhdGlvblxyXG4gICAgICAgIC8vIOatpOmDqOWIhuS4umJhYnlsb27pmpDol4/mlrnms5VcclxuICAgICAgICAvLyBmb3IgKGluZGV4ID0gMCwgY2FjaGUgPSBzY2VuZS5tZXNoZXMubGVuZ3RoOyBpbmRleCA8IGNhY2hlOyBpbmRleCsrKSB7XHJcbiAgICAgICAgLy8gICAgIHZhciBjdXJyZW50TWVzaCA9IHNjZW5lLm1lc2hlc1tpbmRleF07XHJcbiAgICAgICAgLy8gICAgIGlmIChjdXJyZW50TWVzaC5fd2FpdGluZ0ZyZWV6ZVdvcmxkTWF0cml4KSB7XHJcbiAgICAgICAgLy8gICAgICAgICBjdXJyZW50TWVzaC5mcmVlemVXb3JsZE1hdHJpeCgpO1xyXG4gICAgICAgIC8vICAgICAgICAgY3VycmVudE1lc2guX3dhaXRpbmdGcmVlemVXb3JsZE1hdHJpeCA9IG51bGw7XHJcbiAgICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgICAgICBjdXJyZW50TWVzaC5jb21wdXRlV29ybGRNYXRyaXgodHJ1ZSk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxufVxyXG5cclxuIiwiZXhwb3J0IGNsYXNzIENvbmZpZyB7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBwcmVmaXg6IHN0cmluZyA9ICcvYXNzZXRzLyc7XHJcblxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgcHJvamVjdElEOiBzdHJpbmcgPSAnJztcclxuICAgIHB1YmxpYyBzdGF0aWMgcHJvamVjdE5hbWU6IHN0cmluZyA9ICcnO1xyXG4gICAgcHVibGljIHN0YXRpYyBwcm9qZWN0RGF0YTogYW55ID0ge307XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyB1c2VySUQ6IHN0cmluZyA9ICcnO1xyXG4gICAgcHVibGljIHN0YXRpYyB1c2VybmFtZTogc3RyaW5nID0gJyc7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBhc3NldHNEYXRhOiBhbnkgPSB7fTtcclxuICAgIFxyXG4gICAgcHVibGljIHN0YXRpYyBzY2VuZXNEYXRhOiBhbnkgPSB7fTtcclxuICAgIHB1YmxpYyBzdGF0aWMgc2NlbmVJbmRleDogbnVtYmVyID0gMDtcclxuXHJcblxyXG4gICAgcHVibGljIHN0YXRpYyB0YWJsZUFzc2V0c0lEOiBzdHJpbmcgPSAnJztcclxuICAgIHB1YmxpYyBzdGF0aWMgdGFibGVOYW1lOiBzdHJpbmcgPSAnJztcclxuICAgIHB1YmxpYyBzdGF0aWMgdGFibGVEYXRhOiBhbnkgPSBudWxsO1xyXG5cclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gICAgfVxyXG5cclxufSIsIi8vLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vZHRzL2JhYnlsb24uZC50c1wiLz5cclxuXHJcbmltcG9ydCB7IENvbmZpZyB9IGZyb20gXCIuL2NvbmZpZ1wiO1xyXG5pbXBvcnQgeyBMb2FkZXIgfSBmcm9tIFwiLi9sb2FkZXJcIjtcclxuXHJcbi8vIGltcG9ydCB7IFZFX09iamVjdHMsIFZFX01hbmFnZXIgfSBmcm9tIFwiLi4vdmVyeWVuZ2luZS92ZXJ5RW5naW5lXCI7XHJcblxyXG4vLyBpbXBvcnQgeyBCYWJ5bG9uRW5naW5lLCBUaW1lIH0gZnJvbSBcIi4uL3ZlcnllbmdpbmUvYmFieWxvblwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWUge1xyXG4gICAgcHJpdmF0ZSBfY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIHByaXZhdGUgX2ZwczogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIF90YWJsZSE6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBfc2hvd0ZwczogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBwcml2YXRlIF9lbmdpbmUhOiBCQUJZTE9OLkVuZ2luZTtcclxuICAgIHByaXZhdGUgX3NjZW5lITogQkFCWUxPTi5TY2VuZTtcclxuICAgIC8vIHByaXZhdGUgX2NhbWVyYSE6IEJBQllMT04uRnJlZUNhbWVyYTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjYW52YXNFbGVtZW50OiBIVE1MQ2FudmFzRWxlbWVudCwgZnBzOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIG5ldyBMb2FkZXIoKTtcclxuICAgICAgICB0aGlzLl9jYW52YXMgPSBjYW52YXNFbGVtZW50O1xyXG4gICAgICAgIFZSLkJhYnlsb25FbmdpbmUuQ2FudmFzID0gdGhpcy5fY2FudmFzO1xyXG4gICAgICAgIHRoaXMuX2ZwcyA9IGZwcztcclxuICAgICAgICAvLyB0aGlzLl9lbmdpbmUgPSBuZXcgQkFCWUxPTi5FbmdpbmUodGhpcy5fY2FudmFzLCB0cnVlKTtcclxuICAgICAgICB0aGlzLl90YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiVmVyeVRhYmxlXCIpITtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIm+W7uuWcuuaZr++8jOW5tuS4lOWQr+WKqFxyXG4gICAgICovXHJcbiAgICBjcmVhdGVTY2VuZShkYXRhczogYW55KTogR2FtZSB7XHJcblxyXG4gICAgICAgIC8vIOWBh+iuvuaciei/kOihjOS4reeahGVuZ2luZe+8jOWFiOWBnOatou+8jOmHjeaWsOWIneWni+WMllxyXG4gICAgICAgIGlmICh0aGlzLl9lbmdpbmUpIHtcclxuICAgICAgICAgICAgLy8gVE9ETzog5a+56LGh5Lit55u45YWz5pWw5o2uZGlzcG9zZVxyXG4gICAgICAgICAgICBWUi5WRV9NYW5hZ2VyLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coVkVfTWFuYWdlci5wcm9qZWN0cy5wcm9qZWN0cyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2VuZ2luZS5kaXNwb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2VuZ2luZSA9IG5ldyBCQUJZTE9OLkVuZ2luZSh0aGlzLl9jYW52YXMsIHRydWUpO1xyXG4gICAgICAgIFZSLkJhYnlsb25FbmdpbmUuRW5naW5lID0gdGhpcy5fZW5naW5lO1xyXG4gICAgICAgIC8vIFJlc2l6ZVxyXG4gICAgICAgIGxldCBlbmdpbmUgPSB0aGlzLl9lbmdpbmU7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBlbmdpbmUucmVzaXplKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NjZW5lID0gbmV3IEJBQllMT04uU2NlbmUodGhpcy5fZW5naW5lKTtcclxuICAgICAgICBWUi5CYWJ5bG9uRW5naW5lLlNjZW5lID0gdGhpcy5fc2NlbmU7XHJcbiAgICAgICAgVlIuVGltZS5zdGFydCgpO1xyXG5cclxuICAgICAgICB0aGlzLl9zY2VuZS5jbGVhckNvbG9yID0gbmV3IEJBQllMT04uQ29sb3I0KDExNiAvIDI1NSwgMTE2IC8gMjU1LCAxMTYgLyAyNTUsIDEpO1xyXG5cclxuICAgICAgICAvLyBUT0RPOiDorr7lrprnm7jmnLpcclxuICAgICAgICB2YXIgY2FtZXJhID0gbmV3IEJBQllMT04uQXJjUm90YXRlQ2FtZXJhKCdEZWZhdWx0JywgMTAwLCA1MCwgNTAsIG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwgMCwgMCksIHRoaXMuX3NjZW5lKTtcclxuICAgICAgICBjYW1lcmEuc2V0UG9zaXRpb24obmV3IEJBQllMT04uVmVjdG9yMygwLCAxLCAtMjApKTtcclxuICAgICAgICBjYW1lcmEuYXR0YWNoQ29udHJvbCh0aGlzLl9jYW52YXMsIHRydWUpO1xyXG5cclxuICAgICAgICAvLyBsZXQgaW5wdXRNYXA6IHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9ID0ge307XHJcblxyXG4gICAgICAgIC8vIFRPRE86IOWKoOi9vei/h+W6puWKqOeUu+W8gFxyXG4gICAgICAgIC8vIGVuZ2luZS5oaWRlTG9hZGluZ1VJKCk7XHJcblxyXG4gICAgICAgIGVuZ2luZS5kaXNwbGF5TG9hZGluZ1VJKCk7XHJcblxyXG4gICAgICAgIC8vIOWKoOi9vei1hOa6kFxyXG4gICAgICAgIC8vIGNvbnNvbGUud2FybihDb25maWcuc2NlbmVzRGF0YSk7XHJcbiAgICAgICAgZWRpdG9yLmNhbGwoJ3NjZW5lOnJhdycsIENvbmZpZy5zY2VuZXNEYXRhKTtcclxuXHJcbiAgICAgICAgLy8g6L+Q6KGM57yW6K+R5ZmoXHJcbiAgICAgICAgdGhpcy5zdGFydFZlcnlFbmdpbmUodGhpcy5fc2NlbmUsIGRhdGFzKTtcclxuXHJcblxyXG4gICAgICAgIGVuZ2luZS5oaWRlTG9hZGluZ1VJKCk7XHJcblxyXG4gICAgICAgIC8vIOWPkeW4g+eJiOe8lui+keWZqFxyXG4gICAgICAgIHRoaXMuX3NjZW5lLm9uS2V5Ym9hcmRPYnNlcnZhYmxlLmFkZChrYkluZm8gPT4ge1xyXG4gICAgICAgICAgICBpZiAoa2JJbmZvLnR5cGUgPT09IEJBQllMT04uS2V5Ym9hcmRFdmVudFR5cGVzLktFWURPV04pIHtcclxuICAgICAgICAgICAgICAgIGlmIChrYkluZm8uZXZlbnQua2V5Q29kZSA9PT0gODEgJiYga2JJbmZvLmV2ZW50LmN0cmxLZXkgJiYga2JJbmZvLmV2ZW50LmFsdEtleSkgeyAvL0N0cmwgKyBRXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0N0cmwgKyBBbHQgKyBRJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVEZWJ1ZygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2VuZ2luZS5ydW5SZW5kZXJMb29wKCgpID0+IHtcclxuICAgICAgICAgICAgLy8gaWYgKHRoaXMuX2NhbnZhcy53aWR0aCAhPT0gdGhpcy5fY2FudmFzLmNsaWVudFdpZHRoKSB7XHJcbiAgICAgICAgICAgIC8vICAgICB0aGlzLl9lbmdpbmUucmVzaXplKCk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY2VuZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NjZW5lLmFjdGl2ZUNhbWVyYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjZW5lLnJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5fc2hvd0Zwcykge1xyXG4gICAgICAgICAgICAvLyBcdHRoaXMudXBkYXRlRnBzUG9zKCk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuXHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhcnRWZXJ5RW5naW5lKHNjZW5lOiBCQUJZTE9OLlNjZW5lLCBkYXRhczogYW55KTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGVudHJhbmNlOiBWUi5WZXJ5RW5naW5lID0gbmV3IFZSLlZlcnlFbmdpbmUoKTtcclxuICAgICAgICBsZXQgcHJvamVjdE5hbWUgPSBcIua1i+ivlemhueebrlwiO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGFzKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhg56m66KGM5pWw77yaJHtob3QxLmNvdW50RW1wdHlSb3dzKCl9YCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZW50cmFuY2UuaW5pdChkYXRhcywgcHJvamVjdE5hbWUpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgLy8gVE9ETzog5Y+v6IO95Lya5b2x5ZON5pWI546HXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgb2JqZWN0czogVlIuVkVfT2JqZWN0cyA9IFZSLlZFX01hbmFnZXIub2JqZWN0cyhwcm9qZWN0TmFtZSk7XHJcbiAgICAgICAgLy8g5YWo5bGA5riy5p+T5bin5b6q546vXHJcbiAgICAgICAgc2NlbmUub25CZWZvcmVSZW5kZXJPYnNlcnZhYmxlLmFkZCgoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIOa3u+WKoOW4p+WHveaVsFxyXG4gICAgICAgICAgICAvLyBWUi5UaW1lLl9zdW0oKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOinpuWPkeWTjeW6lOW+queOr1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgb2JqZWN0cy5jb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgb2JqZWN0SUQ6IHN0cmluZyA9IG9iamVjdHMuZ2V0T2JqZWN0SUQoaSk7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RzLmdldFZlcnlPYmplY3Qob2JqZWN0SUQpLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzY2VuZS5vbktleWJvYXJkT2JzZXJ2YWJsZS5hZGQoa2JJbmZvID0+IHtcclxuICAgICAgICAgICAgaWYgKGtiSW5mby50eXBlID09PSBCQUJZTE9OLktleWJvYXJkRXZlbnRUeXBlcy5LRVlET1dOKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhrYkluZm8uZXZlbnQua2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5ZCv5Yqo5riy5p+T5b6q546v77ybXHJcbiAgICAgKi9cclxuICAgIGFuaW1hdGUoKTogR2FtZSB7XHJcbiAgICAgICAgdGhpcy5fZW5naW5lLnJ1blJlbmRlckxvb3AoKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5fY2FudmFzLndpZHRoICE9PSB0aGlzLl9jYW52YXMuY2xpZW50V2lkdGgpIHtcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMuX2VuZ2luZS5yZXNpemUoKTtcclxuICAgICAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3NjZW5lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY2VuZS5yZW5kZXIoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3Nob3dGcHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRnBzUG9zKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bGe5oCn57yW6L6R5ZmoVUnnlYzpnaLmjqfliLbvvJtcclxuICAgICAqL1xyXG4gICAgdG9nZ2xlRGVidWcoKTogR2FtZSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2VuZ2luZSkge1xyXG4gICAgICAgICAgICAvLyBBbHdheXMgc2hvd2luZyB0aGUgZGVidWcgbGF5ZXIsIGJlY2F1c2UgeW91IGNhbiBjbG9zZSBpdCBieSBpdHNlbGZcclxuICAgICAgICAgICAgdmFyIHNjZW5lID0gdGhpcy5fZW5naW5lLnNjZW5lc1swXTtcclxuICAgICAgICAgICAgaWYgKHNjZW5lLmRlYnVnTGF5ZXIuaXNWaXNpYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgIHNjZW5lLmRlYnVnTGF5ZXIuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8g5q2k5aSE5L+u5pS55LqGYmFieWxvbi5kLnRz5paH5Lu2XHJcbiAgICAgICAgICAgICAgICBzY2VuZS5kZWJ1Z0xheWVyLnNob3coeyBlbWJlZE1vZGU6IHRydWUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmm7TmlrBmcHPmmL7npLrlj4rmmL7npLrkvY3nva5cclxuICAgICAqL1xyXG4gICAgdXBkYXRlRnBzUG9zKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLl9mcHMpIHtcclxuICAgICAgICAgICAgLy8gdGhpcy5fZnBzLnN0eWxlLnJpZ2h0ID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCAtICh0aGlzLl90YWJsZS5jbGllbnRXaWR0aCArIHRoaXMuX2NhbnZhcy5jbGllbnRXaWR0aCkgKyBcInB4XCI7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9mcHMuaW5uZXJIVE1MID0gdGhpcy5fZW5naW5lLmdldEZwcygpLnRvRml4ZWQoKSArIFwiIGZwc1wiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgKiBmcm9tICcuL2dhbWUnO1xyXG5leHBvcnQgKiBmcm9tICcuL3NjZW5lcyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vY29uZmlnJztcclxuZXhwb3J0ICogZnJvbSAnLi9sb2FkZXInO1xyXG5leHBvcnQgKiBmcm9tICcuL2JhYnlsb25sb2FkZXInOyIsImltcG9ydCB7IEFqYXgsIEFqYXhSZXF1ZXN0LCBPYnNlcnZlciwgVG9vbHMgfSBmcm9tIFwiLi4vbGliXCI7XHJcbmltcG9ydCB7IEJhYnlsb25Mb2FkZXIgfSBmcm9tIFwiLi9iYWJ5bG9ubG9hZGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTG9hZGVyIHtcclxuXHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgICAgICBlZGl0b3IubWV0aG9kKCdpbml0QXNzZXRzJywgKGFzc2V0c19kYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGFzc2V0c19kYXRhLmFzc2V0cylcclxuICAgICAgICAgICAgICAgIG9uTG9hZChhc3NldHNfZGF0YS5hc3NldHMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyDliqDovb1hc3NldHPmlbDmja7vvIxkYXRh5Li6YXNzZXRz5pWw5o2uXHJcbiAgICAgICAgdmFyIG9uTG9hZCA9IGZ1bmN0aW9uIChkYXRhOiBhbnkpIHtcclxuICAgICAgICAgICAgZWRpdG9yLmNhbGwoJ2Fzc2V0czpwcm9ncmVzcycsIDAuNSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgICAgICBsZXQgYXNzZXRzTGVuZ3RoOiBudW1iZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhkYXRhKS5sZW5ndGg7XHJcbiAgICAgICAgICAgIC8vIOWKoOi9vUFzc2V06LWE5rqQXHJcbiAgICAgICAgICAgIHZhciBsb2FkID0gZnVuY3Rpb24gKGFzc2V0X2RhdGE6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yLmNhbGwoJ2xvYWRBc3NldCcsIGFzc2V0X2RhdGEsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5jYWxsKCdhc3NldHM6cHJvZ3Jlc3MnLCAoY291bnQgLyBhc3NldHNMZW5ndGgpICogMC41ICsgMC41KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQgPj0gYXNzZXRzTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5jYWxsKCdhc3NldHM6cHJvZ3Jlc3MnLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmVtaXQoJ2Fzc2V0czpsb2FkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgbG9hZChkYXRhW2tleV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICBlZGl0b3IubWV0aG9kKCdzY2VuZTpyYXcnLCBmdW5jdGlvbiAoZGF0YTogYW55KSB7XHJcbiAgICAgICAgICAgIC8vIGVkaXRvci5jYWxsKCdzZWxlY3RvcjpjbGVhcicpO1xyXG4gICAgICAgICAgICAvLyBlZGl0b3IuY2FsbCgnZW50aXRpZXM6Y2xlYXInKTtcclxuICAgICAgICAgICAgLy8gZWRpdG9yLmNhbGwoJ2F0dHJpYnV0ZXM6Y2xlYXInKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhLmVudGl0aWVzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHZhciB0b3RhbCA9IE9iamVjdC5rZXlzKGRhdGEuZW50aXRpZXMpLmxlbmd0aDtcclxuICAgICAgICAgICAgLy8gdmFyIGkgPSAwO1xyXG5cclxuICAgICAgICAgICAgLy8gbGlzdFxyXG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YS5lbnRpdGllcykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGVudGl0eSA9IG5ldyBPYnNlcnZlcihkYXRhLmVudGl0aWVzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgLy8gZWRpdG9yLmNhbGwoJ2VudGl0aWVzOmFkZCcsIGVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAvLyBwLnByb2dyZXNzID0gKCsraSAvIHRvdGFsKSAqIDAuOCArIDAuMTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUud2FybihlbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLmVudGl0aWVzW2tleV0ucm9vdCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IuY2FsbCgnY3JlYXRlOnNjZW5lOmVsZW1lbnQnLCBlbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBwLnByb2dyZXNzID0gMTtcclxuXHJcbiAgICAgICAgICAgIC8vIGxvYWRlZEVudGl0aWVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgZWRpdG9yLmVtaXQoJ2VudGl0aWVzOmxvYWQnKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIHZhciBjaGlsZEluZGV4OiB7IFtrZXk6IHN0cmluZ106IGFueSB9ID0ge307XHJcbiAgICAgICAgdmFyIGVudGl0aWVzSW5kZXg6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7fTtcclxuICAgICAgICBlZGl0b3IubWV0aG9kKCdjcmVhdGU6c2NlbmU6ZWxlbWVudCcsIChlbnRpdHk6IE9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjcmVhdGUgc2NlbmUgZWxlbWVudCcpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmVycm9yKGVudGl0eSk7XHJcbiAgICAgICAgICAgIGlmIChlbnRpdHkuZ2V0KCd0eXBlJykgPT09ICdsaWdodCcpIHtcclxuICAgICAgICAgICAgICAgIC8vIExpZ2h0c1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpZ2h0ID0gQkFCWUxPTi5MaWdodC5QYXJzZShlbnRpdHkuZ2V0KCdkYXRhJyksIFZSLkJhYnlsb25FbmdpbmUuU2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50aXRpZXNJbmRleFtlbnRpdHkuZ2V0KCdyZXNvdXJjZV9pZCcpXSA9IGxpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5ub2RlID0gbGlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlnaHQuaWQgPSBlbnRpdHkuZ2V0KCdyZXNvdXJjZV9pZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkQW5kUGFyZW50KGVudGl0eSwgbGlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICg8QkFCWUxPTi5TaGFkb3dMaWdodD5saWdodClcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLndhcm4obGlnaHQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdsaWdodOWIm+W7uuWksei0pe+8jGxpZ2h05Y6f5aeL5L+h5oGv77yaJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlbnRpdHkuZ2V0KCdkYXRhJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVudGl0eS5nZXQoJ3R5cGUnKSA9PT0gJ2NhbWVyYScpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGNhbWVyYeimgeeJueWIq+WkhOeQhlxyXG4gICAgICAgICAgICAgICAgLy8gQ2FtZXJhc1xyXG4gICAgICAgICAgICAgICAgLy8gdmFyIGNhbWVyYSA9IEJBQllMT04uQ2FtZXJhLlBhcnNlKGVudGl0eS5nZXQoJ2RhdGEnKSwgVmVyeUVuZ2luZS52aWV3U2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgLy8gY2FtZXJhLmF0dGFjaENvbnRyb2woVmVyeUVuZ2luZS52aWV3Q2FudmFzRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAvLyBlbnRpdHkubm9kZSA9IGNhbWVyYTtcclxuICAgICAgICAgICAgICAgIC8vIGVudGl0aWVzSW5kZXhbZW50aXR5LmdldCgncmVzb3VyY2VfaWQnKV0gPSBjYW1lcmE7XHJcbiAgICAgICAgICAgICAgICAvLyBjYW1lcmEhLmlkID0gZW50aXR5LmdldCgncmVzb3VyY2VfaWQnKTtcclxuICAgICAgICAgICAgICAgIC8vIGNoaWxkQW5kUGFyZW50KGVudGl0eSwgY2FtZXJhKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUud2FybihjYW1lcmEpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVudGl0eS5nZXQoJ3R5cGUnKSA9PT0gJ2JveCcpIHtcclxuICAgICAgICAgICAgICAgIC8vIGJveFxyXG4gICAgICAgICAgICAgICAgdmFyIGJveCA9IEJBQllMT04uTWVzaC5DcmVhdGVCb3goZW50aXR5LmdldCgnbmFtZScpLCAxLCBWUi5CYWJ5bG9uRW5naW5lLlNjZW5lKTtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5ub2RlID0gYm94O1xyXG4gICAgICAgICAgICAgICAgZW50aXRpZXNJbmRleFtlbnRpdHkuZ2V0KCdyZXNvdXJjZV9pZCcpXSA9IGJveDtcclxuICAgICAgICAgICAgICAgIGJveC5pZCA9IGVudGl0eS5nZXQoJ3Jlc291cmNlX2lkJyk7XHJcbiAgICAgICAgICAgICAgICBib3gucG9zaXRpb24gPSBCQUJZTE9OLlZlY3RvcjMuRnJvbUFycmF5KGVudGl0eS5nZXQoJ3Bvc2l0aW9uJykpO1xyXG4gICAgICAgICAgICAgICAgYm94LnJvdGF0aW9uID0gVG9vbHMuZXVsZXJBbmdsZVRvUmFkaWFuKEJBQllMT04uVmVjdG9yMy5Gcm9tQXJyYXkoZW50aXR5LmdldCgncm90YXRpb24nKSkpO1xyXG4gICAgICAgICAgICAgICAgYm94LnNjYWxpbmcgPSBCQUJZTE9OLlZlY3RvcjMuRnJvbUFycmF5KGVudGl0eS5nZXQoJ3NjYWxlJykpO1xyXG4gICAgICAgICAgICAgICAgYm94LmlzRW5hYmxlZChlbnRpdHkuZ2V0KCdlbmFibGVkJykpO1xyXG4gICAgICAgICAgICAgICAgYm94LmlzUGlja2FibGUgPSBlbnRpdHkuZ2V0KCdwaWNrYWJsZScpO1xyXG4gICAgICAgICAgICAgICAgYm94LmNoZWNrQ29sbGlzaW9ucyA9IGVudGl0eS5nZXQoJ2NoZWNrQ29sbGlzaW9ucycpO1xyXG4gICAgICAgICAgICAgICAgYm94LmlzVmlzaWJsZSA9IGVudGl0eS5nZXQoJ2lzVmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgLy8g5Yqg6L296Ieq5a6a5LmJ5YWz6IGU5p2Q6LSoXHJcbiAgICAgICAgICAgICAgICBpZiAoZW50aXR5LmdldCgnbWF0ZXJpYWxfaWQnKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNoaWxkQW5kUGFyZW50KGVudGl0eSwgYm94KTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUud2Fybihib3gpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVudGl0eS5nZXQoJ3R5cGUnKSA9PT0gJ21lc2gnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDmqKHlnovlvILmraXliqDovb3vvIzlm6DkuLptZXNo6ZyA6KaB5YWI5Yqg6L29LmJhYnlsb27mlofku7bvvJtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUud2Fybignc2NlbmXliJvlu7ptZXNo77yaJyArIGVudGl0eS5nZXQoJ25hbWUnKSk7XHJcbiAgICAgICAgICAgICAgICBlZGl0b3IuY2FsbCgnc2NlbmU6bWVzaDpjcmVhdGUnLCBlbnRpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBjaGlsZEFuZFBhcmVudCA9IChlbnRpdHk6IE9ic2VydmVyLCBub2RlOiBOdWxsYWJsZTxCQUJZTE9OLk5vZGU+KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNoaWxkcmVuXHJcbiAgICAgICAgICAgIGxldCBjaGlsZHJlbiA9IGVudGl0eS5nZXQoJ2NoaWxkcmVuJyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkSW5kZXhbY2hpbGRyZW5baV1dID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbm9kZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZW50aXRpZXNJbmRleFtjaGlsZHJlbltpXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnNlcnRDaGlsZChub2RlLCBlbnRpdGllc0luZGV4W2NoaWxkcmVuW2ldXSwgaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHBhcmVudGluZ1xyXG4gICAgICAgICAgICBpZiAoIWVudGl0eS5nZXQoJ3BhcmVudCcpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBiYWJ5bG9uIHJvb3RcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGNoaWxkXHJcbiAgICAgICAgICAgICAgICB2YXIgZGV0YWlscyA9IGNoaWxkSW5kZXhbZW50aXR5LmdldCgncmVzb3VyY2VfaWQnKV07XHJcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWlscyAmJiBkZXRhaWxzLnBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc2VydENoaWxkKGRldGFpbHMucGFyZW50LCBub2RlLCBkZXRhaWxzLmluZGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGluc2VydENoaWxkID0gKHBhcmVudDogTnVsbGFibGU8QkFCWUxPTi5Ob2RlPiwgbm9kZTogTnVsbGFibGU8QkFCWUxPTi5Ob2RlPiwgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAobm9kZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgbm9kZS5wYXJlbnQgPSBwYXJlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVkaXRvci5tZXRob2QoJ3NjZW5lOm1lc2g6Y3JlYXRlJywgKGVudGl0eTogT2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgbG9hZEJhYnlsb24oZW50aXR5KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGxvYWRpbmdCYWJ5bG9uRmxhZzogeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0gPSB7fTtcclxuICAgICAgICBsZXQgdG9Mb2FkRW50aXR5OiB7IFtrZXk6IHN0cmluZ106IE9ic2VydmVyW10gfSA9IHt9O1xyXG4gICAgICAgIGxldCBsb2FkQmFieWxvbiA9IChlbnRpdHk6IE9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBhc3NldElEOiBzdHJpbmcgPSBlbnRpdHkuZ2V0KCdhc3NldF9pZCcpO1xyXG4gICAgICAgICAgICBsZXQgZGF0YUJhYnlsb246IGFueSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBpZiAoQmFieWxvbkxvYWRlci5oYXNCYWJ5bG9iRGF0YShhc3NldElEKSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YUJhYnlsb24gPSBCYWJ5bG9uTG9hZGVyLmdldFBhcnNlZEJhYnlsb25EYXRhKGFzc2V0SUQpO1xyXG4gICAgICAgICAgICAgICAgLy8gQmFieWxvbkxvYWRlci5hc3NlbWJsZUJhYnlsb24oYXNzZXRJRCwgZGF0YUJhYnlsb24pO1xyXG4gICAgICAgICAgICAgICAgLy8g5YWz6IGUbWVzaFxyXG4gICAgICAgICAgICAgICAgYXNzZW1ibGVTY2VuZU1lc2goZW50aXR5LCBkYXRhQmFieWxvbik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXNzZXRJRCBpbiBsb2FkaW5nQmFieWxvbkZsYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b0xvYWRFbnRpdHlbYXNzZXRJRF0ucHVzaChlbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nQmFieWxvbkZsYWdbYXNzZXRJRF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvTG9hZEVudGl0eVthc3NldElEXSA9IFtlbnRpdHldO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUud2FybihCYWJ5bG9uTG9hZGVyLmFzc2V0c0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhMSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBCYWJ5bG9uTG9hZGVyLnByZWZpeCArIGFzc2V0SUQgKyAnLycgKyBCYWJ5bG9uTG9hZGVyLmFzc2V0c0RhdGEuYXNzZXRzW2Fzc2V0SURdLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF1dGg6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlnbm9yZUNvbnRlbnRUeXBlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDnm7TmjqXov5Tlm55iYWJ5bG9uIGpzb27moLzlvI/lhoXlrrnmlbDmja5cclxuICAgICAgICAgICAgICAgICAgICAoPEFqYXhSZXF1ZXN0Pm5ldyBBamF4KGRhdGExKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdsb2FkJywgKHN0YXR1czogYW55LCBkYXRhOiBhbnkpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhQmFieWxvbiA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCYWJ5bG9uTG9hZGVyLmJhYnlsb25DYWNoZURhdGFbYXNzZXRJRF0gPSBkYXRhQmFieWxvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJhYnlsb25Mb2FkZXIucGFyc2VCYWJ5bG9uKGFzc2V0SUQsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQmFieWxvbkxvYWRlci5wYXJzZUJhYnlsb24oYXNzZXRJRCwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhQmFieWxvbiA9IEJhYnlsb25Mb2FkZXIuZ2V0UGFyc2VkQmFieWxvbkRhdGEoYXNzZXRJRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0xvYWRFbnRpdHlbYXNzZXRJRF0uZm9yRWFjaCgoaXRlbTogT2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NlbWJsZVNjZW5lTWVzaChpdGVtLCBkYXRhQmFieWxvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWFs+iBlG1lc2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkub24oJ2Vycm9yJywgKGV2dDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzY2VuZeaVsOaNruWMuemFjWJhYnlsb24gbWVzaOaVsOaNrumUmeivr++8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihldnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBsZXQgYXNzZW1ibGVTY2VuZU1lc2ggPSAoZW50aXR5OiBPYnNlcnZlciwgcGFyc2VkQmFieWxvbjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IOaaguaXtuacquiAg+iZkVRyYW5zZm9ybU5vZGXmlbDmja7nmoTmg4XlhrVcclxuICAgICAgICAgICAgaWYgKHBhcnNlZEJhYnlsb24pIHtcclxuICAgICAgICAgICAgICAgIGxldCBhc3NldElEOiBzdHJpbmcgPSBlbnRpdHkuZ2V0KCdhc3NldF9pZCcpO1xyXG4gICAgICAgICAgICAgICAgLy8g5YWI5LuOLmJhYnlsb27mj5Dlj5bljp/lp4ttZXNo5pWw5o2uXHJcbiAgICAgICAgICAgICAgICBsZXQgbWVzaElEOiBzdHJpbmcgPSBlbnRpdHkuZ2V0KCdiYWJ5bG9uX2lkJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkQmFieWxvbi5tZXNoZXNbbWVzaElEXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtZXNoRGF0YSA9IHBhcnNlZEJhYnlsb24ubWVzaGVzW21lc2hJRF07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g57uT5ZCIc2NlbmXlkoxiYWJ5bG9u5pWw5o2u77yM5pu05pawbWVzaOS/oeaBr1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc2hEYXRhLnBvc2l0aW9uID0gZW50aXR5LmhhcygncG9zaXRpb24nKSAmJiBlbnRpdHkuZ2V0KCdwb3NpdGlvbicpID8gZW50aXR5LmdldCgncG9zaXRpb24nKSA6IG1lc2hEYXRhLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZWNvcmRSb3RhdGlvbiA9IGVudGl0eS5nZXQoJ3JvdGF0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY29yZFJvdGF0aW9uICYmIHJlY29yZFJvdGF0aW9uLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkUm90YXRpb24gPSBUb29scy52ZWN0b3IzVG9BcnJheShUb29scy5ldWxlckFuZ2xlVG9SYWRpYW4oQkFCWUxPTi5WZWN0b3IzLkZyb21BcnJheShyZWNvcmRSb3RhdGlvbikpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRSb3RhdGlvbiA9IG1lc2hEYXRhLnJvdGF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBtZXNoRGF0YS5yb3RhdGlvbiA9IHJlY29yZFJvdGF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc2hEYXRhLnNjYWxlID0gZW50aXR5Lmhhcygnc2NhbGUnKSAmJiBlbnRpdHkuZ2V0KCdzY2FsZScpID8gZW50aXR5LmdldCgnc2NhbGUnKSA6IG1lc2hEYXRhLnNjYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaERhdGEubmFtZSA9IGVudGl0eS5oYXMoJ25hbWUnKSAmJiBlbnRpdHkuZ2V0KCduYW1lJykgPyBlbnRpdHkuZ2V0KCduYW1lJykgOiBtZXNoRGF0YS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc2hEYXRhLmlkID0gZW50aXR5LmhhcygncmVzb3VyY2VfaWQnKSAmJiBlbnRpdHkuZ2V0KCdyZXNvdXJjZV9pZCcpID8gZW50aXR5LmdldCgncmVzb3VyY2VfaWQnKSA6IG1lc2hEYXRhLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc2hEYXRhLmlzRW5hYmxlZCA9IGVudGl0eS5oYXMoJ2VuYWJsZWQnKSA/IGVudGl0eS5nZXQoJ2VuYWJsZWQnKSA6IG1lc2hEYXRhLmlzRW5hYmxlZDtcclxuICAgICAgICAgICAgICAgICAgICBtZXNoRGF0YS5pc1Zpc2libGUgPSBlbnRpdHkuaGFzKCdpc1Zpc2libGUnKSA/IGVudGl0eS5nZXQoJ2lzVmlzaWJsZScpIDogbWVzaERhdGEuaXNWaXNpYmxlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE/vvJrlj5HluIPnirbmgIHkuIvvvIzlkKzmlbDmja7nmoRcclxuICAgICAgICAgICAgICAgICAgICBtZXNoRGF0YS5waWNrYWJsZSA9IGVudGl0eS5oYXMoJ3BpY2thYmxlJykgPyBlbnRpdHkuZ2V0KCdwaWNrYWJsZScpIDogbWVzaERhdGEucGlja2FibGU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ET++8mnNjZW5l57yW6L6R5p2h5Lu25LiL6buY6K6k5bCx5piv5Yqg6L2954q25oCB77ybXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWVzaERhdGEucGlja2FibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc2hEYXRhLmNoZWNrQ29sbGlzaW9ucyA9IGVudGl0eS5oYXMoJ2NoZWNrQ29sbGlzaW9ucycpID8gZW50aXR5LmdldCgnY2hlY2tDb2xsaXNpb25zJykgOiBtZXNoRGF0YS5jaGVja0NvbGxpc2lvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaERhdGEubWF0ZXJpYWxJZCA9IGVudGl0eS5oYXMoJ21hdGVyaWFsX2lkJykgPyBlbnRpdHkuZ2V0KCdtYXRlcmlhbF9pZCcpIDogbWVzaERhdGEubWF0ZXJpYWxJZDtcclxuICAgICAgICAgICAgICAgICAgICAvLyDopoHms6jmhI/mmK/lkKbkuLpyb290IGlkXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaERhdGEucGFyZW50SWQgPSBlbnRpdHkuaGFzKCdwYXJlbnQnKSA/IGVudGl0eS5nZXQoJ3BhcmVudCcpIDogbWVzaERhdGEucGFyZW50SWQ7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDliKTmlq3mmK/lkKblhbPogZTkuoZnZW9tZXRyeVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNoRGF0YS5nZW9tZXRyeUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChWUi5CYWJ5bG9uRW5naW5lLlNjZW5lLmdldEdlb21ldHJ5QnlJRChtZXNoRGF0YS5nZW9tZXRyeUlkKSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZEJhYnlsb24uZ2VvbWV0cmllcyAmJiBwYXJzZWRCYWJ5bG9uLmdlb21ldHJpZXNbbWVzaERhdGEuZ2VvbWV0cnlJZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmVydGV4RGF0YSA9IHBhcnNlZEJhYnlsb24uZ2VvbWV0cmllc1ttZXNoRGF0YS5nZW9tZXRyeUlkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCYWJ5bG9uTG9hZGVyLmxvYWRHZW9tZXRyeSh2ZXJ0ZXhEYXRhLCBWUi5CYWJ5bG9uRW5naW5lLlNjZW5lLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g57uE6KOFbWF0ZXJpYWxcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmVycm9yKG1lc2hEYXRhLm1hdGVyaWFsSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNoRGF0YS5tYXRlcmlhbElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChWUi5CYWJ5bG9uRW5naW5lLlNjZW5lLmdldE1hdGVyaWFsQnlJRChtZXNoRGF0YS5tYXRlcmlhbElkKSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5lcnJvcihCYWJ5bG9uTG9hZGVyLmFzc2V0c0RhdGEuYmFieWxvblthc3NldElEXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQmFieWxvbkxvYWRlci5hc3NldHNEYXRhLmJhYnlsb25bYXNzZXRJRF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0cyA9IEJhYnlsb25Mb2FkZXIuYXNzZXRzRGF0YS5iYWJ5bG9uW2Fzc2V0SURdWydtYXRlcmlhbHMnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0cyAmJiBtYXRzW21lc2hEYXRhLm1hdGVyaWFsSWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRBc3NldElEID0gbWF0c1ttZXNoRGF0YS5tYXRlcmlhbElkXS5hc3NldF9pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEJhYnlsb25Mb2FkZXIuYXNzZXRzRGF0YS5hc3NldHNbbWF0QXNzZXRJRF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdNYXQgPSBCYWJ5bG9uTG9hZGVyLmFzc2V0c0RhdGEuYXNzZXRzW21hdEFzc2V0SURdLmRhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5qOA5rWLdGV4dHVyZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld01hdC5kaWZmdXNlVGV4dHVyZSAmJiBuZXdNYXQuZGlmZnVzZVRleHR1cmUudGV4dHVyZV9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01hdC5kaWZmdXNlVGV4dHVyZS5uYW1lID0gQmFieWxvbkxvYWRlci5wcmVmaXggKyBuZXdNYXQuZGlmZnVzZVRleHR1cmUudGV4dHVyZV9pZCArICcvJyArIEJhYnlsb25Mb2FkZXIuYXNzZXRzRGF0YS5hc3NldHNbbmV3TWF0LmRpZmZ1c2VUZXh0dXJlLnRleHR1cmVfaWRdLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKG5ld01hdC5kaWZmdXNlVGV4dHVyZS5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdNYXQuc3BlY3VsYXJUZXh0dXJlICYmIG5ld01hdC5zcGVjdWxhclRleHR1cmUudGV4dHVyZV9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01hdC5zcGVjdWxhclRleHR1cmUubmFtZSA9IEJhYnlsb25Mb2FkZXIucHJlZml4ICsgbmV3TWF0LnNwZWN1bGFyVGV4dHVyZS50ZXh0dXJlX2lkICsgJy8nICsgQmFieWxvbkxvYWRlci5hc3NldHNEYXRhLmFzc2V0c1tuZXdNYXQuc3BlY3VsYXJUZXh0dXJlLnRleHR1cmVfaWRdLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3TWF0LnJlZmxlY3Rpb25UZXh0dXJlICYmIG5ld01hdC5yZWZsZWN0aW9uVGV4dHVyZS50ZXh0dXJlX2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TWF0LnJlZmxlY3Rpb25UZXh0dXJlLm5hbWUgPSBCYWJ5bG9uTG9hZGVyLnByZWZpeCArIG5ld01hdC5yZWZsZWN0aW9uVGV4dHVyZS50ZXh0dXJlX2lkICsgJy8nICsgQmFieWxvbkxvYWRlci5hc3NldHNEYXRhLmFzc2V0c1tuZXdNYXQucmVmbGVjdGlvblRleHR1cmUudGV4dHVyZV9pZF0ubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdNYXQucmVmcmFjdGlvblRleHR1cmUgJiYgbmV3TWF0LnJlZnJhY3Rpb25UZXh0dXJlLnRleHR1cmVfaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNYXQucmVmcmFjdGlvblRleHR1cmUubmFtZSA9IEJhYnlsb25Mb2FkZXIucHJlZml4ICsgbmV3TWF0LnJlZnJhY3Rpb25UZXh0dXJlLnRleHR1cmVfaWQgKyAnLycgKyBCYWJ5bG9uTG9hZGVyLmFzc2V0c0RhdGEuYXNzZXRzW25ld01hdC5yZWZyYWN0aW9uVGV4dHVyZS50ZXh0dXJlX2lkXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld01hdC5lbWlzc2l2ZVRleHR1cmUgJiYgbmV3TWF0LmVtaXNzaXZlVGV4dHVyZS50ZXh0dXJlX2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TWF0LmVtaXNzaXZlVGV4dHVyZS5uYW1lID0gQmFieWxvbkxvYWRlci5wcmVmaXggKyBuZXdNYXQuZW1pc3NpdmVUZXh0dXJlLnRleHR1cmVfaWQgKyAnLycgKyBCYWJ5bG9uTG9hZGVyLmFzc2V0c0RhdGEuYXNzZXRzW25ld01hdC5lbWlzc2l2ZVRleHR1cmUudGV4dHVyZV9pZF0ubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdNYXQuYnVtcFRleHR1cmUgJiYgbmV3TWF0LmJ1bXBUZXh0dXJlLnRleHR1cmVfaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNYXQuYnVtcFRleHR1cmUubmFtZSA9IEJhYnlsb25Mb2FkZXIucHJlZml4ICsgbmV3TWF0LmJ1bXBUZXh0dXJlLnRleHR1cmVfaWQgKyAnLycgKyBCYWJ5bG9uTG9hZGVyLmFzc2V0c0RhdGEuYXNzZXRzW25ld01hdC5idW1wVGV4dHVyZS50ZXh0dXJlX2lkXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld01hdC5vcGFjaXR5VGV4dHVyZSAmJiBuZXdNYXQub3BhY2l0eVRleHR1cmUudGV4dHVyZV9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01hdC5vcGFjaXR5VGV4dHVyZS5uYW1lID0gQmFieWxvbkxvYWRlci5wcmVmaXggKyBuZXdNYXQub3BhY2l0eVRleHR1cmUudGV4dHVyZV9pZCArICcvJyArIEJhYnlsb25Mb2FkZXIuYXNzZXRzRGF0YS5hc3NldHNbbmV3TWF0Lm9wYWNpdHlUZXh0dXJlLnRleHR1cmVfaWRdLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3TWF0LmFtYmllbnRUZXh0dXJlICYmIG5ld01hdC5hbWJpZW50VGV4dHVyZS50ZXh0dXJlX2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TWF0LmFtYmllbnRUZXh0dXJlLm5hbWUgPSBCYWJ5bG9uTG9hZGVyLnByZWZpeCArIG5ld01hdC5hbWJpZW50VGV4dHVyZS50ZXh0dXJlX2lkICsgJy8nICsgQmFieWxvbkxvYWRlci5hc3NldHNEYXRhLmFzc2V0c1tuZXdNYXQuYW1iaWVudFRleHR1cmUudGV4dHVyZV9pZF0ubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdNYXQubGlnaHRtYXBUZXh0dXJlICYmIG5ld01hdC5saWdodG1hcFRleHR1cmUudGV4dHVyZV9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01hdC5saWdodG1hcFRleHR1cmUubmFtZSA9IEJhYnlsb25Mb2FkZXIucHJlZml4ICsgbmV3TWF0LmxpZ2h0bWFwVGV4dHVyZS50ZXh0dXJlX2lkICsgJy8nICsgQmFieWxvbkxvYWRlci5hc3NldHNEYXRhLmFzc2V0c1tuZXdNYXQubGlnaHRtYXBUZXh0dXJlLnRleHR1cmVfaWRdLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmVycm9yKG5ld01hdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCYWJ5bG9uTG9hZGVyLmxvYWRNYXRlcmlhbChuZXdNYXQsIFZSLkJhYnlsb25FbmdpbmUuU2NlbmUsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybignc2NlbmUgbWVzaCB3YXJuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybignc2NlbmUgbWVzaCB3YXJuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWKoOi9vW1lc2hcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbWVzaCA9IEJhYnlsb25Mb2FkZXIubG9hZE1lc2gobWVzaERhdGEsIFZSLkJhYnlsb25FbmdpbmUuU2NlbmUsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRpdHkubm9kZSA9IG1lc2g7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50aXRpZXNJbmRleFtlbnRpdHkuZ2V0KCdyZXNvdXJjZV9pZCcpXSA9IG1lc2g7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRBbmRQYXJlbnQoZW50aXR5LCBtZXNoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdzY2VuZSBtZXNoIHdhcm4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgY2xhc3MgU2NlbmVzIHtcclxuXHJcblxyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICAvLyBjb25uZWN0IHRvIHNlcnZlclxyXG4gICAgLy8gbG9hZCBwcm9qZWN0IGRhdGFcclxuICAgIC8vIGFuYWx5c2lzIGRhdGFcclxuICAgIC8vIGxvYWQgb3JpZ2luYWwgbW9kZWxcclxuICAgIC8vIGxvYWQgc2NlbmUgb2JqZWN0IGZyb20gb3JpZ2luYWwgbW9kZWxcclxuICAgIFxyXG4gIH1cclxuXHJcblxyXG5cclxuXHJcbn0iLCJleHBvcnQgKiBmcm9tICcuL2xpYic7XHJcbmV4cG9ydCAqIGZyb20gJy4vZ2FtZSc7IiwiaW1wb3J0IHsgRXZlbnRzIH0gZnJvbSBcIi4uL2xpYlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFqYXgge1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihhcmdzOiBvYmplY3QgfCBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodHlwZW9mIChhcmdzKSA9PT0gJ3N0cmluZycpXHJcbiAgICAgICAgICAgIGFyZ3MgPSB7IHVybDogYXJncyB9O1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IEFqYXhSZXF1ZXN0KGFyZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0KHVybDogc3RyaW5nKTogQWpheFJlcXVlc3Qge1xyXG4gICAgICAgIHJldHVybiBuZXcgQWpheFJlcXVlc3QoeyB1cmw6IHVybCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHBvc3QodXJsOiBzdHJpbmcsIGRhdGE6IGFueSk6IEFqYXhSZXF1ZXN0IHtcclxuICAgICAgICByZXR1cm4gbmV3IEFqYXhSZXF1ZXN0KHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICBkYXRhOiBkYXRhXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBwdXQodXJsOiBzdHJpbmcsIGRhdGE6IGFueSk6IEFqYXhSZXF1ZXN0IHtcclxuICAgICAgICByZXR1cm4gbmV3IEFqYXhSZXF1ZXN0KHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGRhdGE6IGRhdGFcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGRlbGV0ZSh1cmw6IHN0cmluZyk6IEFqYXhSZXF1ZXN0IHtcclxuICAgICAgICByZXR1cm4gbmV3IEFqYXhSZXF1ZXN0KHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICAgICAgdXJsOiB1cmxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHBhcmFtczogeyBba2V5OiBzdHJpbmddOiBhbnkgfSA9IHt9O1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgcGFyYW0obmFtZTogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgQWpheC5wYXJhbXNbbmFtZV0gPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQWpheFJlcXVlc3QgZXh0ZW5kcyBFdmVudHMge1xyXG5cclxuICAgIHByaXZhdGUgX3Byb2dyZXNzOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIHByaXZhdGUgX3hocjogWE1MSHR0cFJlcXVlc3Q7XHJcblxyXG4gICAgcHVibGljIG5vdEpzb246IGJvb2xlYW47XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGFyZ3M6IGFueSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIGlmICghYXJncykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FqYXjor7fmsYLml6Dlj4LmlbDvvIzor7fmo4Dmn6XvvIEnKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3MgPSAwLjA7XHJcbiAgICAgICAgdGhpcy5lbWl0KCdwcm9ncmVzcycsIHRoaXMuX3Byb2dyZXNzKTtcclxuXHJcbiAgICAgICAgdGhpcy5feGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gICAgICAgIC8vIHNlbmQgY29va2llc1xyXG4gICAgICAgIGlmIChhcmdzLmNvb2tpZXMpXHJcbiAgICAgICAgICAgIHRoaXMuX3hoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBldmVudHNcclxuICAgICAgICB0aGlzLl94aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuX29uTG9hZC5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgICAgICAgLy8gdGhpcy5feGhyLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgdGhpcy5fb25Qcm9ncmVzcy5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5feGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIHRoaXMuX29uUHJvZ3Jlc3MuYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuX3hoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuX29uRXJyb3IuYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuX3hoci5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIHRoaXMuX29uQWJvcnQuYmluZCh0aGlzKSwgZmFsc2UpO1xyXG5cclxuICAgICAgICAvLyB1cmxcclxuICAgICAgICBsZXQgdXJsOiBzdHJpbmcgPSBhcmdzLnVybDtcclxuXHJcbiAgICAgICAgLy8gcXVlcnlcclxuICAgICAgICBpZiAoYXJncy5xdWVyeSAmJiBPYmplY3Qua2V5cyhhcmdzLnF1ZXJ5KS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCc/JykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB1cmwgKz0gJz8nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGFyZ3MucXVlcnkpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5LnB1c2goa2V5ICsgJz0nICsgYXJncy5xdWVyeVtrZXldKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdXJsICs9IHF1ZXJ5LmpvaW4oJyYnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRlbXBsYXRpbmdcclxuICAgICAgICB2YXIgcGFydHMgPSB1cmwuc3BsaXQoJ3t7Jyk7XHJcbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZHMgPSBwYXJ0c1tpXS5pbmRleE9mKCd9fScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IHBhcnRzW2ldLnNsaWNlKDAsIGVuZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChBamF4LnBhcmFtc1trZXldID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gcmVwbGFjZVxyXG4gICAgICAgICAgICAgICAgcGFydHNbaV0gPSBBamF4LnBhcmFtc1trZXldICsgcGFydHNbaV0uc2xpY2UoZW5kcyArIDIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB1cmwgPSBwYXJ0cy5qb2luKCcnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG9wZW4gcmVxdWVzdFxyXG4gICAgICAgIHRoaXMuX3hoci5vcGVuKGFyZ3MubWV0aG9kIHx8ICdHRVQnLCB1cmwsIHRydWUpO1xyXG5cclxuICAgICAgICAvLyDov5Tlm57mlbDmja7mmK/lkKbkuLpqc29u5qC85byPXHJcbiAgICAgICAgdGhpcy5ub3RKc29uID0gYXJncy5ub3RKc29uIHx8IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBoZWFkZXIgZm9yIFBVVC9QT1NUXHJcbiAgICAgICAgaWYgKCFhcmdzLmlnbm9yZUNvbnRlbnRUeXBlICYmIChhcmdzLm1ldGhvZCA9PT0gJ1BVVCcgfHwgYXJncy5tZXRob2QgPT09ICdQT1NUJyB8fCBhcmdzLm1ldGhvZCA9PT0gJ0RFTEVURScpKVxyXG4gICAgICAgICAgICB0aGlzLl94aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcclxuXHJcbiAgICAgICAgLy8gVE9ETzog5p2D6ZmQaGVhZGVy5Y+C5pWwXHJcbiAgICAgICAgLy8gaWYgKGFyZ3MuYXV0aCAmJiBjb25maWcuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5feGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyBjb25maWcuYWNjZXNzVG9rZW4pO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgaWYgKGFyZ3MuaGVhZGVycykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gYXJncy5oZWFkZXJzKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5feGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBhcmdzLmhlYWRlcnNba2V5XSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzdHJpbmdpZnkgZGF0YSBpZiBuZWVkZWRcclxuICAgICAgICBpZiAoYXJncy5kYXRhICYmIHR5cGVvZiAoYXJncy5kYXRhKSAhPT0gJ3N0cmluZycgJiYgIShhcmdzLmRhdGEgaW5zdGFuY2VvZiBGb3JtRGF0YSkpIHtcclxuICAgICAgICAgICAgYXJncy5kYXRhID0gSlNPTi5zdHJpbmdpZnkoYXJncy5kYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG1ha2UgcmVxdWVzdFxyXG4gICAgICAgIHRoaXMuX3hoci5zZW5kKGFyZ3MuZGF0YSB8fCBudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9vbkxvYWQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3MgPSAxLjA7XHJcbiAgICAgICAgdGhpcy5lbWl0KCdwcm9ncmVzcycsIDEuMCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl94aHIuc3RhdHVzID09PSAyMDAgfHwgdGhpcy5feGhyLnN0YXR1cyA9PT0gMjAxKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vdEpzb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbG9hZCcsIHRoaXMuX3hoci5zdGF0dXMsIHRoaXMuX3hoci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UodGhpcy5feGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB0aGlzLl94aHIuc3RhdHVzIHx8IDAsIG5ldyBFcnJvcignaW52YWxpZCBqc29uJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbG9hZCcsIHRoaXMuX3hoci5zdGF0dXMsIGpzb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZSh0aGlzLl94aHIucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgIHZhciBtc2cgPSBqc29uLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1zZykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IGpzb24uZXJyb3IgfHwgKGpzb24ucmVzcG9uc2UgJiYganNvbi5yZXNwb25zZS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFtc2cpIHtcclxuICAgICAgICAgICAgICAgICAgICBtc2cgPSB0aGlzLl94aHIucmVzcG9uc2VUZXh0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB0aGlzLl94aHIuc3RhdHVzLCBtc2cpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHRoaXMuX3hoci5zdGF0dXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX29uRXJyb3IoZXZ0OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgMCwgZXZ0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9vbkFib3J0KGV2dDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIDAsIGV2dCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfb25Qcm9ncmVzcyhldnQ6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGlmICghZXZ0Lmxlbmd0aENvbXB1dGFibGUpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdmFyIHByb2dyZXNzID0gZXZ0LmxvYWRlZCAvIGV2dC50b3RhbDtcclxuXHJcbiAgICAgICAgaWYgKHByb2dyZXNzICE9PSB0aGlzLl9wcm9ncmVzcykge1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmVzcyA9IHByb2dyZXNzO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3Byb2dyZXNzJywgdGhpcy5fcHJvZ3Jlc3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWJvcnQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5feGhyLmFib3J0KCk7XHJcbiAgICB9XHJcblxyXG5cclxufSIsImltcG9ydCB7IEV2ZW50cyB9IGZyb20gXCIuL2V2ZW50c1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVkaXRvciBleHRlbmRzIEV2ZW50cyB7XHJcblxyXG4gIC8vIOebuOi+g+S6jkV2ZW50c++8jOWQjOS4gOS4quWHveaVsOWQjeWPquWPr+S7o+ihqOS4gOS4quWHveaVsO+8m1xyXG5cclxuICAvLyDmn5DkuKpuYW1l5a+55bqU55qE5p+Q5Liq5LqL5Lu277yMbmFtZeS4jkZ1bmN0aW9u5pivMeWvuTHnmoTlhbPns7vvvJtcclxuICBwcml2YXRlIF9ob29rczogeyBba2V5OiBzdHJpbmddOiBGdW5jdGlvbiB9ID0ge307XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmt7vliqDlhajlsYDlh73mlbDvvIzlh73mlbDlkI3kuI7lh73mlbDmnKzkvZPkuIDkuIDlr7nlupTvvIzkuI3og73ph43lkI3vvJtcclxuICAgKiBAcGFyYW0gbmFtZSDlh73mlbDlkI3vvJtcclxuICAgKiBAcGFyYW0gZm4g5Ye95pWw5pys5L2T77ybXHJcbiAgICovXHJcbiAgcHVibGljIG1ldGhvZChuYW1lOiBzdHJpbmcsIGZuOiBGdW5jdGlvbik6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2hvb2tzW25hbWVdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FuJ3Qgb3ZlcnJpZGUgaG9vazogXCIgKyBuYW1lKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2hvb2tzW25hbWVdID0gZm47XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICog56e76Zmk5p+Q5Liq5Ye95pWw77ybXHJcbiAgICogQHBhcmFtIG5hbWUg5Ye95pWw5ZCN77ybXHJcbiAgICovXHJcbiAgcHVibGljIG1ldGhvZFJlbW92ZShuYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIGRlbGV0ZSB0aGlzLl9ob29rc1tuYW1lXTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiDmiafooYzmn5DkuKrlh73mlbDvvJtcclxuICAgKiBAcGFyYW0gbmFtZSDlh73mlbDlkI3vvJtcclxuICAgKi9cclxuICBwdWJsaWMgY2FsbChuYW1lOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogYW55IHtcclxuICAgIGlmICh0aGlzLl9ob29rc1tuYW1lXSkge1xyXG4gICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9ob29rc1tuYW1lXS5hcHBseShudWxsLCBhcmdzKTtcclxuICAgICAgfSBjYXRjaCAoZXgpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgICAgXCIlYyVzICVjKGVkaXRvci5tZXRob2QgZXJyb3IpXCIsXHJcbiAgICAgICAgICBcImNvbG9yOiAjMDZmXCIsXHJcbiAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgXCJjb2xvcjogI2YwMFwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGV4LnN0YWNrKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfTtcclxufSIsImV4cG9ydCBjbGFzcyBFdmVudHMge1xyXG5cclxuICAgIC8vIOebuOi+g+S6jkVkaXRvcu+8jOWQjOS4gOS4quWHveaVsOWQjeWPr+WMheWQq+S4gOezu+WIl+WHveaVsO+8jOS4jeS7heS7heaYr+S4gOS4qu+8jOS4lOaciW9uY2Xlip/og73vvJtcclxuICBcclxuICAgIHB1YmxpYyBnZXQgc3VzcGVuZEV2ZW50cygpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3N1c3BlbmRFdmVudHM7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IHN1c3BlbmRFdmVudHModmFsOiBib29sZWFuKSB7XHJcbiAgICAgIHRoaXMuX3N1c3BlbmRFdmVudHMgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF9zdXNwZW5kRXZlbnRzOiBib29sZWFuID0gZmFsc2U7XHJcbiAgXHJcbiAgICAvLyDmn5DkuKpuYW1l5a+55bqU55qE5LqL5Lu25pWw57uE77yMbmFtZeS4jkZ1bmN0aW9u5pivMeWvueWkmueahOWFs+ezu++8m1xyXG4gICAgcHJpdmF0ZSBfZXZlbnRzOiB7IFtrZXk6IHN0cmluZ106IEZ1bmN0aW9uW10gfSA9IHt9O1xyXG4gIFxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gIFxyXG4gICAgfVxyXG4gIFxyXG4gICAgLyoqXHJcbiAgICAgKiDmt7vliqDkuovku7bmlbDnu4TvvIzoi6VuYW1l55u45ZCM77yM5YiZ5Zyo5pWw57uE5pyr5bC+57un57ut5re75Yqg77ybXHJcbiAgICAgKiBAcGFyYW0gbmFtZSDlh73mlbDlkI3vvJtcclxuICAgICAqIEBwYXJhbSBmbiDlh73mlbDmnKzkvZPvvJtcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uKG5hbWU6IHN0cmluZywgZm46IEZ1bmN0aW9uKTogRXZlbnRIYW5kbGUge1xyXG4gICAgICBsZXQgZXZlbnRzOiBGdW5jdGlvbltdID0gdGhpcy5fZXZlbnRzW25hbWVdO1xyXG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLl9ldmVudHNbbmFtZV0gPSBbZm5dO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChldmVudHMuaW5kZXhPZihmbikgPT0gLTEpIHtcclxuICAgICAgICAgIGV2ZW50cy5wdXNoKGZuKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG5ldyBFdmVudEhhbmRsZSh0aGlzLCBuYW1lLCBmbik7XHJcbiAgICB9XHJcbiAgXHJcbiAgICAvKipcclxuICAgICAqIGVtaXTlkI7lj6rmiafooYzkuIDmrKHvvJtcclxuICAgICAqIEBwYXJhbSBuYW1lIOWHveaVsOWQje+8m1xyXG4gICAgICogQHBhcmFtIGZuIOWHveaVsOacrOS9k++8m1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25jZShuYW1lOiBzdHJpbmcsIGZuOiBGdW5jdGlvbik6IEV2ZW50SGFuZGxlIHtcclxuICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG4gICAgICBsZXQgZXZ0OiBFdmVudEhhbmRsZSA9IHRoaXMub24obmFtZSwgZnVuY3Rpb24gKFxyXG4gICAgICAgIGFyZzA6IGFueSxcclxuICAgICAgICBhcmcxOiBhbnksXHJcbiAgICAgICAgYXJnMjogYW55LFxyXG4gICAgICAgIGFyZzM6IGFueSxcclxuICAgICAgICBhcmc0OiBhbnksXHJcbiAgICAgICAgYXJnNTogYW55LFxyXG4gICAgICAgIGFyZzY6IGFueSxcclxuICAgICAgICBhcmc3OiBhbnlcclxuICAgICAgKSB7XHJcbiAgICAgICAgZm4uY2FsbChzZWxmLCBhcmcwLCBhcmcxLCBhcmcyLCBhcmczLCBhcmc0LCBhcmc1LCBhcmc2LCBhcmc3KTtcclxuICAgICAgICBldnQudW5iaW5kKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gZXZ0O1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLyoqXHJcbiAgICAgKiDmiafooYzkuovku7bvvJtcclxuICAgICAqIEBwYXJhbSBuYW1lIOWHveaVsOWQje+8m1xyXG4gICAgICogQHBhcmFtIGFyZzAg5Ye95pWw5Y+C5pWwMe+8jOWPr+mAie+8m1xyXG4gICAgICogQHBhcmFtIGFyZzEg5Ye95pWw5Y+C5pWwMu+8jOWPr+mAie+8m1xyXG4gICAgICogQHBhcmFtIGFyZzIg5Ye95pWw5Y+C5pWwM++8jOWPr+mAie+8m1xyXG4gICAgICogQHBhcmFtIGFyZzMg5Ye95pWw5Y+C5pWwNO+8jOWPr+mAie+8m1xyXG4gICAgICogQHBhcmFtIGFyZzQg5Ye95pWw5Y+C5pWwNe+8jOWPr+mAie+8m1xyXG4gICAgICogQHBhcmFtIGFyZzUg5Ye95pWw5Y+C5pWwNu+8jOWPr+mAie+8m1xyXG4gICAgICogQHBhcmFtIGFyZzYg5Ye95pWw5Y+C5pWwN++8jOWPr+mAie+8m1xyXG4gICAgICogQHBhcmFtIGFyZzcg5Ye95pWw5Y+C5pWwOO+8jOWPr+mAie+8m1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZW1pdChuYW1lOiBzdHJpbmcsXHJcbiAgICAgIGFyZzA/OiBhbnksXHJcbiAgICAgIGFyZzE/OiBhbnksXHJcbiAgICAgIGFyZzI/OiBhbnksXHJcbiAgICAgIGFyZzM/OiBhbnksXHJcbiAgICAgIGFyZzQ/OiBhbnksXHJcbiAgICAgIGFyZzU/OiBhbnksXHJcbiAgICAgIGFyZzY/OiBhbnksXHJcbiAgICAgIGFyZzc/OiBhbnlcclxuICAgICk6IEV2ZW50cyB7XHJcbiAgICAgIGlmICh0aGlzLl9zdXNwZW5kRXZlbnRzKSByZXR1cm4gdGhpcztcclxuICBcclxuICAgICAgbGV0IGV2ZW50czogRnVuY3Rpb25bXSA9IHRoaXMuX2V2ZW50c1tuYW1lXTtcclxuICAgICAgaWYgKCFldmVudHMpIHJldHVybiB0aGlzO1xyXG4gIFxyXG4gICAgICAvLyDov5Tlm57mlrDmlbDnu4RcclxuICAgICAgZXZlbnRzID0gZXZlbnRzLnNsaWNlKDApO1xyXG4gIFxyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgZXZlbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKCFldmVudHNbaV0pIGNvbnRpbnVlO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBldmVudHNbaV0uY2FsbCh0aGlzLCBhcmcwLCBhcmcxLCBhcmcyLCBhcmczLCBhcmc0LCBhcmc1LCBhcmc2LCBhcmc3KTtcclxuICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgY29uc29sZS5pbmZvKFwiJWMlcyAlYyhldmVudCBlcnJvcilcIiwgXCJjb2xvcjogIzA2ZlwiLCBuYW1lLCBcImNvbG9yOiAjZjAwXCIpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXguc3RhY2spO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gIFxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgXHJcbiAgICAvKipcclxuICAgICAqIOWPlua2iEV2ZW50c+S6i+S7tue7keWumu+8jOiLpW5hbWXkuLrnqbrvvIzliJnmuIXnqbpldmVudHPvvJtcclxuICAgICAqIEBwYXJhbSBuYW1lIOWHveaVsOWQje+8m1xyXG4gICAgICogQHBhcmFtIGZuIOWHveaVsOacrOS9k++8m1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdW5iaW5kKG5hbWU/OiBzdHJpbmcsIGZuPzogRnVuY3Rpb24pOiBFdmVudHMge1xyXG4gICAgICBpZiAobmFtZSkge1xyXG4gICAgICAgIGxldCBldmVudHM6IEZ1bmN0aW9uW10gPSB0aGlzLl9ldmVudHNbbmFtZV07XHJcbiAgICAgICAgaWYgKCFldmVudHMpIHJldHVybiB0aGlzO1xyXG4gIFxyXG4gICAgICAgIGlmIChmbikge1xyXG4gICAgICAgICAgbGV0IGk6IG51bWJlciA9IGV2ZW50cy5pbmRleE9mKGZuKTtcclxuICAgICAgICAgIGlmIChpICE9PSAtMSkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnRzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbbmFtZV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZXZlbnRzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW25hbWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9ldmVudHMgPSB7fTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgXHJcbiAgfVxyXG4gIFxyXG4gIFxyXG4gIGV4cG9ydCBjbGFzcyBFdmVudEhhbmRsZSB7XHJcbiAgXHJcbiAgICBwdWJsaWMgbmFtZTogTnVsbGFibGU8c3RyaW5nPjtcclxuICBcclxuICAgIHB1YmxpYyBvd25lcjogTnVsbGFibGU8RXZlbnRzPjtcclxuICBcclxuICAgIHB1YmxpYyBmbjogTnVsbGFibGU8RnVuY3Rpb24+O1xyXG4gIFxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKG93bmVyOiBFdmVudHMsIG5hbWU6IHN0cmluZywgZm46IEZ1bmN0aW9uKSB7XHJcbiAgICAgIHRoaXMub3duZXIgPSBvd25lcjtcclxuICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgdGhpcy5mbiA9IGZuO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgcHVibGljIHVuYmluZCgpOiB2b2lkIHtcclxuICAgICAgaWYgKCF0aGlzLm93bmVyKSByZXR1cm47XHJcbiAgXHJcbiAgICAgIHRoaXMub3duZXIudW5iaW5kKHRoaXMubmFtZSEsIHRoaXMuZm4hKTtcclxuICBcclxuICAgICAgdGhpcy5vd25lciA9IG51bGw7XHJcbiAgICAgIHRoaXMubmFtZSA9IG51bGw7XHJcbiAgICAgIHRoaXMuZm4gPSBudWxsO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgcHVibGljIGNhbGwoKTogdm9pZCB7XHJcbiAgICAgIGlmICghdGhpcy5mbikgcmV0dXJuO1xyXG4gIFxyXG4gICAgICB0aGlzLmZuLmNhbGwoXHJcbiAgICAgICAgdGhpcy5vd25lciEsXHJcbiAgICAgICAgYXJndW1lbnRzWzBdLFxyXG4gICAgICAgIGFyZ3VtZW50c1sxXSxcclxuICAgICAgICBhcmd1bWVudHNbMl0sXHJcbiAgICAgICAgYXJndW1lbnRzWzNdLFxyXG4gICAgICAgIGFyZ3VtZW50c1s0XSxcclxuICAgICAgICBhcmd1bWVudHNbNV0sXHJcbiAgICAgICAgYXJndW1lbnRzWzZdLFxyXG4gICAgICAgIGFyZ3VtZW50c1s3XVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgcHVibGljIG9uKG5hbWU6IHN0cmluZywgZm46IEZ1bmN0aW9uKTogRXZlbnRIYW5kbGUge1xyXG4gICAgICByZXR1cm4gdGhpcy5vd25lciEub24obmFtZSwgZm4pO1xyXG4gICAgfVxyXG4gIFxyXG4gIH0iLCJleHBvcnQgY2xhc3MgR1VJRCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliJvlu7pHVUlE5ZSv5LiA5qCH5b+X77yM5rOo5oSP77ya6YeH55So5aSn5pWw5rOV77yM5pyJ5b6I5bCP55qE5Y+v6IO95oCn5Lya6YeN5aSN77yM5LiA6Iis5aSf55So77ybXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgciA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDAsXHJcbiAgICAgICAgICB2ID0gKGMgPT09ICd4JykgPyByIDogKHIgJiAweDMgfCAweDgpO1xyXG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgfSIsImV4cG9ydCAqIGZyb20gJy4vZXZlbnRzJztcclxuZXhwb3J0ICogZnJvbSAnLi9lZGl0b3InO1xyXG5leHBvcnQgKiBmcm9tICcuL29ic2VydmVyJztcclxuZXhwb3J0ICogZnJvbSAnLi90b29scyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vZ3VpZCc7XHJcbmV4cG9ydCAqIGZyb20gJy4vYWpheCc7IiwiaW1wb3J0IHsgRXZlbnRzIH0gZnJvbSAnLi9ldmVudHMnO1xyXG5cclxuLy8gIFRPRE/vvJog5b2T5YmN5pqC5LiN6ICD6JmR6LWL5YC85Lya6LaF5Ye6546w5pyJ57G75Z6L55qE5oOF5Ya177yM5q+U5aaC5Y6f5p2l5piv5LiqbnVtYmVy77yM6LWL5YC85Li65LqGYXJyYXnvvJtcclxuZXhwb3J0IGNsYXNzIE9ic2VydmVyIGV4dGVuZHMgRXZlbnRzIHtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGNsYXNzTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAnT2JzZXJ2ZXInO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvcmlnaW46IGFueTtcclxuXHJcbiAgICBwcml2YXRlIFNFUEFSQVRPUjogc3RyaW5nID0gJy4nO1xyXG5cclxuXHJcbiAgICBwcml2YXRlIF9kZXN0cm95ZWQ6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgX3BhdGg6IHN0cmluZztcclxuICAgIC8vIFRPRE9cclxuICAgIHB1YmxpYyBfa2V5czogc3RyaW5nW107IC8vIOiusOW9leWvueixoeeahGtleeOAgXZhbHVl5YC877ybXHJcblxyXG5cclxuICAgIHB1YmxpYyBfZGF0YTogeyBba2V5OiBzdHJpbmddOiBhbnkgfTsgLy8g6YeH55So5q2k5a+56LGh77yM5a6M5pW06K6w5b2V5omA5pyJ5YC877ybXHJcbiAgICBwdWJsaWMgX2RhdGEyOiB7IFtrZXk6IHN0cmluZ106IGFueSB9OyAvLyDph4fnlKjmraTlr7nosaHvvIzlrozmlbTorrDlvZXmiYDmnInlgLzvvJtcclxuICAgIHB1YmxpYyBfZGF0YVR5cGU6IHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9ID0ge307IC8vIOaaguaXtuWPquWIpOaWreaYr+WQpuS4umFycmF55YiG5ouG6ICM5oiQ55qE57G75Z6L77ybXHJcbiAgICBwdWJsaWMgX2RhdGFUeXBlMjogeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0gPSB7fTsgLy8g5pqC5pe25Y+q5Yik5pat5piv5ZCm5Li6YXJyYXnliIbmi4bogIzmiJDnmoTnsbvlnovvvJtcclxuXHJcblxyXG5cclxuXHJcbiAgICBwdWJsaWMgX3BhcmVudDogYW55OyAvLyDlvZPliY3niLbniankvZNcclxuICAgIC8vIHB1YmxpYyBfcGFyZW50UGF0aDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfcGFyZW50RmllbGQ6IGFueTtcclxuICAgIHByaXZhdGUgX3BhcmVudEtleTogYW55O1xyXG5cclxuICAgIHByaXZhdGUgX3NpbGVudDogYm9vbGVhbjtcclxuXHJcbiAgICBwdWJsaWMgaGlzdG9yeSE6IEhpc3Rvcnk7XHJcbiAgICAvLyBwcml2YXRlIHN5bmMhOiBIaXN0b3J5O1xyXG5cclxuICAgIHB1YmxpYyBub2RlOiBhbnkgPSBudWxsO1xyXG5cclxuICAgIHB1YmxpYyByZXBhcmVudGluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfcGF0aHNXaXRoRHVwbGljYXRlczogeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0gPSB7fTtcclxuXHJcbiAgICAvLyBlbnRpdHksIGFzc2V0cywgY29tcG9uZW50czogc2NyaXB0LCDkuIDoiKxjb21wb25lbnRzLCBzZWxlY3RvciwgaGlzdG9yeVxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGRhdGE6IGFueSwgb3B0aW9ucz86IGFueSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMub3JpZ2luID0gZGF0YTtcclxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIHRoaXMuX2Rlc3Ryb3llZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3BhdGggPSAnJztcclxuICAgICAgICB0aGlzLl9rZXlzID0gW107XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IHt9O1xyXG5cclxuICAgICAgICB0aGlzLl9kYXRhMiA9IHt9O1xyXG5cclxuICAgICAgICAvLyBhcnJheSBwYXRocyB3aGVyZSBkdXBsaWNhdGUgZW50cmllcyBhcmUgYWxsb3dlZCAtIG5vcm1hbGx5XHJcbiAgICAgICAgLy8gd2UgY2hlY2sgaWYgYW4gYXJyYXkgYWxyZWFkeSBoYXMgYSB2YWx1ZSBiZWZvcmUgaW5zZXJ0aW5nIGl0XHJcbiAgICAgICAgLy8gYnV0IGlmIHRoZSBhcnJheSBwYXRoIGlzIGluIGhlcmUgd2UnbGwgYWxsb3cgaXRcclxuICAgICAgICBpZiAob3B0aW9ucy5wYXRoc1dpdGhEdXBsaWNhdGVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhdGhzV2l0aER1cGxpY2F0ZXMgPSB7fTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25zLnBhdGhzV2l0aER1cGxpY2F0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BhdGhzV2l0aER1cGxpY2F0ZXNbb3B0aW9ucy5wYXRoc1dpdGhEdXBsaWNhdGVzW2ldXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucGF0Y2hEYXRhKGRhdGEpO1xyXG5cclxuICAgICAgICAvLyBmb3IgKGxldCBrZSBpbiB0aGlzLl9kYXRhKSB7XHJcbiAgICAgICAgLy8gICBkZWJ1Zy5sb2coJ2tleTogJyArIGtlKTtcclxuICAgICAgICAvLyAgIGRlYnVnLmxvZyh0aGlzLl9kYXRhW2tlXSk7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAvLyB0aGlzLl9wYXJlbnQgPSBvcHRpb25zLnBhcmVudCB8fCBudWxsO1xyXG4gICAgICAgIC8vIHRoaXMuX3BhcmVudFBhdGggPSBvcHRpb25zLnBhcmVudFBhdGggfHwgJyc7XHJcbiAgICAgICAgLy8gdGhpcy5fcGFyZW50RmllbGQgPSBvcHRpb25zLnBhcmVudEZpZWxkIHx8IG51bGw7XHJcbiAgICAgICAgLy8gdGhpcy5fcGFyZW50S2V5ID0gb3B0aW9ucy5wYXJlbnRLZXkgfHwgbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5fc2lsZW50ID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBhdGNoRGF0YShkYXRhOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIGRlYnVnLndhcm4odGhpcy5jbGFzc05hbWUgKyAnOiDkuI3mmK/mraPnoa7nmoRqc29u5a+56LGh77yM5omT5Y2w77yaXFxuJyArIGRhdGEpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGRhdGFba2V5XSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgIC8vIOWvueixoeWxnuaAp1xyXG4gICAgICAgICAgICAgICAgLy8gZGVidWcubG9nKCflr7nosaHlsZ7mgKfvvJonICsga2V5KTtcclxuICAgICAgICAgICAgICAgIC8vIGRlYnVnLmxvZyhkYXRhW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5fcHJlcGFyZSh0aGlzLCBrZXksIGRhdGFba2V5XSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlck9iamVjdChrZXksIGtleSwgZGF0YVtrZXldKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOS4gOiIrOWxnuaAp1xyXG4gICAgICAgICAgICAgICAgLy8gZGVidWcubG9nKCfkuIDoiKzlsZ7mgKfvvJonICsga2V5KTtcclxuICAgICAgICAgICAgICAgIC8vIGRlYnVnLmxvZyhkYXRhW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCBkYXRhW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGF0YVR5cGVba2V5XSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGF0YVR5cGUyW2tleV0gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuc2V0KGtleSwgZGF0YVtrZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPOiDoi6Xorr7nva7lgLzkuLpvYmplY3TvvIzpnIDopoHlho1wYXJzZVxyXG4gICAgcHVibGljIHNldChwYXRoOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAvLyBjb25zb2xlLndhcm4ocGF0aCArICcgOiAnICsgdmFsdWUpO1xyXG4gICAgICAgIGxldCBvbGRWYWx1ZSA9IHRoaXMuX2RhdGFbcGF0aF07XHJcbiAgICAgICAgLy8gY29uc29sZS53YXJuKHBhdGgpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUud2Fybih2YWx1ZSk7XHJcbiAgICAgICAgbGV0IGtleXMgPSBwYXRoLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgbGV0IHBhcmVudElEID0gJyc7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50SUQgPSBrZXlzW2ldO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50SUQgKz0gdGhpcy5TRVBBUkFUT1IgKyBrZXlzW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOaVsOe7hOWkhOeQhu+8jOWFtuS7luW9ouW8j+aaguS4jeiAg+iZkVxyXG4gICAgICAgIGlmIChrZXlzLmxlbmd0aCA+IDEgJiYgdGhpcy5fZGF0YVR5cGVbcGF0aF0pIHtcclxuICAgICAgICAgICAgbGV0IGluZGV4ID0gcGFyc2VJbnQoa2V5c1trZXlzLmxlbmd0aCAtIDFdKTtcclxuICAgICAgICAgICAgdGhpcy5fZGF0YVtwYXRoXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAvLyDkuIrkuIDnuqfmlbDnu4Tkv67mlLlcclxuICAgICAgICAgICAgdGhpcy5fZGF0YVtwYXJlbnRJRF1baW5kZXhdID0gdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgLy8gICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMCk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgdGhpcy5fZGF0YVtwYXRoXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNoaWxkRGF0YShwYXRoLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGEyW3BhdGhdID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUud2Fybih0aGlzLl9kYXRhKTtcclxuXHJcbiAgICAgICAgLy8gaWYgKHBhcmVudElEICYmIHRoaXMuX2RhdGFUeXBlMltwYXJlbnRJRF0gJiYgdGhpcy5pc051bWJlcihrZXlzW2tleXMubGVuZ3RoIC0gMV0pKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuX2RhdGEyW3BhcmVudElEXVtwYXJzZUludChrZXlzW2tleXMubGVuZ3RoIC0gMV0pXSA9IHZhbHVlO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgdGhpcy5lbWl0KHBhdGggKyAnOnNldCcsIHZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5lbWl0KCcqOnNldCcsIHBhdGgsIHZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc051bWJlcihzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHZhciBuID0gTnVtYmVyKHN0cik7XHJcbiAgICAgICAgcmV0dXJuICFpc05hTihuKSA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUNoaWxkRGF0YShwYXRoOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5fZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKHBhdGggKyB0aGlzLlNFUEFSQVRPUikpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fZGF0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9kYXRhVHlwZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBuZXdQYXRoID0gJyc7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIG5ld1BhdGggPSBwYXRoICsgdGhpcy5TRVBBUkFUT1IgKyBpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhW25ld1BhdGhdID0gdmFsdWVbaV07XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhVHlwZVtuZXdQYXRoXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ET1xyXG4gICAgcHVibGljIHVuc2V0KHBhdGg6IHN0cmluZywgdmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHBhdGggKyAnIDogJyArIHZhbHVlKTtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzKHBhdGgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG9sZFZhbHVlID0gdGhpcy5fZGF0YVtwYXRoXTtcclxuICAgICAgICBkZWxldGUgdGhpcy5fZGF0YVtwYXRoXTtcclxuICAgICAgICBkZWxldGUgdGhpcy5fZGF0YVR5cGVbcGF0aF07XHJcblxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9kYXRhMltwYXRoXTtcclxuICAgICAgICBkZWxldGUgdGhpcy5fZGF0YVR5cGUyW3BhdGhdO1xyXG5cclxuICAgICAgICB0aGlzLmVtaXQocGF0aCArICc6c2V0JywgdmFsdWUsIG9sZFZhbHVlKTtcclxuICAgICAgICB0aGlzLmVtaXQoJyo6c2V0JywgcGF0aCwgdmFsdWUsIG9sZFZhbHVlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Zyo5pWw57uE55qE5p+Q5Liq5oyH5a6a5L2N572u5aKe5Yqg5YC8XHJcbiAgICBwdWJsaWMgaW5zZXJ0KHBhdGg6IHN0cmluZywgdmFsdWU6IGFueSwgaW5kOiBudW1iZXIgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcclxuICAgICAgICAvLyBjb25zb2xlLmVycm9yKHBhdGggKyAnOmluc2VydC12YWx1ZTogJyArIHZhbHVlKTtcclxuICAgICAgICAvLyBjb25zb2xlLndhcm4odGhpcy5fZGF0YSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhcyhwYXRoKSB8fCAhKHRoaXMuX2RhdGFbcGF0aF0gaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYXJyID0gdGhpcy5fZGF0YVtwYXRoXTtcclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiAoIXRoaXMuX3BhdGhzV2l0aER1cGxpY2F0ZXMgfHwgIXRoaXMuX3BhdGhzV2l0aER1cGxpY2F0ZXNbcGF0aF0pIHtcclxuICAgICAgICAvLyAgICAgaWYgKGFyci5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBpZiAoaW5kID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgYXJyLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICBpbmQgPSBhcnIubGVuZ3RoIC0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhcnIuc3BsaWNlKGluZCwgMCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZUNoaWxkRGF0YShwYXRoLCBhcnIpO1xyXG4gICAgICAgIC8vIFRPRE9cclxuICAgICAgICAvLyBsZXQgYXJyMiA9IHRoaXMuX2RhdGEyW3BhdGhdO1xyXG4gICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoYXJyMik7XHJcbiAgICAgICAgLy8gaWYgKGFycjIpIHtcclxuICAgICAgICAvLyAgICAgLy8gaWYgKCF0aGlzLl9wYXRoc1dpdGhEdXBsaWNhdGVzIHx8ICF0aGlzLl9wYXRoc1dpdGhEdXBsaWNhdGVzW3BhdGhdKSB7XHJcbiAgICAgICAgLy8gICAgIC8vICAgICBpZiAoYXJyMi5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcclxuICAgICAgICAvLyAgICAgLy8gICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8gICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICAgIC8vIH1cclxuICAgICAgICAvLyAgICAgaWYgKGluZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBhcnIyLnB1c2godmFsdWUpO1xyXG4gICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICAgYXJyMi5zcGxpY2UoaW5kLCAwLCB2YWx1ZSk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gY29uc29sZS5lcnJvcihhcnIyKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBjb25zb2xlLndhcm4odGhpcy5fZGF0YSk7XHJcbiAgICAgICAgdGhpcy5lbWl0KHBhdGggKyAnOmluc2VydCcsIHZhbHVlLCBpbmQpO1xyXG4gICAgICAgIHRoaXMuZW1pdCgnKjppbnNlcnQnLCBwYXRoLCB2YWx1ZSwgaW5kKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Yig6Zmk5pWw57uE5oyH5a6a5p+Q5Liq5bqP5Y+355qE5YC8XHJcbiAgICBwdWJsaWMgcmVtb3ZlKHBhdGg6IHN0cmluZywgaW5kOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzKHBhdGgpIHx8ICEodGhpcy5fZGF0YVtwYXRoXSBpbnN0YW5jZW9mIEFycmF5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhcnIgPSB0aGlzLl9kYXRhW3BhdGhdO1xyXG4gICAgICAgIGlmIChhcnIubGVuZ3RoIDwgaW5kKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgbGV0IHZhbHVlID0gYXJyW2luZF07XHJcbiAgICAgICAgYXJyLnNwbGljZShpbmQsIDEpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQ2hpbGREYXRhKHBhdGgsIGFycik7XHJcblxyXG4gICAgICAgIC8vIFRPRE9cclxuICAgICAgICAvLyBsZXQgYXJyMiA9IHRoaXMuX2RhdGEyW3BhdGhdO1xyXG4gICAgICAgIC8vIGlmIChhcnIyICYmIGFycjIubGVuZ3RoID49IGluZCkge1xyXG4gICAgICAgIC8vICAgICBhcnIyLnNwbGljZShpbmQsIDEpO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgdGhpcy5lbWl0KHBhdGggKyAnOnJlbW92ZScsIHZhbHVlLCBpbmQpO1xyXG4gICAgICAgIHRoaXMuZW1pdCgnKjpyZW1vdmUnLCBwYXRoLCB2YWx1ZSwgaW5kKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDliKDpmaTmlbDnu4TkuK3nmoTmn5DkuKp2YWx1ZeWAvFxyXG4gICAgcHVibGljIHJlbW92ZVZhbHVlKHBhdGg6IHN0cmluZywgdmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghdGhpcy5oYXMocGF0aCkgfHwgISh0aGlzLl9kYXRhW3BhdGhdIGluc3RhbmNlb2YgQXJyYXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGFyciA9IHRoaXMuX2RhdGFbcGF0aF07XHJcbiAgICAgICAgbGV0IGluZCA9IGFyci5pbmRleE9mKHZhbHVlKTtcclxuICAgICAgICBpZiAoaW5kID09PSAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBvbGRWYWx1ZSA9IGFycltpbmRdO1xyXG4gICAgICAgIGFyci5zcGxpY2UoaW5kLCAxKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNoaWxkRGF0YShwYXRoLCBhcnIpO1xyXG5cclxuICAgICAgICAvLyBUT0RPXHJcbiAgICAgICAgLy8gbGV0IGFycjIgPSB0aGlzLl9kYXRhMltwYXRoXTtcclxuICAgICAgICAvLyBpZiAoYXJyMiAmJiBpbmQgPj0gMCkge1xyXG4gICAgICAgIC8vICAgICBhcnIyLnNwbGljZShpbmQsIDEpO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgLy8gY29uc29sZS53YXJuKCfliKDpmaQnKTtcclxuICAgICAgICAvLyBjb25zb2xlLndhcm4odGhpcy5fZGF0YSk7XHJcbiAgICAgICAgLy8gY29uc29sZS53YXJuKHRoaXMuX2RhdGEyKTtcclxuXHJcbiAgICAgICAgdGhpcy5lbWl0KHBhdGggKyAnOnJlbW92ZScsIG9sZFZhbHVlLCBpbmQpO1xyXG4gICAgICAgIHRoaXMuZW1pdCgnKjpyZW1vdmUnLCBwYXRoLCBvbGRWYWx1ZSwgaW5kKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBtb3ZlKHBhdGg6IHN0cmluZywgaW5kT2xkOiBudW1iZXIsIGluZE5ldzogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhcyhwYXRoKSB8fCAhKHRoaXMuX2RhdGFbcGF0aF0gaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGluZE5ldzIgPSBpbmROZXc7XHJcblxyXG4gICAgICAgIGxldCBhcnIgPSB0aGlzLl9kYXRhW3BhdGhdO1xyXG4gICAgICAgIGlmIChhcnIubGVuZ3RoIDwgaW5kT2xkIHx8IGFyci5sZW5ndGggPCBpbmROZXcgfHwgaW5kT2xkID09PSBpbmROZXcpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBsZXQgb2xkVmFsdWUgPSBhcnJbaW5kT2xkXVxyXG4gICAgICAgIGFyci5zcGxpY2UoaW5kT2xkLCAxKTtcclxuICAgICAgICBpZiAoaW5kTmV3ID09PSAtMSkgaW5kTmV3ID0gYXJyLmxlbmd0aDtcclxuICAgICAgICBhcnIuc3BsaWNlKGluZE5ldywgMCwgb2xkVmFsdWUpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQ2hpbGREYXRhKHBhdGgsIGFycik7XHJcblxyXG4gICAgICAgIC8vIFRPRE9cclxuICAgICAgICAvLyBsZXQgYXJyMiA9IHRoaXMuX2RhdGEyW3BhdGhdO1xyXG4gICAgICAgIC8vIGlmIChhcnIyKSB7XHJcbiAgICAgICAgLy8gICAgIGlmIChhcnIyLmxlbmd0aCA8IGluZE9sZCB8fCBhcnIyLmxlbmd0aCA8IGluZE5ldzIgfHwgaW5kT2xkID09PSBpbmROZXcyKSB7XHJcblxyXG4gICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICAgbGV0IG9sZFZhbHVlMiA9IGFycjJbaW5kT2xkXVxyXG4gICAgICAgIC8vICAgICAgICAgYXJyMi5zcGxpY2UoaW5kT2xkLCAxKTtcclxuICAgICAgICAvLyAgICAgICAgIGlmIChpbmROZXcyID09PSAtMSkgaW5kTmV3MiA9IGFycjIubGVuZ3RoO1xyXG4gICAgICAgIC8vICAgICAgICAgYXJyMi5zcGxpY2UoaW5kTmV3MiwgMCwgb2xkVmFsdWUyKTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgdGhpcy5lbWl0KHBhdGggKyAnOm1vdmUnLCBvbGRWYWx1ZSwgaW5kTmV3LCBpbmRPbGQpO1xyXG4gICAgICAgIHRoaXMuZW1pdCgnKjptb3ZlJywgcGF0aCwgb2xkVmFsdWUsIGluZE5ldywgaW5kT2xkKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcGFyc2VyT2JqZWN0KHByZWZpeDogc3RyaW5nLCBrZXk6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8vIOWFiOS/neWtmOS4gOS7vVxyXG4gICAgICAgIHRoaXMuc2V0KHByZWZpeCwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuX2RhdGFUeXBlW3ByZWZpeF0gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IHBhdGg6IHN0cmluZztcclxuICAgICAgICBsZXQgdHlwZTogc3RyaW5nID0gdHlwZW9mIHZhbHVlO1xyXG5cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kYXRhVHlwZTJbcHJlZml4XSA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHBhdGggPSBwcmVmaXggKyB0aGlzLlNFUEFSQVRPUiArIGkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KHBhdGgsIHZhbHVlW2ldKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFUeXBlW3BhdGhdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vIOaVsOe7hOWFg+e0oOi/mOaYr+WvueixoeeahOaDheWGteaaguaXtuS4jeWkhOeQhlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQga2V5MiBpbiB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZVtrZXkyXSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDpgJLlvZLop6PmnpBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlck9iamVjdChwcmVmaXggKyB0aGlzLlNFUEFSQVRPUiArIGtleTIsIGtleTIsIHZhbHVlW2tleTJdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHByZWZpeCArIHRoaXMuU0VQQVJBVE9SICsga2V5MjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldChwYXRoLCB2YWx1ZVtrZXkyXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGF0YVR5cGVbcGF0aF0gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kYXRhVHlwZTJbcHJlZml4XSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOebruWJjeeci++8jG51bGzlkox1bmRlZmluZWTkvJrnu4/ov4fov5nph4xcclxuICAgICAgICAgICAgLy8gZGVidWcud2Fybih0aGlzLmNsYXNzTmFtZSArICcucGFyc2VyT2JqZWN0LCDkuLrmraLmlbDmja7nsbvlnos6JyArIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBoYXMocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGggaW4gdGhpcy5fZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0KHBhdGg6IHN0cmluZyk6IGFueSB7XHJcbiAgICAgICAgaWYgKHBhdGggaW4gdGhpcy5fZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YVtwYXRoXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHByb3BhZ2F0ZShldnQ6IGFueSkge1xyXG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHBhdGg6IHN0cmluZywgYXJnMTogYW55LCBhcmcyOiBhbnksIGFyZzM6IGFueSkge1xyXG4gICAgICAgICAgICBpZiAoIXRoYXQuX3BhcmVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgbGV0IGtleSA9IHRoYXQuX3BhcmVudEtleTtcclxuICAgICAgICAgICAgaWYgKCFrZXkgJiYgdGhhdC5fcGFyZW50RmllbGQgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAga2V5ID0gdGhhdC5fcGFyZW50RmllbGQuaW5kZXhPZih0aGF0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAtMSkgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBwYXRoID0gdGhhdC5fcGFyZW50UGF0aCArICcuJyArIGtleSArICcuJyArIHBhdGg7XHJcblxyXG4gICAgICAgICAgICBsZXQgc3RhdGU7XHJcbiAgICAgICAgICAgIGlmICh0aGF0Ll9zaWxlbnQpIHN0YXRlID0gdGhhdC5fcGFyZW50LnNpbGVuY2UoKTtcclxuXHJcbiAgICAgICAgICAgIHRoYXQuX3BhcmVudC5lbWl0KHBhdGggKyAnOicgKyBldnQsIGFyZzEsIGFyZzIsIGFyZzMpO1xyXG4gICAgICAgICAgICB0aGF0Ll9wYXJlbnQuZW1pdCgnKjonICsgZXZ0LCBwYXRoLCBhcmcxLCBhcmcyLCBhcmczKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGF0Ll9zaWxlbnQpIHRoYXQuX3BhcmVudC5zaWxlbmNlUmVzdG9yZShzdGF0ZSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Rlc3Ryb3llZCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuX2Rlc3Ryb3llZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5lbWl0KCdkZXN0cm95Jyk7XHJcbiAgICAgICAgdGhpcy51bmJpbmQoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBIaXN0b3J5IHtcclxuICAgIGVuYWJsZWQ/OiBib29sZWFuO1xyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBUb29scyB7XHJcblxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZXVsZXJBbmdsZVRvUmFkaWFuKHZhbDogQkFCWUxPTi5WZWN0b3IzKTogQkFCWUxPTi5WZWN0b3IzIHtcclxuICAgICAgICBsZXQgcGFyYTogbnVtYmVyID0gTWF0aC5QSSAvIDE4MDtcclxuICAgICAgICByZXR1cm4gdmFsLm11bHRpcGx5QnlGbG9hdHMocGFyYSwgcGFyYSwgcGFyYSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyByYWRpYW5Ub0V1bGVyQW5nbGUodmFsOiBCQUJZTE9OLlZlY3RvcjMpOiBCQUJZTE9OLlZlY3RvcjMge1xyXG4gICAgICAgIGxldCBwYXJhOiBudW1iZXIgPSAxODAgLyBNYXRoLlBJO1xyXG4gICAgICAgIHJldHVybiB2YWwubXVsdGlwbHlCeUZsb2F0cyhwYXJhLCBwYXJhLCBwYXJhKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHZlY3RvcjNUb0FycmF5KHZhbDogQkFCWUxPTi5WZWN0b3IzKTogbnVtYmVyW10ge1xyXG4gICAgICAgIHJldHVybiBbdmFsLngsIHZhbC55LCB2YWwuel07XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbn0iLCJpbXBvcnQgeyBCYWJ5bG9uTG9hZGVyLCBDb25maWcsIEdhbWUgfSBmcm9tICcuL2dhbWUnO1xyXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuL2xpYic7XHJcblxyXG5leHBvcnQgKiBmcm9tICcuL2luZGV4JztcclxuXHJcbmxldCBnYW1lITogR2FtZTtcclxubGV0IGluaXRGbGFnOiBib29sZWFuID0gZmFsc2U7XHJcbmxldCBkYXRhTG9hZGVkOiBib29sZWFuID0gZmFsc2U7XHJcbmxldCBkYXRhTG9hZGVkMjogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuLy8gbGV0IHBhdGgxOiBzdHJpbmcgPSAnJztcclxuLy8gbGV0IHBhdGgyOiBzdHJpbmcgPSAnJztcclxubGV0IGRhdGFzOiBhbnk7XHJcblxyXG4vLyDmt7vliqDliLDlhajlsYDlj5jph49cclxud2luZG93LmVkaXRvciA9IG5ldyBFZGl0b3IoKTtcclxuLy8gaWYgKHR5cGVvZiBTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGggIT0gJ2Z1bmN0aW9uJykge1xyXG4vLyAgICAgU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoID0gZnVuY3Rpb24gKHByZWZpeCkge1xyXG4vLyAgICAgICAgIHJldHVybiB0aGlzLnNsaWNlKDAsIHByZWZpeC5sZW5ndGgpID09PSBwcmVmaXg7XHJcbi8vICAgICB9O1xyXG4vLyB9XHJcblxyXG52YXIgcHJvamVjdElEID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cmluZyg5KTtcclxuXHJcbi8qKlxyXG4gKiDliJ3lp4vljJblhaXlj6PvvJtcclxuICovXHJcbmZ1bmN0aW9uIGluaXRHYW1lKCk6IHZvaWQge1xyXG4gICAgbGV0IGNhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVuZGVyQ2FudmFzJyk7XHJcbiAgICBsZXQgZnBzTGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnBzTGFiZWwnKTtcclxuICAgIGlmIChjYW52YXMgIT09IG51bGwgJiYgZnBzTGFiZWwgIT09IG51bGwpIHtcclxuICAgICAgICBnYW1lID0gbmV3IEdhbWUoY2FudmFzLCBmcHNMYWJlbCk7XHJcbiAgICAgICAgZ2FtZS5jcmVhdGVTY2VuZShkYXRhcykuYW5pbWF0ZSgpOyAgLy8g6ZO+5byP6LCD55SoXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJ1bkJ0bigpOiB2b2lkIHtcclxuICAgIGlmIChnYW1lKSB7XHJcbiAgICAgICAgZ2FtZS5jcmVhdGVTY2VuZShkYXRhcykuYW5pbWF0ZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVEZWJ1ZygpOiB2b2lkIHtcclxuICAgIGlmIChnYW1lKSB7XHJcbiAgICAgICAgZ2FtZS50b2dnbGVEZWJ1ZygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaW5pdCgpOiB2b2lkIHtcclxuICAgIC8vIOetieW+heihqOagvOaVsOaNruWKoOi9veWujOaIkFxyXG4gICAgaWYgKGRhdGFMb2FkZWQgJiYgZGF0YUxvYWRlZDIpIHtcclxuICAgICAgICBpbml0R2FtZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzZXRUaW1lb3V0KGluaXQsIDUwMCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBsb2FkUmVzb3VyY2VzKCk6IHZvaWQge1xyXG5cclxuICAgIHZhciBwcm9qZWN0SUQgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3Vic3RyaW5nKDkpO1xyXG4gICAgQ29uZmlnLnByb2plY3RJRCA9IHByb2plY3RJRDtcclxuICAgIC8vIHByb2plY3QgZGF0YVxyXG4gICAgYXhpb3MucG9zdCgnL2FwaS9nZXRQcm9qZWN0JywgeyBwcm9qZWN0SUQ6IENvbmZpZy5wcm9qZWN0SUQgfSlcclxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gJzAwMDAnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgQ29uZmlnLnByb2plY3REYXRhID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgQ29uZmlnLnByb2plY3ROYW1lID0gZGF0YS5kYXRhLnByb2plY3QubmFtZTtcclxuICAgICAgICAgICAgICAgIENvbmZpZy51c2VySUQgPSBkYXRhLmRhdGEub3duZXIuaWQ7XHJcbiAgICAgICAgICAgICAgICBDb25maWcudXNlcm5hbWUgPSBkYXRhLmRhdGEub3duZXIudXNlcm5hbWU7XHJcbiAgICAgICAgICAgICAgICAvLyDliqDovb3lroxhc3NldHPmlbDmja7lho3liqDovb1zY2VuZeaVsOaNru+8jOS+v+S6juino+aekHNjZW5l6L+H56iL5Lit5L2/55SoYXNzZXRz5pWw5o2uXHJcbiAgICAgICAgICAgICAgICBlZGl0b3IuY2FsbCgnZ2V0QXNzZXRzJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudC50aXRsZSA9IENvbmZpZy5wcm9qZWN0TmFtZSArICcgLSDkuIfnu7TlvJXmk44nO1xyXG4gICAgICAgICAgICAgICAgLy8gZWRpdG9yLmNhbGwoJ3Rvb2xiYXIucHJvamVjdC5zZXQnLCBDb25maWcucHJvamVjdE5hbWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignbG9hZCBwcm9qZWN0IGRhdGEgZXJyb3I6ICcgKyBkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goXHJcbiAgICAgICAgICAgIGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2xvYWQgcHJvamVjdCBkYXRhIGVycm9yOiAnKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcblxyXG4gICAgZWRpdG9yLm1ldGhvZCgnZ2V0QXNzZXRzJywgKCkgPT4ge1xyXG4gICAgICAgIC8vIGFzc2V0cyBkYXRhXHJcbiAgICAgICAgYXhpb3MucG9zdCgnL2FwaS9nZXRBc3NldHMnLCB7IHByb2plY3RJRDogQ29uZmlnLnByb2plY3RJRCB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09PSAnMDAwMCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIENvbmZpZy5hc3NldHNEYXRhID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIEJhYnlsb25Mb2FkZXIuYXNzZXRzRGF0YSA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlZGl0b3IuY2FsbCgnaW5pdEFzc2V0cycsIENvbmZpZy5hc3NldHNEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDliqDovb3lroxhc3NldHPmlbDmja7lho3liqDovb1zY2VuZeaVsOaNru+8jOS+v+S6juino+aekHNjZW5l6L+H56iL5Lit5L2/55SoYXNzZXRz5pWw5o2uXHJcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmNhbGwoJ2dldFNjZW5lcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWKoOi9veihqOagvOWIpOaWrVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuZGF0YS5hc3NldHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrZXkgaW4gZGF0YS5kYXRhLmFzc2V0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5kYXRhLmFzc2V0c1trZXldLnR5cGUgPT09ICd0YWJsZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25maWcudGFibGVBc3NldHNJRCA9IGtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25maWcudGFibGVOYW1lID0gZGF0YS5kYXRhLmFzc2V0c1trZXldLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoQ29uZmlnLnRhYmxlQXNzZXRzSUQgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5jYWxsKCdsb2FkVGFibGUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGVwLmVtaXQoJ3NldHRpbmdzJywgcmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChcclxuICAgICAgICAgICAgICAgIGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGVkaXRvci5tZXRob2QoJ2dldFNjZW5lcycsICgpID0+IHtcclxuICAgICAgICAvLyBzY2VuZXMgZGF0YVxyXG4gICAgICAgIGF4aW9zLnBvc3QoJy9hcGkvZ2V0U2NlbmVzJywgeyBwcm9qZWN0SUQ6IENvbmZpZy5wcm9qZWN0SUR9KVxyXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09PSAnMDAwMCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdFNjZW5lOiBudW1iZXIgPSBkYXRhLmRhdGEubGFzdDtcclxuICAgICAgICAgICAgICAgICAgICBDb25maWcuc2NlbmVzRGF0YSA9IGRhdGEuZGF0YS5zY2VuZXNbbGFzdFNjZW5lXTtcclxuICAgICAgICAgICAgICAgICAgICBDb25maWcuc2NlbmVJbmRleCA9IGxhc3RTY2VuZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhDb25maWcuc2NlbmVzRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YUxvYWRlZDIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVkaXRvci5lbWl0KCdzY2VuZTpyYXcnLCBDb25maWcuc2NlbmVzRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZWRpdG9yLmNhbGwoJ3Rvb2xiYXIuc2NlbmUuc2V0JywgQ29uZmlnLnNjZW5lc0RhdGEubmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGVwLmVtaXQoJ3NldHRpbmdzJywgcmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChcclxuICAgICAgICAgICAgICAgIGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBlZGl0b3IubWV0aG9kKCdsb2FkVGFibGUnLCAoKSA9PiB7XHJcbiAgICAgICAgLy8g6I635Y+W6KGo5qC85pWw5o2uXHJcbiAgICAgICAgdmFyIHBhdGggPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgICB2YXIgcGFyYW1zRGF0YTogYW55ID0ge307XHJcbiAgICAgICAgcGFyYW1zRGF0YVsnbmFtZSddID0gQ29uZmlnLnRhYmxlTmFtZTtcclxuICAgICAgICBwYXJhbXNEYXRhWydwcm9qZWN0SUQnXSA9IHByb2plY3RJRDtcclxuICAgICAgICBwYXJhbXNEYXRhWydpZCddID0gQ29uZmlnLnRhYmxlQXNzZXRzSUQ7XHJcbiAgICAgICAgYXhpb3NcclxuICAgICAgICAgICAgLmdldCgnL2FwaS90YWJsZS9hY3F1aXJlJywge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXNEYXRhLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGxldCBkYXRhID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gJzAwMDAnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5YWI5bCGanNvbui9rOWMluS4uuWtl+espuS4slxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wRGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5a+55a2X56ym5Liy5YaN6L+b6KGM5Y+N6L2s5LmJXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcERhdGEgPSBlc2NhcGUySHRtbCh0ZW1wRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6L2s5YyW5Li6anNvbuWQju+8jOi1i+WAvOe7meihqOagvFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhvdDEubG9hZERhdGEoSlNPTi5wYXJzZSh0ZW1wRGF0YSkudGFibGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKEpTT04ucGFyc2UodGVtcERhdGEpLnRhYmxlKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhcyA9IEpTT04ucGFyc2UodGVtcERhdGEpLnRhYmxlO1xyXG4gICAgICAgICAgICAgICAgICAgIENvbmZpZy50YWJsZURhdGEgPSBkYXRhcztcclxuICAgICAgICAgICAgICAgICAgICBkYXRhTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90aGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkIG5vdCByaWdodDogJyArIGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkIGVycm9yOiAnICsgZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG59XHJcblxyXG5sb2FkUmVzb3VyY2VzKCk7XHJcblxyXG5cclxuZnVuY3Rpb24gbG9hZFNjZW5lKCk6IHZvaWQge1xyXG5cclxuXHJcbiAgICB2YXIgc2NlbmVEYXRhOiBhbnk7XHJcbiAgICBheGlvcy5wb3N0KCcvYXBpL2dldFNjZW5lcycsIHsgcHJvamVjdElEOiBwcm9qZWN0SUQgfSlcclxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gJzAwMDAnKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGFzdFNjZW5lOiBudW1iZXIgPSBkYXRhLmRhdGEubGFzdDtcclxuICAgICAgICAgICAgICAgIHNjZW5lRGF0YSA9IGRhdGEuZGF0YS5zY2VuZXNbbGFzdFNjZW5lXTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNjZW5lRGF0YSk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHNjZW5lRGF0YS5uYW1lICsgJyB8IOWPkeW4g+mhueebric7XHJcbiAgICAgICAgICAgICAgICAvLyBwYXRoMSA9IHNjZW5lRGF0YS5wYXRoMTtcclxuICAgICAgICAgICAgICAgIC8vIHBhdGgyID0gc2NlbmVEYXRhLnBhdGgyO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3BhdGgxOiAnICsgc2NlbmVEYXRhLnBhdGgxKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdwYXRoMjogJyArIHNjZW5lRGF0YS5wYXRoMik7XHJcbiAgICAgICAgICAgICAgICAvLyBkYXRhTG9hZGVkMiA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZXAuZW1pdCgnc2V0dGluZ3MnLCByZXNwb25zZS5kYXRhKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChcclxuICAgICAgICAgICAgZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgKTtcclxufVxyXG5cclxuLy8gbG9hZFNjZW5lKCk7XHJcblxyXG5cclxuLy8gZnVuY3Rpb24gbG9hZERhdGEoKTogdm9pZCB7XHJcblxyXG4vLyB9XHJcblxyXG4vLyBsb2FkRGF0YSgpO1xyXG5cclxuLy9IVE1M5qCH562+6L2s5LmJ77yIPCAtPiAmbHQ777yJXHJcbmZ1bmN0aW9uIGh0bWwyRXNjYXBlKHNIdG1sOiBhbnkpIHtcclxuICAgIHZhciB0ZW1wOiBhbnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRlbXAudGV4dENvbnRlbnQgIT0gbnVsbFxyXG4gICAgICAgID8gKHRlbXAudGV4dENvbnRlbnQgPSBzSHRtbClcclxuICAgICAgICA6ICh0ZW1wLmlubmVyVGV4dCA9IHNIdG1sKTtcclxuICAgIHZhciBvdXRwdXQgPSB0ZW1wLmlubmVySFRNTDtcclxuICAgIHRlbXAgPSBudWxsO1xyXG4gICAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuLy9IVE1M5qCH562+5Y+N6L2s5LmJ77yIJmx0OyAtPiA877yJXHJcbmZ1bmN0aW9uIGVzY2FwZTJIdG1sKHN0cjogYW55KSB7XHJcbiAgICB2YXIgdGVtcDogYW55ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0ZW1wLmlubmVySFRNTCA9IHN0cjtcclxuICAgIHZhciBvdXRwdXQgPSB0ZW1wLmlubmVyVGV4dCB8fCB0ZW1wLnRleHRDb250ZW50O1xyXG4gICAgdGVtcCA9IG51bGw7XHJcbiAgICByZXR1cm4gb3V0cHV0O1xyXG59XHJcblxyXG4vLyDlhbPogZTmjInpkq5cclxuLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3J1bkJ1dHRvbicpIS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJ1bkJ0bik7XHJcblxyXG4vLyAvLyDlhbPogZTmjInpkq5cclxuLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlYnVnQnV0dG9uJykhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlRGVidWcpO1xyXG5cclxuLy8g5ZCv5Yqo5byV5pOOXHJcbi8vIOesrOS4gOasoeWQr+WKqOaXtu+8jOWFiOW8guatpeWKoOi9veaVsOaNruWQjuWGjeWIneWni+WMlu+8jOWQjuacn+WPr+S7peebtOaOpeeCueWHu+aMiemSrui/m+ihjOWKoOi9ve+8m1xyXG5pbml0KCk7XHJcbi8vIGxvYWREYXRhMigpXHJcbi8vICAgLnRoZW4oZnVuY3Rpb24gKGhvdDogSGFuZFRhYmxlKSB7XHJcbi8vICAgICBjb25zb2xlLmxvZyhob3QuZ2V0RGF0YSgpKTtcclxuLy8gICB9XHJcbi8vICAgKTtcclxuIl19"}